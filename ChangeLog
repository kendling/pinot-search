------------------------------------------------------------------------
r1351 | fabricecolin | 2008-08-29 23:58:52 +0800 (Fri, 29 Aug 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog-dijon
   M /trunk/NEWS

Updated NEWS and Dijon's ChangeLog.

------------------------------------------------------------------------
r1350 | fabricecolin | 2008-08-28 23:52:50 +0800 (Thu, 28 Aug 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Plugins/Google.src

Another plugin update.

------------------------------------------------------------------------
r1349 | fabricecolin | 2008-08-28 21:30:42 +0800 (Thu, 28 Aug 2008) | 3 lines
Changed paths:
   M /trunk/IndexSearch/pinot-index.1
   M /trunk/IndexSearch/pinot-label.1
   M /trunk/IndexSearch/pinot-search.1
   M /trunk/README
   M /trunk/TODO
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/configure.in

Bumped the version number, regenerated man pages.
Minor updates to TODO and README.

------------------------------------------------------------------------
r1348 | fabricecolin | 2008-08-28 21:14:48 +0800 (Thu, 28 Aug 2008) | 2 lines
Changed paths:
   M /trunk/Makefile.am

Move YahooBOSS.src out of the engines directory for the time being.

------------------------------------------------------------------------
r1347 | fabricecolin | 2008-08-28 21:08:46 +0800 (Thu, 28 Aug 2008) | 2 lines
Changed paths:
   D /trunk/IndexSearch/Plugins/CreativeCommons.src

This is now a blog search. The actual content search is somewhat obfuscated.

------------------------------------------------------------------------
r1346 | fabricecolin | 2008-08-28 21:07:38 +0800 (Thu, 28 Aug 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Plugins/BitTorrent.src
   M /trunk/IndexSearch/Plugins/CreativeCommons.src
   M /trunk/IndexSearch/Plugins/Freshmeat.src
   M /trunk/IndexSearch/Plugins/GoogleCodeSearch.src
   M /trunk/IndexSearch/Plugins/RollYOTopNews.src
   M /trunk/IndexSearch/Plugins/Wikipedia.src

Search engine updates.

------------------------------------------------------------------------
r1345 | fabricecolin | 2008-08-27 22:28:47 +0800 (Wed, 27 Aug 2008) | 3 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/README

Added rainofchaos to list of translators.
Rephrased part about engines and query syntaxes in section 6 of the README.

------------------------------------------------------------------------
r1344 | fabricecolin | 2008-08-25 22:46:08 +0800 (Mon, 25 Aug 2008) | 5 lines
Changed paths:
   M /trunk/IndexSearch/pinot-search.cpp
   M /trunk/README

Explain to what extent Xesam specs are supported; pinot-search's help text has
some examples now.
Clarify that building the Google API is not recommended, and how to use filters
in CJKV queries.

------------------------------------------------------------------------
r1343 | fabricecolin | 2008-08-24 12:43:33 +0800 (Sun, 24 Aug 2008) | 2 lines
Changed paths:
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/ja.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_CN.po
   M /trunk/po/zh_TW.po

Current translations.

------------------------------------------------------------------------
r1342 | fabricecolin | 2008-08-23 22:39:04 +0800 (Sat, 23 Aug 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp

Create a bunch of useful default queries.

------------------------------------------------------------------------
r1341 | fabricecolin | 2008-08-23 22:37:10 +0800 (Sat, 23 Aug 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Google/ModuleExports.cpp

Fix previous commit.

------------------------------------------------------------------------
r1340 | fabricecolin | 2008-08-23 20:57:23 +0800 (Sat, 23 Aug 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/statisticsDialog.cc
   M /trunk/UI/GTK2/src/statisticsDialog.hh

Show extra stats only when on.

------------------------------------------------------------------------
r1339 | fabricecolin | 2008-08-19 21:46:17 +0800 (Tue, 19 Aug 2008) | 2 lines
Changed paths:
   A /trunk/IndexSearch/Google/ModuleExports.cpp

Functions exported by this backend.

------------------------------------------------------------------------
r1338 | fabricecolin | 2008-08-19 21:43:52 +0800 (Tue, 19 Aug 2008) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/statisticsDialog.cc

Synced with the new ModuleFactory::getSupportedEngines().
Replaced PinotSettings::Engine with ModuleProperties.

------------------------------------------------------------------------
r1337 | fabricecolin | 2008-08-19 21:40:26 +0800 (Tue, 19 Aug 2008) | 4 lines
Changed paths:
   M /trunk/IndexSearch/Makefile.am
   M /trunk/IndexSearch/ModuleFactory.cpp
   M /trunk/IndexSearch/ModuleFactory.h
   A /trunk/IndexSearch/ModuleProperties.h
   M /trunk/IndexSearch/SearchPluginProperties.cpp
   M /trunk/IndexSearch/SearchPluginProperties.h
   M /trunk/IndexSearch/Xapian/ModuleExports.cpp
   M /trunk/IndexSearch/XesamGLib/ModuleExports.cpp
   M /trunk/IndexSearch/pinot-index.cpp
   M /trunk/IndexSearch/pinot-search.cpp

Spun some properties out of SearchPluginProperties into ModuleProperties.
Backends must implement ModuleProperties *getModuleProperties() instead of
string getModuleType().

------------------------------------------------------------------------
r1336 | fabricecolin | 2008-08-19 21:38:49 +0800 (Tue, 19 Aug 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/OpenSearchParser.cpp
   M /trunk/IndexSearch/SherlockParser.cpp

Forget about description of engines.

------------------------------------------------------------------------
r1335 | fabricecolin | 2008-08-16 13:57:59 +0800 (Sat, 16 Aug 2008) | 3 lines
Changed paths:
   M /trunk/configure.in

If GIO can sniff PNG, set USE_GIO and make sure programs link against it.
The test on GIO's sniffing abilities comes from gtk+'s configure.in.

------------------------------------------------------------------------
r1334 | fabricecolin | 2008-08-16 13:54:54 +0800 (Sat, 16 Aug 2008) | 3 lines
Changed paths:
   M /trunk/Utils/MIMEScanner.cpp

Compile getKeyValue() out if GIO is in use.
The xdgmime function to call in scanData() is xdg_mime_get_mime_type_for_data().

------------------------------------------------------------------------
r1333 | fabricecolin | 2008-08-15 22:47:45 +0800 (Fri, 15 Aug 2008) | 2 lines
Changed paths:
   M /trunk/Tokenize/FilterUtils.cpp
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/MIMEScanner.h

New MIMEScanner::scanData() method, used when a filter returns "scan" as type.

------------------------------------------------------------------------
r1332 | fabricecolin | 2008-08-15 21:25:14 +0800 (Fri, 15 Aug 2008) | 4 lines
Changed paths:
   M /trunk/Tokenize/FilterUtils.cpp
   M /trunk/Tokenize/FilterUtils.h
   M /trunk/Utils/CommandLine.cpp
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/MIMEScanner.h

MIMEScanner::getParentTypes() needs the list of all supported types so that in
GIO mode it can determine which types are related with g_content_type_is_a().
This flattens the types hierarchy though, but this will do.

------------------------------------------------------------------------
r1331 | fabricecolin | 2008-08-14 21:34:54 +0800 (Thu, 14 Aug 2008) | 3 lines
Changed paths:
   M /trunk/IndexSearch/pinot-index.cpp

If --showinfo is passed, show which actions are associated with the document's
MIME type.

------------------------------------------------------------------------
r1330 | fabricecolin | 2008-08-14 21:29:02 +0800 (Thu, 14 Aug 2008) | 4 lines
Changed paths:
   M /trunk/Utils/CommandLine.cpp
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/MIMEScanner.h
   M /trunk/Utils/Makefile.am

Use GAppInfo at the same time as GContentType, instead of the MIMECache code.
This extends to CommandLine::runAsync().
Switched to USE_GIO for consistency with the HTTP stuff.

------------------------------------------------------------------------
r1329 | fabricecolin | 2008-08-11 15:43:11 +0800 (Mon, 11 Aug 2008) | 2 lines
Changed paths:
   M /trunk/Collect/FileCollector.cpp
   M /trunk/IndexSearch/pinot-index.cpp
   M /trunk/IndexSearch/pinot-search.cpp

Cosmetic changes.

------------------------------------------------------------------------
r1328 | fabricecolin | 2008-08-11 15:41:48 +0800 (Mon, 11 Aug 2008) | 3 lines
Changed paths:
   M /trunk/IndexSearch/Google/Makefile.am
   M /trunk/IndexSearch/Xapian/Makefile.am
   M /trunk/IndexSearch/XesamGLib/Makefile.am

Link all backends against BasicUtils.
For the Google API, bundle all source files as headers if support is turned off.

------------------------------------------------------------------------
r1327 | fabricecolin | 2008-08-11 15:39:22 +0800 (Mon, 11 Aug 2008) | 2 lines
Changed paths:
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/MIMEScanner.h
   M /trunk/Utils/Makefile.am

Use GContentType instead of xdgmime if HAVE_GIO_MIME is set/defined.

------------------------------------------------------------------------
r1326 | fabricecolin | 2008-08-06 21:35:44 +0800 (Wed, 06 Aug 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/XapianIndex.cpp
   M /trunk/IndexSearch/Xapian/XapianIndex.h

Removed dead functions. Both set/getLabels() rely on set/getMetadata().

------------------------------------------------------------------------
r1325 | fabricecolin | 2008-08-04 22:45:18 +0800 (Mon, 04 Aug 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Google API key fix.

------------------------------------------------------------------------
r1324 | fabricecolin | 2008-08-04 22:37:13 +0800 (Mon, 04 Aug 2008) | 2 lines
Changed paths:
   D /trunk/Tokenize/Tokenizer.cpp
   D /trunk/Tokenize/tokenizertest.cpp

These two were obsoleted quite some time ago...

------------------------------------------------------------------------
r1323 | fabricecolin | 2008-08-04 22:33:24 +0800 (Mon, 04 Aug 2008) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/prefsDialog.cc

The Google API engine is now loaded dynamically, if available, and identified as
"Google API".

------------------------------------------------------------------------
r1322 | fabricecolin | 2008-08-04 22:31:35 +0800 (Mon, 04 Aug 2008) | 2 lines
Changed paths:
   D /trunk/IndexSearch/SOAPEnv.h
   D /trunk/IndexSearch/SOAPEnvH.h
   D /trunk/IndexSearch/SOAPEnvNS.cpp
   D /trunk/IndexSearch/SOAPEnvStub.h

These are no longer needed.

------------------------------------------------------------------------
r1321 | fabricecolin | 2008-08-04 22:22:08 +0800 (Mon, 04 Aug 2008) | 5 lines
Changed paths:
   M /trunk/IndexSearch/Google/GAPIC.cpp
   M /trunk/IndexSearch/Google/GAPIClient.cpp
   M /trunk/IndexSearch/Google/GAPIClientLib.cpp
   M /trunk/IndexSearch/Google/GAPIGoogleSearchBindingProxy.h
   M /trunk/IndexSearch/Google/GAPIH.h
   M /trunk/IndexSearch/Google/GAPIStub.h
   M /trunk/IndexSearch/Google/GoogleAPIEngine.cpp
   M /trunk/IndexSearch/Google/GoogleSearch.h
   M /trunk/IndexSearch/Google/Makefile.am

Regenerated code with gsoap 2.7.10.
Compile GAPIC and GAPIClient, and ignore GAPIClientLib as it defines a macro
that makes all the soap_ functions static. All this is built into a dynamic
backend.

------------------------------------------------------------------------
r1320 | fabricecolin | 2008-08-04 22:15:56 +0800 (Mon, 04 Aug 2008) | 6 lines
Changed paths:
   M /trunk/Collect/Makefile.am
   M /trunk/IndexSearch/FilterWrapper.h
   M /trunk/IndexSearch/IndexInterface.h
   M /trunk/IndexSearch/Makefile.am
   M /trunk/IndexSearch/ModuleFactory.cpp
   M /trunk/IndexSearch/QueryProperties.h
   M /trunk/IndexSearch/SearchEngineInterface.h
   M /trunk/IndexSearch/WebEngine.h
   M /trunk/IndexSearch/Xapian/Makefile.am
   M /trunk/IndexSearch/Xapian/ModuleExports.cpp
   M /trunk/IndexSearch/XesamGLib/Makefile.am
   M /trunk/IndexSearch/XesamGLib/ModuleExports.cpp
   M /trunk/Monitor/Makefile.am
   M /trunk/SQL/Makefile.am
   M /trunk/Tokenize/FilterUtils.h
   M /trunk/Tokenize/Makefile.am
   M /trunk/Tokenize/TextConverter.h
   M /trunk/Tokenize/Tokenizer.h
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/Utils/CommandLine.h
   M /trunk/Utils/Document.h
   M /trunk/Utils/DocumentInfo.h
   M /trunk/Utils/Languages.h
   M /trunk/Utils/MIMEScanner.h
   M /trunk/Utils/Makefile.am
   M /trunk/Utils/StringManip.h
   M /trunk/Utils/TimeConverter.h
   M /trunk/Utils/Timer.h
   M /trunk/Utils/Url.h
   M /trunk/configure.in

If gcc 4.x is available, set symbol visibility to hidden by default. Only export
stuff we know is required by the backends, and backend's entry points.
Don't build libSearchSOAP, and remove references to the Google API engine, this
will go into a separate backend.
-fPIC is set in CXXFLAGS by configure.in instead of in each Makefile.

------------------------------------------------------------------------
r1319 | fabricecolin | 2008-08-03 23:23:35 +0800 (Sun, 03 Aug 2008) | 2 lines
Changed paths:
   A /trunk/Utils/Visibility.h

Some macros to set symbol visibility.

------------------------------------------------------------------------
r1318 | fabricecolin | 2008-08-03 23:22:35 +0800 (Sun, 03 Aug 2008) | 3 lines
Changed paths:
   A /trunk/UI/GTK2/src/UniqueApplication.cpp
   A /trunk/UI/GTK2/src/UniqueApplication.h
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Moved code that enforced the daemon's uniqueness to UniqueApplication and
prepare for an eventual switch to Unique (http://www.gnome.org/~ebassi/source/).

------------------------------------------------------------------------
r1317 | fabricecolin | 2008-08-03 21:02:29 +0800 (Sun, 03 Aug 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Time retrieveUrl().

------------------------------------------------------------------------
r1316 | fabricecolin | 2008-08-03 17:09:13 +0800 (Sun, 03 Aug 2008) | 3 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/XapianEngine.cpp

The flag QueryParser::FLAG_BOOLEAN_ANY_CASE causes more problems than it's worth,
especially when queries are pieces of text pasted from elsewhere.

------------------------------------------------------------------------
r1315 | fabricecolin | 2008-08-03 17:04:32 +0800 (Sun, 03 Aug 2008) | 4 lines
Changed paths:
   M /trunk/IndexSearch/XesamGLib/XesamEngine.cpp

Use xesam:language and xesam:relevancyRating.
It's not clear in what language the languages list is supposed to be, so we
assume it's in the locale language.

------------------------------------------------------------------------
r1314 | fabricecolin | 2008-07-26 14:10:28 +0800 (Sat, 26 Jul 2008) | 3 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/po/de.po
   M /trunk/po/fr.po
   M /trunk/po/pt_BR.po
   M /trunk/po/sv.po

Updated de, pt_BR, sv and fr by Gena Haltmair, Rafael Porto Rodrigues, Daniel
Nylander and myself.

------------------------------------------------------------------------
r1313 | fabricecolin | 2008-07-26 12:20:04 +0800 (Sat, 26 Jul 2008) | 5 lines
Changed paths:
   M /trunk/IndexSearch/DBusIndex.cpp
   M /trunk/IndexSearch/DBusIndex.h
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml
   M /trunk/UI/GTK2/src/statisticsDialog.cc
   M /trunk/UI/GTK2/src/statisticsDialog.hh

Extended GetStatistics to return the flags "low disk space", "on battery" and
"crawling". The latter is new to the daemon and set while a DirectoryScanner is
running.
That information is displayed in the Status window.

------------------------------------------------------------------------
r1311 | fabricecolin | 2008-07-19 19:11:52 +0800 (Sat, 19 Jul 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/ChangeLog-dijon

Current logs.

------------------------------------------------------------------------
r1310 | fabricecolin | 2008-07-19 19:00:19 +0800 (Sat, 19 Jul 2008) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO

This release's details.

------------------------------------------------------------------------
r1309 | fabricecolin | 2008-07-19 18:58:19 +0800 (Sat, 19 Jul 2008) | 2 lines
Changed paths:
   M /trunk/pinot.desktop

Provide a comment for ru... in English, because it's not been translated yet.

------------------------------------------------------------------------
r1308 | fabricecolin | 2008-07-19 18:56:13 +0800 (Sat, 19 Jul 2008) | 2 lines
Changed paths:
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/ja.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_CN.po
   M /trunk/po/zh_TW.po

Current ranslations.

------------------------------------------------------------------------
r1307 | fabricecolin | 2008-07-19 18:49:20 +0800 (Sat, 19 Jul 2008) | 4 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/AbstractGenerator.cpp
   M /trunk/IndexSearch/pinot-index.cpp

AbstractGenerator ignores the current term's other positions when weighting
abstract windows.
pinot-index only lists index-capable backends.

------------------------------------------------------------------------
r1306 | fabricecolin | 2008-07-19 18:47:28 +0800 (Sat, 19 Jul 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/pinot-index.1
   M /trunk/IndexSearch/pinot-label.1
   M /trunk/IndexSearch/pinot-search.1
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/configure.in

Bumped version number to 0.87, updated manual pages.

------------------------------------------------------------------------
r1305 | fabricecolin | 2008-07-19 17:59:53 +0800 (Sat, 19 Jul 2008) | 2 lines
Changed paths:
   M /trunk/Makefile.am

Don't move AmazonAPI out of the engines directory.

------------------------------------------------------------------------
r1304 | fabricecolin | 2008-07-19 17:58:39 +0800 (Sat, 19 Jul 2008) | 2 lines
Changed paths:
   M /trunk/Collect/CurlDownloader.cpp

Follow META REFRESH if set.

------------------------------------------------------------------------
r1303 | fabricecolin | 2008-07-19 17:29:42 +0800 (Sat, 19 Jul 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/XesamGLib/XesamEngine.cpp

Fixed UL/QL mixup.

------------------------------------------------------------------------
r1302 | fabricecolin | 2008-07-19 14:44:20 +0800 (Sat, 19 Jul 2008) | 3 lines
Changed paths:
   M /trunk/IndexSearch/XesamGLib/XesamEngine.cpp

Extract hits data, turn live search off, set the maximum number of results and
abort the search after a few seconds.

------------------------------------------------------------------------
r1301 | fabricecolin | 2008-07-19 14:24:35 +0800 (Sat, 19 Jul 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc

The UI will let foreground threads run for up to a minute.

------------------------------------------------------------------------
r1300 | fabricecolin | 2008-07-18 23:21:09 +0800 (Fri, 18 Jul 2008) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp

Add search-only backends to the Current User channel and make sure it stays at
the bottom of the engines tree.

------------------------------------------------------------------------
r1299 | fabricecolin | 2008-07-18 21:28:33 +0800 (Fri, 18 Jul 2008) | 6 lines
Changed paths:
   M /trunk/IndexSearch/PluginWebEngine.cpp
   M /trunk/IndexSearch/Plugins/AmazonAPI.src
   M /trunk/IndexSearch/SherlockParser.cpp
   M /trunk/IndexSearch/pinot-search.cpp

pinot-search can set a plugin editable parameter with -e/--seteditable.
PluginWebEngine will output an error message if an editable parameter has no
value.
The Sherlock parser lower-cased input parameters for no specific reason.
Moved the Amazon API plugin to the Shopping channel.

------------------------------------------------------------------------
r1298 | fabricecolin | 2008-07-13 21:51:08 +0800 (Sun, 13 Jul 2008) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.hh

Preferences let the user edit all editable parameters defined in the plugins.
Values are saved to and loaded from the configuration file, and are passed to
WebEngine-derived search engines.

------------------------------------------------------------------------
r1297 | fabricecolin | 2008-07-13 21:46:53 +0800 (Sun, 13 Jul 2008) | 8 lines
Changed paths:
   M /trunk/IndexSearch/ModuleFactory.cpp
   M /trunk/IndexSearch/OpenSearchParser.cpp
   M /trunk/IndexSearch/OpenSearchParser.h
   M /trunk/IndexSearch/PluginParsers.h
   M /trunk/IndexSearch/PluginWebEngine.cpp
   M /trunk/IndexSearch/PluginWebEngine.h
   M /trunk/IndexSearch/Plugins/A9.src
   M /trunk/IndexSearch/Plugins/AmazonAPI.src
   A /trunk/IndexSearch/Plugins/YahooBOSS.src
   M /trunk/IndexSearch/SearchPluginProperties.cpp
   M /trunk/IndexSearch/SearchPluginProperties.h
   M /trunk/IndexSearch/SherlockParser.cpp
   M /trunk/IndexSearch/SherlockParser.h
   M /trunk/IndexSearch/WebEngine.cpp
   M /trunk/IndexSearch/WebEngine.h

Plugins may define user-editable parameters by setting values to
EDIT:description. This is designed to let the user specify his/her own ID or
key for the Amazon API or the new Yahoo! BOSS API without having to edit
plugins.
For Sherlock plugins that don't specify a USER INPUT, append the query terms to
the action URL.
Always set input and output encodings, if defined, to UTF-8.

------------------------------------------------------------------------
r1296 | fabricecolin | 2008-07-11 14:21:03 +0800 (Fri, 11 Jul 2008) | 2 lines
Changed paths:
   M /trunk/README

Clarify some inaccuracies.

------------------------------------------------------------------------
r1295 | fabricecolin | 2008-07-11 14:17:47 +0800 (Fri, 11 Jul 2008) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h

Use a TextView for extracts. This will allow dropping portions of the extract
in the queries list. A bold tag is applied to words to highlight.

------------------------------------------------------------------------
r1294 | fabricecolin | 2008-07-11 12:47:39 +0800 (Fri, 11 Jul 2008) | 6 lines
Changed paths:
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

Support for drag-n-drop.
Dropping text on the stored queries list will create a new query with this text,
while dropping files will generate a query to find similar documents in the
indexes. If necessary, these files are indexed in My Web Pages.
Files can be dropped on the import dialog's location field too.

------------------------------------------------------------------------
r1293 | fabricecolin | 2008-07-11 12:41:53 +0800 (Fri, 11 Jul 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/XapianEngine.cpp

Skip very short non-CJKV terms when expanding queries.

------------------------------------------------------------------------
r1292 | fabricecolin | 2008-07-06 21:07:46 +0800 (Sun, 06 Jul 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/XapianEngine.cpp

The QueryModifier would sometimes append n-1 bytes of the last CJKV character.

------------------------------------------------------------------------
r1291 | fabricecolin | 2008-07-06 21:03:23 +0800 (Sun, 06 Jul 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/ModuleFactory.cpp
   M /trunk/IndexSearch/ModuleFactory.h
   A /trunk/IndexSearch/XesamGLib/ModuleExports.cpp

Backends that are search-only don't need to export index-related functions.

------------------------------------------------------------------------
r1290 | fabricecolin | 2008-06-28 20:34:01 +0800 (Sat, 28 Jun 2008) | 3 lines
Changed paths:
   A /trunk/IndexSearch/XesamGLib
   A /trunk/IndexSearch/XesamGLib/Makefile.am
   A /trunk/IndexSearch/XesamGLib/XesamEngine.cpp
   A /trunk/IndexSearch/XesamGLib/XesamEngine.h
   M /trunk/Makefile.am
   M /trunk/configure.in
   M /trunk/pinot.spec.in

Experimental backend based on xesam-glib to query Xesam servers. Pass
"--enable-xesam-glib=yes" to configure and "--with xesam-glib" to rpmbuild.

------------------------------------------------------------------------
r1288 | fabricecolin | 2008-06-21 16:16:00 +0800 (Sat, 21 Jun 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog

Update logs.

------------------------------------------------------------------------
r1287 | fabricecolin | 2008-06-21 16:11:47 +0800 (Sat, 21 Jun 2008) | 2 lines
Changed paths:
   D /trunk/IndexSearch/Plugins/Accoona.src
   M /trunk/NEWS

Removing Accoona, it's now a B2B search engine.

------------------------------------------------------------------------
r1286 | fabricecolin | 2008-06-21 16:11:00 +0800 (Sat, 21 Jun 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Plugins/A9.src

Fixed results extraction.

------------------------------------------------------------------------
r1283 | fabricecolin | 2008-06-21 12:14:51 +0800 (Sat, 21 Jun 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/ChangeLog-dijon

Current logs.

------------------------------------------------------------------------
r1282 | fabricecolin | 2008-06-21 12:06:37 +0800 (Sat, 21 Jun 2008) | 2 lines
Changed paths:
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/ja.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_CN.po
   M /trunk/po/zh_TW.po

Current translations.

------------------------------------------------------------------------
r1281 | fabricecolin | 2008-06-21 12:04:55 +0800 (Sat, 21 Jun 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/pinot-index.1
   M /trunk/IndexSearch/pinot-label.1
   M /trunk/IndexSearch/pinot-search.1
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/configure.in

Preparing for v0.86 release.

------------------------------------------------------------------------
r1280 | fabricecolin | 2008-06-19 23:05:50 +0800 (Thu, 19 Jun 2008) | 3 lines
Changed paths:
   M /trunk/Collect/CurlDownloader.cpp
   M /trunk/Collect/CurlDownloader.h
   M /trunk/Collect/DownloaderFactory.cpp
   M /trunk/Collect/DownloaderFactory.h
   M /trunk/Collect/DownloaderInterface.cpp
   M /trunk/Collect/DownloaderInterface.h
   M /trunk/Collect/FileCollector.cpp
   M /trunk/Collect/FileCollector.h
   M /trunk/Collect/MboxCollector.cpp
   M /trunk/Collect/MboxCollector.h
   M /trunk/Collect/NeonDownloader.cpp
   M /trunk/Collect/NeonDownloader.h
   M /trunk/IndexSearch/DBusIndex.cpp
   M /trunk/IndexSearch/DBusIndex.h
   M /trunk/IndexSearch/FilterWrapper.cpp
   M /trunk/IndexSearch/FilterWrapper.h
   M /trunk/IndexSearch/Google/GoogleAPIEngine.cpp
   M /trunk/IndexSearch/Google/GoogleAPIEngine.h
   M /trunk/IndexSearch/IndexInterface.h
   M /trunk/IndexSearch/ModuleFactory.cpp
   M /trunk/IndexSearch/ModuleFactory.h
   M /trunk/IndexSearch/OpenSearchParser.cpp
   M /trunk/IndexSearch/OpenSearchParser.h
   M /trunk/IndexSearch/PluginParsers.h
   M /trunk/IndexSearch/PluginWebEngine.cpp
   M /trunk/IndexSearch/PluginWebEngine.h
   M /trunk/IndexSearch/QueryProperties.cpp
   M /trunk/IndexSearch/QueryProperties.h
   M /trunk/IndexSearch/ResultsExporter.cpp
   M /trunk/IndexSearch/ResultsExporter.h
   M /trunk/IndexSearch/SOAPEnvH.h
   M /trunk/IndexSearch/SOAPEnvStub.h
   M /trunk/IndexSearch/SearchEngineInterface.cpp
   M /trunk/IndexSearch/SearchEngineInterface.h
   M /trunk/IndexSearch/SearchPluginProperties.cpp
   M /trunk/IndexSearch/SearchPluginProperties.h
   M /trunk/IndexSearch/SherlockParser.cpp
   M /trunk/IndexSearch/SherlockParser.h
   M /trunk/IndexSearch/WebEngine.cpp
   M /trunk/IndexSearch/WebEngine.h
   M /trunk/IndexSearch/Xapian/AbstractGenerator.cpp
   M /trunk/IndexSearch/Xapian/AbstractGenerator.h
   M /trunk/IndexSearch/Xapian/LanguageDetector.cpp
   M /trunk/IndexSearch/Xapian/LanguageDetector.h
   M /trunk/IndexSearch/Xapian/ModuleExports.cpp
   M /trunk/IndexSearch/Xapian/XapianDatabase.cpp
   M /trunk/IndexSearch/Xapian/XapianDatabase.h
   M /trunk/IndexSearch/Xapian/XapianDatabaseFactory.cpp
   M /trunk/IndexSearch/Xapian/XapianDatabaseFactory.h
   M /trunk/IndexSearch/Xapian/XapianEngine.cpp
   M /trunk/IndexSearch/Xapian/XapianEngine.h
   M /trunk/IndexSearch/Xapian/XapianIndex.cpp
   M /trunk/IndexSearch/Xapian/XapianIndex.h
   M /trunk/IndexSearch/XesamLog.h
   M /trunk/IndexSearch/pinot-index.cpp
   M /trunk/IndexSearch/pinot-label.cpp
   M /trunk/IndexSearch/pinot-search.cpp
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/Monitor/INotifyMonitor.h
   M /trunk/Monitor/MonitorEvent.cpp
   M /trunk/Monitor/MonitorEvent.h
   M /trunk/Monitor/MonitorFactory.cpp
   M /trunk/Monitor/MonitorFactory.h
   M /trunk/Monitor/MonitorHandler.cpp
   M /trunk/Monitor/MonitorHandler.h
   M /trunk/Monitor/MonitorInterface.h
   M /trunk/SQL/ActionQueue.cpp
   M /trunk/SQL/ActionQueue.h
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/CrawlHistory.h
   M /trunk/SQL/QueryHistory.cpp
   M /trunk/SQL/QueryHistory.h
   M /trunk/SQL/SQLDB.cpp
   M /trunk/SQL/SQLDB.h
   M /trunk/SQL/SQLiteBase.cpp
   M /trunk/SQL/SQLiteBase.h
   M /trunk/SQL/ViewHistory.cpp
   M /trunk/SQL/ViewHistory.h
   M /trunk/SQL/historytest.cpp
   M /trunk/Tokenize/FilterUtils.cpp
   M /trunk/Tokenize/FilterUtils.h
   M /trunk/Tokenize/TextConverter.cpp
   M /trunk/Tokenize/TextConverter.h
   M /trunk/Tokenize/Tokenizer.cpp
   M /trunk/Tokenize/Tokenizer.h
   M /trunk/Tokenize/tokenizertest.cpp
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/EnginesTree.h
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/IndexPage.h
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/Notebook.cpp
   M /trunk/UI/GTK2/src/Notebook.h
   M /trunk/UI/GTK2/src/OnDiskHandler.h
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/PinotUtils.cpp
   M /trunk/UI/GTK2/src/PinotUtils.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/ServerThreads.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/indexDialog.cc
   M /trunk/UI/GTK2/src/indexDialog.hh
   M /trunk/UI/GTK2/src/launcherDialog.cc
   M /trunk/UI/GTK2/src/launcherDialog.hh
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/propertiesDialog.hh
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.hh
   M /trunk/UI/GTK2/src/statisticsDialog.cc
   M /trunk/UI/GTK2/src/statisticsDialog.hh
   M /trunk/Utils/CommandLine.cpp
   M /trunk/Utils/CommandLine.h
   M /trunk/Utils/Document.cpp
   M /trunk/Utils/Document.h
   M /trunk/Utils/DocumentInfo.cpp
   M /trunk/Utils/DocumentInfo.h
   M /trunk/Utils/Languages.cpp
   M /trunk/Utils/Languages.h
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/MIMEScanner.h
   M /trunk/Utils/NLS.h
   M /trunk/Utils/StringManip.cpp
   M /trunk/Utils/StringManip.h
   M /trunk/Utils/TimeConverter.cpp
   M /trunk/Utils/TimeConverter.h
   M /trunk/Utils/Timer.cpp
   M /trunk/Utils/Timer.h
   M /trunk/Utils/Url.cpp
   M /trunk/Utils/Url.h

Generated SOAP headers with gsoap 2.7.10, removed erroneous reference to the
"Library General Public License" from all relevant files.

------------------------------------------------------------------------
r1279 | fabricecolin | 2008-06-18 20:29:58 +0800 (Wed, 18 Jun 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/Makefile.am

Added HTTP_CFLAGS, following recent changes to TimeConverter.

------------------------------------------------------------------------
r1278 | fabricecolin | 2008-06-18 20:28:59 +0800 (Wed, 18 Jun 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc

Hmm I would have sworn SIGTERM was caught here.

------------------------------------------------------------------------
r1277 | fabricecolin | 2008-06-15 22:28:43 +0800 (Sun, 15 Jun 2008) | 2 lines
Changed paths:
   M /trunk/Makefile.am

New target "manuals" to generate man pages with help2man.

------------------------------------------------------------------------
r1276 | fabricecolin | 2008-06-15 22:25:01 +0800 (Sun, 15 Jun 2008) | 2 lines
Changed paths:
   M /trunk/pinot.desktop

Japanese and Simplified Chinese were missing in there.

------------------------------------------------------------------------
r1275 | fabricecolin | 2008-06-15 22:24:18 +0800 (Sun, 15 Jun 2008) | 6 lines
Changed paths:
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/CrawlHistory.h
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/ServerThreads.cpp

On a full scan, change the status of all entries in CrawlHistory so that we can
unindex orphaned documents at the end of the scan, ie documents that belong to
deleted sources. Documents that have been deleted since the last full scan are
still unindexed at the end of source scans.
Do full scans on Reload.

------------------------------------------------------------------------
r1274 | fabricecolin | 2008-06-15 22:19:55 +0800 (Sun, 15 Jun 2008) | 4 lines
Changed paths:
   M /trunk/Utils/TimeConverter.cpp
   M /trunk/Utils/TimeConverter.h

The string generated by toTimestamp() has a time zone spec, not a name. Replaced
fromTimestamp() with Neon's or Curl's date parsing function, depending on which
is enabled, Curl being the preferred option.

------------------------------------------------------------------------
r1273 | fabricecolin | 2008-06-15 22:15:24 +0800 (Sun, 15 Jun 2008) | 2 lines
Changed paths:
   M /trunk

Edited externals to use http, since BerliOS decided to drop svn adn svn+ssh.

------------------------------------------------------------------------
r1272 | fabricecolin | 2008-05-28 22:28:35 +0800 (Wed, 28 May 2008) | 3 lines
Changed paths:
   M /trunk/IndexSearch/PluginWebEngine.cpp

In DEBUG mode, prefix the name of the file output is saved to with the engine's
hostname.

------------------------------------------------------------------------
r1271 | fabricecolin | 2008-05-28 22:26:25 +0800 (Wed, 28 May 2008) | 4 lines
Changed paths:
   M /trunk/Collect/CurlDownloader.cpp
   M /trunk/Collect/DownloaderInterface.cpp
   M /trunk/Collect/DownloaderInterface.h
   M /trunk/Collect/NeonDownloader.cpp

Both Neon and CurlDownloader look for a Last-Modified header and use that as
the document's timestamp.
In DownloaderInterface, the timeout is in seconds.

------------------------------------------------------------------------
r1270 | fabricecolin | 2008-05-23 23:31:01 +0800 (Fri, 23 May 2008) | 2 lines
Changed paths:
   M /trunk/SQL/QueryHistory.cpp
   M /trunk/SQL/QueryHistory.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp

We are actually interested in the date results are found and stored.

------------------------------------------------------------------------
r1269 | fabricecolin | 2008-05-23 23:27:37 +0800 (Fri, 23 May 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/Notebook.cpp
   M /trunk/UI/GTK2/src/Notebook.h

Use a custom style for tab buttons, as used by gnome-terminal.

------------------------------------------------------------------------
r1268 | fabricecolin | 2008-05-22 20:47:17 +0800 (Thu, 22 May 2008) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/IndexPage.h

Disconnect the queries combobox's changed signal before populating it and
reconnect when done.

------------------------------------------------------------------------
r1267 | fabricecolin | 2008-05-21 22:37:14 +0800 (Wed, 21 May 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/QueryProperties.cpp

We might as well trim spaces off the user-supplied query too.

------------------------------------------------------------------------
r1266 | fabricecolin | 2008-05-21 22:36:25 +0800 (Wed, 21 May 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/XapianIndex.cpp

Skip CJKV terms in getCloseTerms().

------------------------------------------------------------------------
r1265 | fabricecolin | 2008-05-20 22:47:50 +0800 (Tue, 20 May 2008) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Synced with recent changes to QueryHistory.
Don't offer suggestions if the current live query term is a filter or a range.

------------------------------------------------------------------------
r1264 | fabricecolin | 2008-05-20 22:45:08 +0800 (Tue, 20 May 2008) | 3 lines
Changed paths:
   M /trunk/SQL/QueryHistory.cpp
   M /trunk/SQL/QueryHistory.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

We might as well drop the Language column since it was used as charset and all
the fields stored in this table are converted to UTF-8 prior to insertion.

------------------------------------------------------------------------
r1263 | fabricecolin | 2008-05-20 20:49:34 +0800 (Tue, 20 May 2008) | 3 lines
Changed paths:
   M /trunk/SQL/QueryHistory.cpp
   M /trunk/SQL/QueryHistory.h

Date is now part of the primary key so that we can have several snapshots of
query results.

------------------------------------------------------------------------
r1262 | fabricecolin | 2008-05-19 18:05:32 +0800 (Mon, 19 May 2008) | 3 lines
Changed paths:
   M /trunk/IndexSearch/QueryProperties.cpp

Trim spaces off query strings after removing filters to make sure we don't pass
strings consisting exclusively of spaces to Web engines.

------------------------------------------------------------------------
r1261 | fabricecolin | 2008-05-19 15:37:41 +0800 (Mon, 19 May 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/ServerThreads.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/statisticsDialog.cc

Name *History objects in a uniform manner to facilitate grepping the source.

------------------------------------------------------------------------
r1260 | fabricecolin | 2008-05-19 11:45:29 +0800 (Mon, 19 May 2008) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

In ignore-version mode, we'd better reset the index labels list too as
xapian-compact will <= 1.06 will have dropped it at the same time as the version
number.

------------------------------------------------------------------------
r1259 | fabricecolin | 2008-05-19 11:40:27 +0800 (Mon, 19 May 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml

The DocumentInfo methods also handle the "extract" field.

------------------------------------------------------------------------
r1258 | fabricecolin | 2008-05-19 11:33:01 +0800 (Mon, 19 May 2008) | 3 lines
Changed paths:
   M /trunk/scripts/python/pinot-module.py

Support for snippets. I am not convinced this is useful considering the current
Deskbar interface, so this is disabled for now.

------------------------------------------------------------------------
r1257 | fabricecolin | 2008-05-19 11:30:29 +0800 (Mon, 19 May 2008) | 3 lines
Changed paths:
   M /trunk/SQL/SQLDB.h
   M /trunk/SQL/SQLiteBase.cpp
   M /trunk/SQL/SQLiteBase.h

Utility method alterTable() to work-around SQLite's limited implementation of
ALTER TABLE.

------------------------------------------------------------------------
r1256 | fabricecolin | 2008-05-16 23:22:46 +0800 (Fri, 16 May 2008) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc

Refresh index lists with browse_index() when LabelUpdateThread returns, if
necessary. When the query combox is updated, the change of selection will lead
to a call to browse_index().

------------------------------------------------------------------------
r1255 | fabricecolin | 2008-05-16 23:08:07 +0800 (Fri, 16 May 2008) | 4 lines
Changed paths:
   M /trunk/IndexSearch/DBusIndex.cpp

Don't serialize to DBus empty fields. Added extract to the mix.
Both getLabels() and getDocumentLabels() now always query the daemon and not
the index.

------------------------------------------------------------------------
r1254 | fabricecolin | 2008-05-16 21:54:18 +0800 (Fri, 16 May 2008) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/Notebook.cpp
   M /trunk/UI/GTK2/src/Notebook.h

Prettier, but still too big, buttons in notebook tabs when _USE_BUTTON_TAB is
defined.

------------------------------------------------------------------------
r1252 | fabricecolin | 2008-05-11 17:27:37 +0800 (Sun, 11 May 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/ChangeLog-dijon

Current ChangeLogs.

------------------------------------------------------------------------
r1251 | fabricecolin | 2008-05-11 10:17:10 +0800 (Sun, 11 May 2008) | 2 lines
Changed paths:
   M /trunk/NEWS

List latest changes.

------------------------------------------------------------------------
r1250 | fabricecolin | 2008-05-11 10:16:14 +0800 (Sun, 11 May 2008) | 2 lines
Changed paths:
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/ja.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_CN.po
   M /trunk/po/zh_TW.po

Synced with latest changes.

------------------------------------------------------------------------
r1249 | fabricecolin | 2008-05-09 21:35:29 +0800 (Fri, 09 May 2008) | 2 lines
Changed paths:
   M /trunk/Utils/xdgmime/ChangeLog
   M /trunk/Utils/xdgmime/xdgmime.c
   M /trunk/Utils/xdgmime/xdgmime.h
   M /trunk/Utils/xdgmime/xdgmimealias.h
   M /trunk/Utils/xdgmime/xdgmimecache.c
   M /trunk/Utils/xdgmime/xdgmimecache.h
   M /trunk/Utils/xdgmime/xdgmimemagic.c
   M /trunk/Utils/xdgmime/xdgmimemagic.h
   M /trunk/Utils/xdgmime/xdgmimeparent.h

Synced with current gtk+'s xdgmime.

------------------------------------------------------------------------
r1248 | fabricecolin | 2008-05-09 21:33:05 +0800 (Fri, 09 May 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/AbstractGenerator.cpp

Fix for previous checkin.

------------------------------------------------------------------------
r1247 | fabricecolin | 2008-05-09 21:32:20 +0800 (Fri, 09 May 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/FilterWrapper.cpp

Only set a default title if the document is not to passed to another filter.

------------------------------------------------------------------------
r1246 | fabricecolin | 2008-05-09 00:36:04 +0800 (Fri, 09 May 2008) | 5 lines
Changed paths:
   M /trunk/IndexSearch/WebEngine.cpp
   M /trunk/IndexSearch/Xapian/AbstractGenerator.cpp
   M /trunk/IndexSearch/Xapian/XapianEngine.cpp

A fix for QueryModifier when the query is one CJKV character only.
AbstractGenerator needs to skip long n-grams early on when populating the
chosen window.
Cosmetic changes here and there.

------------------------------------------------------------------------
r1245 | fabricecolin | 2008-05-08 20:20:55 +0800 (Thu, 08 May 2008) | 6 lines
Changed paths:
   M /trunk/IndexSearch/QueryProperties.cpp
   M /trunk/IndexSearch/WebEngine.cpp
   M /trunk/IndexSearch/Xapian/AbstractGenerator.cpp

AbstractGenerator and WebEngine's TermHighlighter skip multi-character CJKV
terms to avoid repetition in extracts.
QueryProperties' FilterRemover does what the name implies and simply removes
filters and ranges from a query instead of trying to rebuild it one token at a
time.

------------------------------------------------------------------------
r1244 | fabricecolin | 2008-05-06 22:57:51 +0800 (Tue, 06 May 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp

If the global configuration file couldn't be open, don't assume a first run.

------------------------------------------------------------------------
r1243 | fabricecolin | 2008-05-06 22:56:48 +0800 (Tue, 06 May 2008) | 3 lines
Changed paths:
   M /trunk/IndexSearch/FilterWrapper.cpp
   M /trunk/Tokenize/FilterUtils.cpp
   M /trunk/Tokenize/TextConverter.cpp
   M /trunk/Tokenize/TextConverter.h

Overloaded TextConverter::toUTF8(). FilterWrapper uses the new method
Filter::set_utf8_converter(). Some minor changes.

------------------------------------------------------------------------
r1242 | fabricecolin | 2008-05-05 20:36:21 +0800 (Mon, 05 May 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/pinot-index.1
   M /trunk/IndexSearch/pinot-label.1
   M /trunk/IndexSearch/pinot-search.1
   M /trunk/NEWS
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/configure.in
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/ja.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_CN.po
   M /trunk/po/zh_TW.po

Bumped version number to 0.85.

------------------------------------------------------------------------
r1241 | fabricecolin | 2008-05-05 20:07:50 +0800 (Mon, 05 May 2008) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml

Removed JPEG from default blacklist.
Cosmetic modifications to pinot-dbus-daemon.xml.

------------------------------------------------------------------------
r1240 | fabricecolin | 2008-05-04 22:09:28 +0800 (Sun, 04 May 2008) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

In MonitorThread::stop(), write to the control pipe after the stop flag is set
by the call to the parent's method.
Removed unused method.

------------------------------------------------------------------------
r1239 | fabricecolin | 2008-05-03 14:25:58 +0800 (Sat, 03 May 2008) | 3 lines
Changed paths:
   M /trunk/README

Mention the limitation of mixed queries doesn't apply to 0.85 and newer and give
an example.

------------------------------------------------------------------------
r1238 | fabricecolin | 2008-05-03 14:17:10 +0800 (Sat, 03 May 2008) | 3 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/README
   M /trunk/pinot.spec.in

New dependency on libexif.
Added Mizuki-san to the AUTHORS file.

------------------------------------------------------------------------
r1237 | fabricecolin | 2008-05-03 14:13:44 +0800 (Sat, 03 May 2008) | 4 lines
Changed paths:
   M /trunk/IndexSearch/QueryProperties.cpp
   M /trunk/IndexSearch/WebEngine.cpp
   M /trunk/IndexSearch/Xapian/XapianEngine.cpp

Rely on the CJKV TokensHandler interface to remove filters from queries and get
sets of terms (QueryProperties), highlight terms (WebEngine) and tweak mixed
CJKV queries (XapianEngine).

------------------------------------------------------------------------
r1236 | fabricecolin | 2008-05-03 14:10:08 +0800 (Sat, 03 May 2008) | 2 lines
Changed paths:
   M /trunk/Makefile.am

David Paleino suggests removing the dependency on the m4 directory.

------------------------------------------------------------------------
r1235 | fabricecolin | 2008-05-03 14:06:48 +0800 (Sat, 03 May 2008) | 4 lines
Changed paths:
   M /trunk/IndexSearch/Makefile.am
   M /trunk/IndexSearch/Xapian/Makefile.am
   M /trunk/Tokenize/Makefile.am
   M /trunk/configure.in
   A /trunk/po/ja.po

CJKVTokenizer is useful to code outside of the Xapian back-end and should be
in libTokenize. The new Exif filter is also compiled.
Adding Mizuki-san's Japanese translation.

------------------------------------------------------------------------
r1234 | fabricecolin | 2008-04-29 20:57:49 +0800 (Tue, 29 Apr 2008) | 7 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

We don't need to keep the Glib::Thread pointer around since all threads detach.
Therefore entries can be inserted in the threads list before the new thread
is started, and we get rid of a possible race condition between list insertion
and thread exit.
In ThreadsManager::get_thread(), the list should be locked in write mode since
entries are removed.

------------------------------------------------------------------------
r1233 | fabricecolin | 2008-04-23 22:42:02 +0800 (Wed, 23 Apr 2008) | 3 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/XapianIndex.cpp
   M /trunk/IndexSearch/Xapian/XapianIndex.h

If a language is already specified, don't use it blindly but see if it has a
stemmer. If it doesn't, then scan the document.

------------------------------------------------------------------------
r1232 | fabricecolin | 2008-04-23 22:40:21 +0800 (Wed, 23 Apr 2008) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp

In DaemonState, if new directories are queued for crawling, if there's no
DirectoryScanner thread running, they won't be picked up. Call start_crawling()
after an addition to the queue, this will start a new crawler if necessary.
OnDiskHandler wasn't able to get the source label of files.

------------------------------------------------------------------------
r1231 | fabricecolin | 2008-04-23 22:04:22 +0800 (Wed, 23 Apr 2008) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

If the PID file is still there, open /proc/daemon_pid/cmdline and see whether
the given process is pinot-dbus-daemon.

------------------------------------------------------------------------
r1230 | fabricecolin | 2008-04-12 16:36:39 +0800 (Sat, 12 Apr 2008) | 3 lines
Changed paths:
   M /trunk/SQL/ActionQueue.cpp
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/Makefile.am
   M /trunk/SQL/QueryHistory.cpp
   A /trunk/SQL/SQLDB.cpp
   A /trunk/SQL/SQLDB.h
   M /trunk/SQL/SQLiteBase.cpp
   M /trunk/SQL/SQLiteBase.h
   M /trunk/SQL/ViewHistory.cpp

Moved generic code to SQLDB. This should allow implementing support for
other databases, if there's ever a need to.

------------------------------------------------------------------------
r1229 | fabricecolin | 2008-04-11 23:40:10 +0800 (Fri, 11 Apr 2008) | 2 lines
Changed paths:
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/CrawlHistory.h
   M /trunk/SQL/QueryHistory.cpp
   M /trunk/SQL/QueryHistory.h
   M /trunk/SQL/SQLiteBase.cpp
   M /trunk/SQL/SQLiteBase.h
   M /trunk/SQL/ViewHistory.cpp
   M /trunk/SQL/ViewHistory.h

Mostly namespace related cleanups.

------------------------------------------------------------------------
r1228 | fabricecolin | 2008-04-03 21:07:15 +0800 (Thu, 03 Apr 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Open the PID file, exit if that process is still running.

------------------------------------------------------------------------
r1226 | fabricecolin | 2008-03-27 16:32:05 +0800 (Thu, 27 Mar 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/ChangeLog-dijon

Current ChangeLogs.

------------------------------------------------------------------------
r1225 | fabricecolin | 2008-03-27 16:28:56 +0800 (Thu, 27 Mar 2008) | 2 lines
Changed paths:
   M /trunk/NEWS

Forgot to mention the new plugin for UNdata.

------------------------------------------------------------------------
r1224 | fabricecolin | 2008-03-27 14:25:09 +0800 (Thu, 27 Mar 2008) | 2 lines
Changed paths:
   M /trunk/NEWS

List of changes since 0.83.

------------------------------------------------------------------------
r1223 | fabricecolin | 2008-03-27 10:09:44 +0800 (Thu, 27 Mar 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/pinot-index.1
   M /trunk/IndexSearch/pinot-label.1
   M /trunk/IndexSearch/pinot-search.1
   M /trunk/TODO
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/configure.in

Preparing for 0.84 release.

------------------------------------------------------------------------
r1222 | fabricecolin | 2008-03-27 10:08:00 +0800 (Thu, 27 Mar 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/Makefile.am

Don't use -nostartfiles.

------------------------------------------------------------------------
r1221 | fabricecolin | 2008-03-27 10:00:36 +0800 (Thu, 27 Mar 2008) | 2 lines
Changed paths:
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_CN.po
   M /trunk/po/zh_TW.po

Translations updates.

------------------------------------------------------------------------
r1220 | fabricecolin | 2008-03-26 14:24:03 +0800 (Wed, 26 Mar 2008) | 2 lines
Changed paths:
   M /trunk/FAQ

New FAQ entry about how to compact the index.

------------------------------------------------------------------------
r1219 | fabricecolin | 2008-03-26 14:11:14 +0800 (Wed, 26 Mar 2008) | 6 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Ignore the index version number, i.e. don't force an upgrade if it's lower than
what was expected, if -i/--ignore-version is passed as parameter.
This is useful when ~/.pinot/daemon was compacted with xapian-compact 1.0.6,
which unlike previous releases, doesn't bail out on index metadata, but fails
to carry metadata over to the compacted database.

------------------------------------------------------------------------
r1218 | fabricecolin | 2008-03-26 11:05:37 +0800 (Wed, 26 Mar 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/QueryProperties.cpp
   M /trunk/IndexSearch/QueryProperties.h
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.hh
   M /trunk/UI/GTK2/src/queryDialog_glade.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.hh

Queries can now index only new results.

------------------------------------------------------------------------
r1217 | fabricecolin | 2008-03-24 16:08:36 +0800 (Mon, 24 Mar 2008) | 2 lines
Changed paths:
   A /trunk/IndexSearch/Plugins/UNData.src

A plugin for UNdata.

------------------------------------------------------------------------
r1216 | fabricecolin | 2008-03-24 16:07:50 +0800 (Mon, 24 Mar 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/PluginWebEngine.cpp

Ensure scroll-by parameters are not empty before appending them to the URL.

------------------------------------------------------------------------
r1215 | fabricecolin | 2008-03-24 15:19:54 +0800 (Mon, 24 Mar 2008) | 2 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/configure.in
   A /trunk/po/zh_CN.po

Simplified Chinese po by Ashlee Ma.

------------------------------------------------------------------------
r1214 | fabricecolin | 2008-03-24 14:42:58 +0800 (Mon, 24 Mar 2008) | 3 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/XapianIndex.cpp
   M /trunk/IndexSearch/Xapian/XapianIndex.h

Don't scan the document to index for its language if it's already known. As
things stand, it never is when indexDocument() is invoked.

------------------------------------------------------------------------
r1213 | fabricecolin | 2008-03-24 14:26:15 +0800 (Mon, 24 Mar 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.hh

In Preferences, patterns can be reset to default values.

------------------------------------------------------------------------
r1212 | fabricecolin | 2008-03-24 13:13:17 +0800 (Mon, 24 Mar 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Initialize the dbus-status metadata.

------------------------------------------------------------------------
r1211 | fabricecolin | 2008-03-22 00:18:50 +0800 (Sat, 22 Mar 2008) | 7 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.h
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/ServerThreads.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/UI/GTK2/src/statisticsDialog.cc

Pass parameters to the file_found signal by value, not reference.
DaemonState and mainWindow don't delete the monitor and handler objects when
destroyed because the Monitor thread might still be running.
Added flags for when the daemon receives Stop or Disconnected. This is saved
as database metadata, and shown by the Status window.
Some other minor mods.

------------------------------------------------------------------------
r1210 | fabricecolin | 2008-03-20 19:06:31 +0800 (Thu, 20 Mar 2008) | 3 lines
Changed paths:
   M /trunk/IndexSearch/DBusIndex.cpp
   M /trunk/IndexSearch/DBusIndex.h
   M /trunk/IndexSearch/IndexInterface.h
   M /trunk/IndexSearch/Xapian/XapianIndex.cpp
   M /trunk/IndexSearch/Xapian/XapianIndex.h
   M /trunk/IndexSearch/pinot-index.cpp

Replaced get|setVersion() with get|setMetadata().
In showinfo mode, pinot-index shows the index version string.

------------------------------------------------------------------------
r1209 | fabricecolin | 2008-03-17 09:58:43 +0800 (Mon, 17 Mar 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/XapianDatabase.cpp
   M /trunk/IndexSearch/Xapian/XapianEngine.cpp

Missing header, minor mod.

------------------------------------------------------------------------
r1208 | fabricecolin | 2008-03-15 21:16:04 +0800 (Sat, 15 Mar 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

Const'ified parameter to view_documents().

------------------------------------------------------------------------
r1207 | fabricecolin | 2008-03-15 21:15:02 +0800 (Sat, 15 Mar 2008) | 2 lines
Changed paths:
   M /trunk/Tokenize/FilterUtils.cpp

Cosmetic changes.

------------------------------------------------------------------------
r1206 | fabricecolin | 2008-03-15 21:14:22 +0800 (Sat, 15 Mar 2008) | 2 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/Monitor/linux-inotify-syscalls.h

A patch by Michael Biebl for m68k, mips, mipsel and hppa.

------------------------------------------------------------------------
r1205 | fabricecolin | 2008-03-15 21:12:46 +0800 (Sat, 15 Mar 2008) | 3 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/XapianIndex.cpp
   M /trunk/IndexSearch/Xapian/XapianIndex.h

Use the new CJKVTokenizer::TokensHandler class to tokenize CJKV. The spelling
database is populated.

------------------------------------------------------------------------
r1204 | fabricecolin | 2008-03-15 21:09:09 +0800 (Sat, 15 Mar 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/ResultsExporter.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp

Prefer snprintf() to sprintf().

------------------------------------------------------------------------
r1203 | fabricecolin | 2008-03-15 21:06:27 +0800 (Sat, 15 Mar 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/pinot-index.cpp

Close stuff at exit.

------------------------------------------------------------------------
r1202 | fabricecolin | 2008-03-08 17:18:12 +0800 (Sat, 08 Mar 2008) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

Be careful when applying source labels.
IndexingThread redefined m_docInfo needlessly.

------------------------------------------------------------------------
r1201 | fabricecolin | 2008-03-04 19:55:08 +0800 (Tue, 04 Mar 2008) | 3 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/XapianIndex.cpp

Prior to asking for a write lock, always request for a read/write database.
In practice, no harm is done since the database is open read/write at startup.

------------------------------------------------------------------------
r1200 | fabricecolin | 2008-03-03 19:45:01 +0800 (Mon, 03 Mar 2008) | 2 lines
Changed paths:
   M /trunk/README

Examples of what blacklisting does.

------------------------------------------------------------------------
r1198 | fabricecolin | 2008-02-28 19:02:07 +0800 (Thu, 28 Feb 2008) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/ChangeLog-dijon

Updated logs.

------------------------------------------------------------------------
r1197 | fabricecolin | 2008-02-28 18:58:50 +0800 (Thu, 28 Feb 2008) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_TW.po

NEWS describes changes made since 0.82. Updated TODO and synced po's.

------------------------------------------------------------------------
r1196 | fabricecolin | 2008-02-27 23:12:26 +0800 (Wed, 27 Feb 2008) | 2 lines
Changed paths:
   M /trunk/Collect/CurlDownloader.cpp
   M /trunk/IndexSearch/DBusIndex.cpp
   M /trunk/IndexSearch/PluginWebEngine.cpp
   M /trunk/IndexSearch/SherlockParser.cpp
   M /trunk/IndexSearch/Xapian/LanguageDetector.cpp
   M /trunk/IndexSearch/Xapian/XapianDatabase.cpp
   M /trunk/IndexSearch/Xapian/XapianIndex.cpp
   M /trunk/IndexSearch/pinot-label.cpp
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/QueryHistory.cpp
   M /trunk/SQL/ViewHistory.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/Utils/MIMEScanner.cpp

A patch by Adel Gadllah to compile with gcc 4.3.

------------------------------------------------------------------------
r1195 | fabricecolin | 2008-02-27 23:09:26 +0800 (Wed, 27 Feb 2008) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/ServerThreads.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

The scanner thread should run in the background because we don't want to stop
it after 5 minutes !
Threads that override stop() better call the base class method.

------------------------------------------------------------------------
r1194 | fabricecolin | 2008-02-26 22:17:42 +0800 (Tue, 26 Feb 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/pinot-index.1
   M /trunk/IndexSearch/pinot-label.1
   M /trunk/IndexSearch/pinot-search.1
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/configure.in

Increased version number.

------------------------------------------------------------------------
r1193 | fabricecolin | 2008-02-26 20:17:17 +0800 (Tue, 26 Feb 2008) | 4 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/README

Mention contributions of Yung-chung Lin (Dijon's CJKV tokenizer) and David
Paleino (.desktop files).
README describes to what extent CJKV is supported.

------------------------------------------------------------------------
r1192 | fabricecolin | 2008-02-25 23:54:15 +0800 (Mon, 25 Feb 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/XapianIndex.cpp
   M /trunk/IndexSearch/Xapian/XapianIndex.h

Mostly cosmetic changes.

------------------------------------------------------------------------
r1191 | fabricecolin | 2008-02-25 21:50:45 +0800 (Mon, 25 Feb 2008) | 3 lines
Changed paths:
   M /trunk
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_TW.po

Added IndexSearch/cjkv to externals list.
Updated translations, including latest es.po pulled from Rosetta.

------------------------------------------------------------------------
r1190 | fabricecolin | 2008-02-25 21:48:25 +0800 (Mon, 25 Feb 2008) | 4 lines
Changed paths:
   M /trunk/IndexSearch/Google/Makefile.am
   M /trunk/IndexSearch/Makefile.am
   M /trunk/IndexSearch/Xapian/Makefile.am

Build IndexSearch/cjkv/CJKVTokenizer, link libxapianbackend against MISC_LIBS.
Get soapcpp2 to look for includes in /usr/share/gsoap/import.
Link pinot-label with -rdynamic.

------------------------------------------------------------------------
r1189 | fabricecolin | 2008-02-25 19:30:55 +0800 (Mon, 25 Feb 2008) | 3 lines
Changed paths:
   M /trunk/pinot-dbus-daemon.desktop
   M /trunk/pinot.desktop

David Paleino points out that the Encoding key is deprecated. See
http://standards.freedesktop.org/desktop-entry-spec/latest/apc.html

------------------------------------------------------------------------
r1188 | fabricecolin | 2008-02-24 19:15:56 +0800 (Sun, 24 Feb 2008) | 7 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/XapianEngine.cpp
   M /trunk/IndexSearch/Xapian/XapianIndex.cpp
   M /trunk/IndexSearch/Xapian/XapianIndex.h

First shot at CJKV support. Documents that have CJKV are processed with Dijon's
CJKVTokenizer and indexed in a manner compatible with TermGenerator's. Queries
that are exclusively CJKV are pre-processed by CJKVTokenizer, then fed to the
QueryParser.
Changed XapianIndex::removePostingsFromDocument() to reuse the term generation
code of addPostingsToDocument().

------------------------------------------------------------------------
r1187 | fabricecolin | 2008-02-22 22:22:26 +0800 (Fri, 22 Feb 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Makefile.am
   A /trunk/IndexSearch/XesamLog.h

Provide XesamLog.h, required by the latest code in xesam/.

------------------------------------------------------------------------
r1186 | fabricecolin | 2008-02-22 21:43:26 +0800 (Fri, 22 Feb 2008) | 7 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/mainWindow.cc

Avoid rebuilding DocumentInfo objects, at least use the copy constructor to
avoid losing properties, for instance after importing a document into My Web
Pages.
The import dialog's OK button should alway be disabled if no URL is provided.
In ResultsTree, don't bother getting the extract in flat mode, ie when the tree
is embedded in an IndexPage.

------------------------------------------------------------------------
r1185 | fabricecolin | 2008-02-21 22:37:36 +0800 (Thu, 21 Feb 2008) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Option --fullscan doesn't need a parameter !
Added flv to default blacklist, removed far too frequent DEBUG message.

------------------------------------------------------------------------
r1184 | fabricecolin | 2008-02-21 22:36:02 +0800 (Thu, 21 Feb 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Plugins/Google.src

Fixed parsing.

------------------------------------------------------------------------
r1183 | fabricecolin | 2008-02-21 22:35:29 +0800 (Thu, 21 Feb 2008) | 4 lines
Changed paths:
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/CrawlHistory.h
   M /trunk/UI/GTK2/src/statisticsDialog.cc
   M /trunk/UI/GTK2/src/statisticsDialog.hh

Modified CrawlHistory to provide errors' dates.
statisticsDialog could previously miss errors starting with the second source
because it didn't keep track of the latest error date for each source.

------------------------------------------------------------------------
r1182 | fabricecolin | 2008-02-21 22:32:49 +0800 (Thu, 21 Feb 2008) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h

findResultsExtract() tries all engines the result belongs to until a proper
extract is found.

------------------------------------------------------------------------
r1181 | fabricecolin | 2008-02-20 22:40:56 +0800 (Wed, 20 Feb 2008) | 9 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/XapianEngine.cpp
   M /trunk/IndexSearch/pinot-search.1
   M /trunk/IndexSearch/pinot-search.cpp
   M /trunk/README

In XapianEngine, if the query matched a Z-prefixed term (ie a stem, because
stemming is enabled), find terms in each document that are potential unstems
and use those as seed terms to generate the abstract. This may throw false
positives as the matched stem isn't compared against those termss stemmed form.
The pinot-search program now has a "--stemming/-s" parameter to specify a
stemming language, in English not in the locale !
The README emphasizes that stemming is applied only if there is no exact match,
and that the directory filter is recursive.

------------------------------------------------------------------------
r1180 | fabricecolin | 2008-02-18 19:38:52 +0800 (Mon, 18 Feb 2008) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Set the locale according to the environment variables.
Don't be silly and don't attempt to catch SIGKILL :-)

------------------------------------------------------------------------
r1179 | fabricecolin | 2008-02-18 19:35:17 +0800 (Mon, 18 Feb 2008) | 4 lines
Changed paths:
   M /trunk/Tokenize/FilterUtils.cpp
   M /trunk/Tokenize/Makefile.am
   A /trunk/Tokenize/TextConverter.cpp
   A /trunk/Tokenize/TextConverter.h

In FilterUtils::populateDocument(), look out for a charset in the filter's
output, and convert both title and content to UTF-8 using the new TextConverter
class.

------------------------------------------------------------------------
r1178 | fabricecolin | 2008-02-18 19:17:58 +0800 (Mon, 18 Feb 2008) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

Make tabs reorderable. There's also no good reason why the notebook shouldn't
be scrollable...
ResultsTree expected a "Xapian" engine -not available since the move to
separate back-ends- and this broke the display of results extracts.

------------------------------------------------------------------------
r1177 | fabricecolin | 2008-02-17 13:53:55 +0800 (Sun, 17 Feb 2008) | 3 lines
Changed paths:
   M /trunk/Collect/Makefile.am
   M /trunk/IndexSearch/Google/Makefile.am
   M /trunk/IndexSearch/Makefile.am
   M /trunk/IndexSearch/Xapian/Makefile.am
   M /trunk/Makefile.am
   M /trunk/Monitor/Makefile.am
   M /trunk/SQL/Makefile.am
   M /trunk/UI/GTK2/src/Makefile.am

Build everything with fPIC ! Not doing that may cause nasty surprises.
In the top-level Makefile.am, only move libxapianbackend* not lib* !

------------------------------------------------------------------------
r1175 | fabricecolin | 2008-01-26 16:58:03 +0800 (Sat, 26 Jan 2008) | 3 lines
Changed paths:
   M /trunk
   M /trunk/ChangeLog
   M /trunk/ChangeLog-dijon

ChangeLogs are nice to have, they are up to date.
Set externals to point to Dijon's trunk.

------------------------------------------------------------------------
r1174 | fabricecolin | 2008-01-26 14:54:13 +0800 (Sat, 26 Jan 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/pinot-index.1
   M /trunk/IndexSearch/pinot-label.1
   M /trunk/IndexSearch/pinot-search.1
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_TW.po

Updated manual pages and translations.

------------------------------------------------------------------------
r1173 | fabricecolin | 2008-01-26 14:51:51 +0800 (Sat, 26 Jan 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/Makefile.am
   M /trunk/configure.in

Fixed building with support for the Google SOAP API.

------------------------------------------------------------------------
r1172 | fabricecolin | 2008-01-26 11:30:03 +0800 (Sat, 26 Jan 2008) | 2 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/NEWS
   M /trunk/README
   M /trunk/TODO
   M /trunk/configure.in

Preparing for 0.82 release.

------------------------------------------------------------------------
r1171 | fabricecolin | 2008-01-26 11:06:10 +0800 (Sat, 26 Jan 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp

Blacklist ".cap".

------------------------------------------------------------------------
r1170 | fabricecolin | 2008-01-26 10:54:32 +0800 (Sat, 26 Jan 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Disable spelling correction on in-results queries.

------------------------------------------------------------------------
r1169 | fabricecolin | 2008-01-26 10:49:13 +0800 (Sat, 26 Jan 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/ModuleFactory.cpp
   M /trunk/IndexSearch/Xapian/Makefile.am
   M /trunk/IndexSearch/pinot-index.cpp
   M /trunk/IndexSearch/pinot-search.cpp
   M /trunk/Makefile.am
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/pinot.spec.in

Prefer "backend(s)" to "module(s)".

------------------------------------------------------------------------
r1168 | fabricecolin | 2008-01-20 20:01:45 +0800 (Sun, 20 Jan 2008) | 5 lines
Changed paths:
   M /trunk/IndexSearch/DBusIndex.cpp
   M /trunk/IndexSearch/pinot-index.cpp
   M /trunk/IndexSearch/pinot-search.cpp
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml

HasDocument is now exported over D-Bus. As a result, pinot-label doesn't have
to open the index.
Added a -b/--backend option to pinot-index (defaults to "xapian").
Minor changes to pinot-search.

------------------------------------------------------------------------
r1167 | fabricecolin | 2008-01-19 22:48:48 +0800 (Sat, 19 Jan 2008) | 6 lines
Changed paths:
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/UI/GTK2/src/statisticsDialog.cc

Tried to remove dependency on engine/index type xapian. Now use whatever backend
is specified in the configuration file (defaults to xapian). This should make it
possible to use something else.
Make sure the stemming language is saved in English.
When merging queries, use the boolean operator "or" and not "|".

------------------------------------------------------------------------
r1166 | fabricecolin | 2008-01-19 17:27:47 +0800 (Sat, 19 Jan 2008) | 2 lines
Changed paths:
   D /trunk/IndexSearch/IndexFactory.cpp
   D /trunk/IndexSearch/IndexFactory.h
   M /trunk/IndexSearch/Makefile.am
   M /trunk/IndexSearch/ModuleFactory.cpp
   M /trunk/IndexSearch/ModuleFactory.h
   D /trunk/IndexSearch/SearchEngineFactory.cpp
   D /trunk/IndexSearch/SearchEngineFactory.h
   M /trunk/IndexSearch/Xapian/ModuleExports.cpp

Removed obsolete factory classes. Minor mods.

------------------------------------------------------------------------
r1165 | fabricecolin | 2008-01-19 17:24:39 +0800 (Sat, 19 Jan 2008) | 2 lines
Changed paths:
   M /trunk/IndexSearch/QueryProperties.cpp
   M /trunk/IndexSearch/QueryProperties.h

Removed getFilter() method.

------------------------------------------------------------------------
r1164 | fabricecolin | 2008-01-12 21:39:06 +0800 (Sat, 12 Jan 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/queryDialog.cc

New MIME class filter.

------------------------------------------------------------------------
r1163 | fabricecolin | 2008-01-12 21:33:34 +0800 (Sat, 12 Jan 2008) | 3 lines
Changed paths:
   M /trunk/IndexSearch/Makefile.am
   M /trunk/IndexSearch/Xapian/Makefile.am

Minimize the amount of stuff pinot-label links to.
Compile Xapian/ModuleExports.cpp not ModuleExports.cc.

------------------------------------------------------------------------
r1162 | fabricecolin | 2008-01-11 23:11:44 +0800 (Fri, 11 Jan 2008) | 2 lines
Changed paths:
   M /trunk/po/sv.po

Update from Zirro, pulled out of Rosetta.

------------------------------------------------------------------------
r1161 | fabricecolin | 2008-01-11 22:54:47 +0800 (Fri, 11 Jan 2008) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp

Better keep using 'language' as the language filter (ie "lang:" and not
"language:" as previous versions incorrectly assumed) and save the new stemming
language property to 'stemlanguage'.

------------------------------------------------------------------------
r1160 | fabricecolin | 2008-01-11 22:52:20 +0800 (Fri, 11 Jan 2008) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

When looking for a finished thread after being signaled, stop those that have
been running for more than 5 minutes.

------------------------------------------------------------------------
r1159 | fabricecolin | 2008-01-11 22:48:24 +0800 (Fri, 11 Jan 2008) | 3 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/XapianEngine.cpp
   M /trunk/IndexSearch/Xapian/XapianIndex.cpp
   M /trunk/IndexSearch/Xapian/XapianIndex.h

New XCLASS:-prefixed term for MIME type classes, eg audio, application...
When removing a term, remove the spelling too if spelling is enabled.

------------------------------------------------------------------------
r1158 | fabricecolin | 2008-01-06 14:42:36 +0800 (Sun, 06 Jan 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Updated about box message.

------------------------------------------------------------------------
r1157 | fabricecolin | 2008-01-05 13:30:11 +0800 (Sat, 05 Jan 2008) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/queryDialog.hh

Changes to queryDialog.

------------------------------------------------------------------------
r1156 | fabricecolin | 2008-01-05 12:52:37 +0800 (Sat, 05 Jan 2008) | 2 lines
Changed paths:
   A /trunk/IndexSearch/Xapian/ModuleExports.cpp

This should have been checked in some time ago.

------------------------------------------------------------------------
r1155 | fabricecolin | 2008-01-01 12:28:20 +0800 (Tue, 01 Jan 2008) | 3 lines
Changed paths:
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_TW.po

Synced po files with the latest from Rosetta. Updates from JW (nl) and Jesus
Tramullas (es).

------------------------------------------------------------------------
r1154 | fabricecolin | 2008-01-01 09:21:51 +0800 (Tue, 01 Jan 2008) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.hh

Load and save stored queries' stemming language attribute, make it configurable
in queryDialog.
EngineQueryThread uses it as the results' language if no lang filter is set.

------------------------------------------------------------------------
r1153 | fabricecolin | 2008-01-01 09:16:53 +0800 (Tue, 01 Jan 2008) | 4 lines
Changed paths:
   M /trunk/IndexSearch/QueryProperties.cpp
   M /trunk/IndexSearch/QueryProperties.h

The language to stem queries with is separate from the lang filter, because
- language detection is not 100% accurate
- a document in language X may have words in language Y

------------------------------------------------------------------------
r1152 | fabricecolin | 2007-12-31 06:16:37 +0800 (Mon, 31 Dec 2007) | 7 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/AbstractGenerator.cpp
   M /trunk/IndexSearch/Xapian/XapianEngine.cpp

Fixed query stemming. We should have used STEM_SOME at least since moving to
Xapian 1.0.
Ignore spelling suggestions if the query returned results.
Ignore prefixed terms when seeding the abstracts generator. The latter doesn't
mind if there are no seed terms.
Ignore stems in query expansion.

------------------------------------------------------------------------
r1151 | fabricecolin | 2007-12-23 01:23:20 +0800 (Sun, 23 Dec 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/statisticsDialog.cc
   M /trunk/UI/GTK2/src/statisticsDialog.hh

Save and load queries' modified flag.
The status window now shows which engines are available. Some other minor mod.

------------------------------------------------------------------------
r1150 | fabricecolin | 2007-12-23 01:21:14 +0800 (Sun, 23 Dec 2007) | 2 lines
Changed paths:
   M /trunk/IndexSearch/ModuleFactory.cpp

Disable sherlock if HAVE_BOOST_SPIRIT is not defined.

------------------------------------------------------------------------
r1149 | fabricecolin | 2007-12-19 20:49:27 +0800 (Wed, 19 Dec 2007) | 4 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/IndexSearch/SherlockParser.cpp

The user input item, if not all lower case, wasn't removed from the input items
list and would thus appear twice in the URL.
This issue was reported by Claudio Bustos Navarrete.

------------------------------------------------------------------------
r1148 | fabricecolin | 2007-12-19 20:46:37 +0800 (Wed, 19 Dec 2007) | 2 lines
Changed paths:
   M /trunk/README
   M /trunk/TODO
   M /trunk/pinot.spec.in

Gtkmm 2.10 is needed. Updated TODO list. Spec file installs new Xapian module.

------------------------------------------------------------------------
r1147 | fabricecolin | 2007-12-19 20:41:48 +0800 (Wed, 19 Dec 2007) | 2 lines
Changed paths:
   D /trunk/IndexSearch/Plugins/WiseNut.src

Removing WiseNut plugin.

------------------------------------------------------------------------
r1146 | fabricecolin | 2007-12-19 20:39:39 +0800 (Wed, 19 Dec 2007) | 6 lines
Changed paths:
   M /trunk/IndexSearch/pinot-index.cpp
   M /trunk/IndexSearch/pinot-label.cpp
   M /trunk/IndexSearch/pinot-search.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/UI/GTK2/src/prefsDialog.cc

Rely on ModuleFactory instead of other other factories, load modules.
pinot-label uses a pure DBusIndex object, pinot-search sets proxy options only
if the engine is a WebEngine.
Added .a .la .o .so and backup files to blacklist in PinotSettings.
Don't aapply spelling correction to More Like and previously corrected queries.

------------------------------------------------------------------------
r1145 | fabricecolin | 2007-12-19 20:31:34 +0800 (Wed, 19 Dec 2007) | 6 lines
Changed paths:
   M /trunk/Collect/Makefile.am
   M /trunk/IndexSearch/Google/Makefile.am
   M /trunk/IndexSearch/Makefile.am
   M /trunk/IndexSearch/Xapian/Makefile.am
   M /trunk/Makefile.am
   M /trunk/Tokenize/Makefile.am
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/Utils/Makefile.am
   M /trunk/configure.in

Build IndexSearch/Xapian as a dynamic library, link programs with -rdynamic.
The libUtils library has only got classes with static data, the rest goes into
libBasicUtils.
Only link to necessary libraries, eg only the mbox filter needs to link against
GMime.

------------------------------------------------------------------------
r1144 | fabricecolin | 2007-12-19 20:26:57 +0800 (Wed, 19 Dec 2007) | 3 lines
Changed paths:
   A /trunk/IndexSearch/ModuleFactory.cpp
   A /trunk/IndexSearch/ModuleFactory.h

A class to eventuall replace Index and SearchEngine factories that can be
extended through dynamically-loaded modules.

------------------------------------------------------------------------
r1143 | fabricecolin | 2007-12-19 20:21:09 +0800 (Wed, 19 Dec 2007) | 3 lines
Changed paths:
   M /trunk/IndexSearch/QueryProperties.cpp
   M /trunk/IndexSearch/QueryProperties.h
   M /trunk/IndexSearch/SearchEngineInterface.cpp
   M /trunk/IndexSearch/SearchEngineInterface.h
   M /trunk/IndexSearch/WebEngine.h

Method getDownloader() is now specific to WebEngine.
QueryProperties has a modified flag to record automatic alterations.

------------------------------------------------------------------------
r1142 | fabricecolin | 2007-12-19 20:19:00 +0800 (Wed, 19 Dec 2007) | 2 lines
Changed paths:
   M /trunk/IndexSearch/DBusIndex.cpp
   M /trunk/IndexSearch/DBusIndex.h

DBus-enabled overloads are used automatically if there's no nested Index.

------------------------------------------------------------------------
r1141 | fabricecolin | 2007-12-19 20:15:54 +0800 (Wed, 19 Dec 2007) | 2 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/Monitor/INotifyMonitor.h

Remember whether inotify_add_watch() failed with ENOSPC.

------------------------------------------------------------------------
r1140 | fabricecolin | 2007-12-11 23:34:47 +0800 (Tue, 11 Dec 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/queryDialog.cc

Removed unused include.

------------------------------------------------------------------------
r1139 | fabricecolin | 2007-12-03 23:48:26 +0800 (Mon, 03 Dec 2007) | 3 lines
Changed paths:
   M /trunk/IndexSearch/Xapian/XapianEngine.h
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/propertiesDialog.cc

Removed superfluous includes, replaced instances of XapianIndex with an object
obtained from PinotSettings::getIndex().

------------------------------------------------------------------------
r1138 | fabricecolin | 2007-12-01 22:52:21 +0800 (Sat, 01 Dec 2007) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

Now requires gtkmm24 >= 2.10.

------------------------------------------------------------------------
r1137 | fabricecolin | 2007-12-01 18:05:14 +0800 (Sat, 01 Dec 2007) | 2 lines
Changed paths:
   D /trunk/Index
   D /trunk/Search

Obsolete.

------------------------------------------------------------------------
r1136 | fabricecolin | 2007-12-01 17:50:05 +0800 (Sat, 01 Dec 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc

Get headers and libraries from IndexSearch.
Obtain indexes from PinotSettings. Use new DBusIndex class.

------------------------------------------------------------------------
r1135 | fabricecolin | 2007-12-01 17:39:35 +0800 (Sat, 01 Dec 2007) | 3 lines
Changed paths:
   M /trunk/IndexSearch/Google/Makefile.am
   A /trunk/IndexSearch/Makefile.am
   A /trunk/IndexSearch/Xapian/Makefile.am
   M /trunk/Makefile.am
   M /trunk/configure.in

Build and distribute contents of IndexSearch.
Configure now checks for gtkmm >= 2.10.

------------------------------------------------------------------------
r1134 | fabricecolin | 2007-12-01 17:36:25 +0800 (Sat, 01 Dec 2007) | 3 lines
Changed paths:
   A /trunk/IndexSearch/DBusIndex.cpp
   A /trunk/IndexSearch/DBusIndex.h
   D /trunk/IndexSearch/DBusXapianIndex.cpp
   D /trunk/IndexSearch/DBusXapianIndex.h
   M /trunk/IndexSearch/IndexFactory.cpp
   M /trunk/IndexSearch/IndexInterface.h
   M /trunk/IndexSearch/Xapian/XapianEngine.cpp
   M /trunk/IndexSearch/Xapian/XapianIndex.cpp
   M /trunk/IndexSearch/Xapian/XapianIndex.h
   M /trunk/IndexSearch/pinot-label.cpp

Added IndexInterface::reopen(). Replaced DBusXapianIndex with DBusIndex.
Used IndexFactory whenever possible.

------------------------------------------------------------------------
r1133 | fabricecolin | 2007-12-01 17:25:54 +0800 (Sat, 01 Dec 2007) | 3 lines
Changed paths:
   D /trunk/Index/DBusXapianIndex.cpp
   D /trunk/Index/DBusXapianIndex.h
   D /trunk/Index/FilterWrapper.cpp
   D /trunk/Index/FilterWrapper.h
   D /trunk/Index/IndexFactory.cpp
   D /trunk/Index/IndexFactory.h
   D /trunk/Index/IndexInterface.h
   D /trunk/Index/LanguageDetector.cpp
   D /trunk/Index/LanguageDetector.h
   D /trunk/Index/XapianDatabase.cpp
   D /trunk/Index/XapianDatabase.h
   D /trunk/Index/XapianDatabaseFactory.cpp
   D /trunk/Index/XapianDatabaseFactory.h
   D /trunk/Index/XapianIndex.cpp
   D /trunk/Index/XapianIndex.h
   D /trunk/Index/pinot-index.1
   D /trunk/Index/pinot-index.cpp
   D /trunk/Index/pinot-label.1
   D /trunk/Index/pinot-label.cpp
   A /trunk/IndexSearch
   A /trunk/IndexSearch/DBusXapianIndex.cpp (from /trunk/Index/DBusXapianIndex.cpp:1132)
   A /trunk/IndexSearch/DBusXapianIndex.h (from /trunk/Index/DBusXapianIndex.h:1132)
   A /trunk/IndexSearch/FilterWrapper.cpp (from /trunk/Index/FilterWrapper.cpp:1132)
   A /trunk/IndexSearch/FilterWrapper.h (from /trunk/Index/FilterWrapper.h:1132)
   A /trunk/IndexSearch/Google (from /trunk/Search/Google:1132)
   A /trunk/IndexSearch/IndexFactory.cpp (from /trunk/Index/IndexFactory.cpp:1132)
   A /trunk/IndexSearch/IndexFactory.h (from /trunk/Index/IndexFactory.h:1132)
   A /trunk/IndexSearch/IndexInterface.h (from /trunk/Index/IndexInterface.h:1132)
   A /trunk/IndexSearch/OpenSearchParser.cpp (from /trunk/Search/OpenSearchParser.cpp:1132)
   A /trunk/IndexSearch/OpenSearchParser.h (from /trunk/Search/OpenSearchParser.h:1132)
   A /trunk/IndexSearch/PluginParsers.h (from /trunk/Search/PluginParsers.h:1132)
   A /trunk/IndexSearch/PluginWebEngine.cpp (from /trunk/Search/PluginWebEngine.cpp:1132)
   A /trunk/IndexSearch/PluginWebEngine.h (from /trunk/Search/PluginWebEngine.h:1132)
   A /trunk/IndexSearch/Plugins (from /trunk/Search/Plugins:1132)
   A /trunk/IndexSearch/QueryProperties.cpp (from /trunk/Search/QueryProperties.cpp:1132)
   A /trunk/IndexSearch/QueryProperties.h (from /trunk/Search/QueryProperties.h:1132)
   A /trunk/IndexSearch/ResultsExporter.cpp (from /trunk/Search/ResultsExporter.cpp:1132)
   A /trunk/IndexSearch/ResultsExporter.h (from /trunk/Search/ResultsExporter.h:1132)
   A /trunk/IndexSearch/SOAPEnv.h (from /trunk/Search/SOAPEnv.h:1132)
   A /trunk/IndexSearch/SOAPEnvH.h (from /trunk/Search/SOAPEnvH.h:1132)
   A /trunk/IndexSearch/SOAPEnvNS.cpp (from /trunk/Search/SOAPEnvNS.cpp:1132)
   A /trunk/IndexSearch/SOAPEnvStub.h (from /trunk/Search/SOAPEnvStub.h:1132)
   A /trunk/IndexSearch/SearchEngineFactory.cpp (from /trunk/Search/SearchEngineFactory.cpp:1132)
   A /trunk/IndexSearch/SearchEngineFactory.h (from /trunk/Search/SearchEngineFactory.h:1132)
   A /trunk/IndexSearch/SearchEngineInterface.cpp (from /trunk/Search/SearchEngineInterface.cpp:1132)
   A /trunk/IndexSearch/SearchEngineInterface.h (from /trunk/Search/SearchEngineInterface.h:1132)
   A /trunk/IndexSearch/SearchPluginProperties.cpp (from /trunk/Search/SearchPluginProperties.cpp:1132)
   A /trunk/IndexSearch/SearchPluginProperties.h (from /trunk/Search/SearchPluginProperties.h:1132)
   A /trunk/IndexSearch/SherlockParser.cpp (from /trunk/Search/SherlockParser.cpp:1132)
   A /trunk/IndexSearch/SherlockParser.h (from /trunk/Search/SherlockParser.h:1132)
   A /trunk/IndexSearch/WebEngine.cpp (from /trunk/Search/WebEngine.cpp:1132)
   A /trunk/IndexSearch/WebEngine.h (from /trunk/Search/WebEngine.h:1132)
   A /trunk/IndexSearch/Xapian
   A /trunk/IndexSearch/Xapian/AbstractGenerator.cpp (from /trunk/Search/AbstractGenerator.cpp:1132)
   A /trunk/IndexSearch/Xapian/AbstractGenerator.h (from /trunk/Search/AbstractGenerator.h:1132)
   A /trunk/IndexSearch/Xapian/LanguageDetector.cpp (from /trunk/Index/LanguageDetector.cpp:1132)
   A /trunk/IndexSearch/Xapian/LanguageDetector.h (from /trunk/Index/LanguageDetector.h:1132)
   A /trunk/IndexSearch/Xapian/XapianDatabase.cpp (from /trunk/Index/XapianDatabase.cpp:1132)
   A /trunk/IndexSearch/Xapian/XapianDatabase.h (from /trunk/Index/XapianDatabase.h:1132)
   A /trunk/IndexSearch/Xapian/XapianDatabaseFactory.cpp (from /trunk/Index/XapianDatabaseFactory.cpp:1132)
   A /trunk/IndexSearch/Xapian/XapianDatabaseFactory.h (from /trunk/Index/XapianDatabaseFactory.h:1132)
   A /trunk/IndexSearch/Xapian/XapianEngine.cpp (from /trunk/Search/XapianEngine.cpp:1132)
   A /trunk/IndexSearch/Xapian/XapianEngine.h (from /trunk/Search/XapianEngine.h:1132)
   A /trunk/IndexSearch/Xapian/XapianIndex.cpp (from /trunk/Index/XapianIndex.cpp:1132)
   A /trunk/IndexSearch/Xapian/XapianIndex.h (from /trunk/Index/XapianIndex.h:1132)
   A /trunk/IndexSearch/pinot-index.1 (from /trunk/Index/pinot-index.1:1132)
   A /trunk/IndexSearch/pinot-index.cpp (from /trunk/Index/pinot-index.cpp:1132)
   A /trunk/IndexSearch/pinot-label.1 (from /trunk/Index/pinot-label.1:1132)
   A /trunk/IndexSearch/pinot-label.cpp (from /trunk/Index/pinot-label.cpp:1132)
   A /trunk/IndexSearch/pinot-search.1 (from /trunk/Search/pinot-search.1:1132)
   A /trunk/IndexSearch/pinot-search.cpp (from /trunk/Search/pinot-search.cpp:1132)
   D /trunk/Search/AbstractGenerator.cpp
   D /trunk/Search/AbstractGenerator.h
   D /trunk/Search/Google
   D /trunk/Search/OpenSearchParser.cpp
   D /trunk/Search/OpenSearchParser.h
   D /trunk/Search/PluginParsers.h
   D /trunk/Search/PluginWebEngine.cpp
   D /trunk/Search/PluginWebEngine.h
   D /trunk/Search/Plugins
   D /trunk/Search/QueryProperties.cpp
   D /trunk/Search/QueryProperties.h
   D /trunk/Search/ResultsExporter.cpp
   D /trunk/Search/ResultsExporter.h
   D /trunk/Search/SOAPEnv.h
   D /trunk/Search/SOAPEnvH.h
   D /trunk/Search/SOAPEnvNS.cpp
   D /trunk/Search/SOAPEnvStub.h
   D /trunk/Search/SearchEngineFactory.cpp
   D /trunk/Search/SearchEngineFactory.h
   D /trunk/Search/SearchEngineInterface.cpp
   D /trunk/Search/SearchEngineInterface.h
   D /trunk/Search/SearchPluginProperties.cpp
   D /trunk/Search/SearchPluginProperties.h
   D /trunk/Search/SherlockParser.cpp
   D /trunk/Search/SherlockParser.h
   D /trunk/Search/WebEngine.cpp
   D /trunk/Search/WebEngine.h
   D /trunk/Search/XapianEngine.cpp
   D /trunk/Search/XapianEngine.h
   D /trunk/Search/pinot-search.1
   D /trunk/Search/pinot-search.cpp

Moved index and search code under IndexSearch, with anything depending on
Xapian in IndexSearch/Xapian.

------------------------------------------------------------------------
r1132 | fabricecolin | 2007-11-30 23:20:18 +0800 (Fri, 30 Nov 2007) | 2 lines
Changed paths:
   M /trunk/Utils/Languages.cpp
   M /trunk/Utils/Languages.h

Const'ified some variables.

------------------------------------------------------------------------
r1131 | fabricecolin | 2007-11-30 23:19:28 +0800 (Fri, 30 Nov 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/pinot.cc

Tell the user that the index needs updating with a MessageDialog and keep
pestering him until he clicks the "Don't warn me again" checkbox.
Be nice and give a title of all MessageDialog's.

------------------------------------------------------------------------
r1130 | fabricecolin | 2007-11-30 23:09:34 +0800 (Fri, 30 Nov 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

If the filter takes DOCUMENT_URI input, that means all non local schemes, not
just http.
Removed unused header.

------------------------------------------------------------------------
r1129 | fabricecolin | 2007-11-29 21:16:41 +0800 (Thu, 29 Nov 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/importDialog_glade.cc
   M /trunk/UI/GTK2/src/importDialog_glade.hh
   M /trunk/UI/GTK2/src/mainWindow.cc

Defer importing to the main window.
When viewing any document, add it to the list of recently used files. This
requires gtkmm >= 2.10.

------------------------------------------------------------------------
r1128 | fabricecolin | 2007-11-29 20:53:58 +0800 (Thu, 29 Nov 2007) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

Add ValueRangeProcessor's early so that it benefits XapianQueryBuilder.

------------------------------------------------------------------------
r1126 | fabricecolin | 2007-11-24 23:24:23 +0800 (Sat, 24 Nov 2007) | 2 lines
Changed paths:
   A /trunk/mkinstalldirs

Replaced symlink with actual file.

------------------------------------------------------------------------
r1125 | fabricecolin | 2007-11-24 23:23:42 +0800 (Sat, 24 Nov 2007) | 2 lines
Changed paths:
   D /trunk/mkinstalldirs

Removed symbolic link.

------------------------------------------------------------------------
r1124 | fabricecolin | 2007-11-23 23:39:37 +0800 (Fri, 23 Nov 2007) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/Freshmeat.src

Corrected extraction. It still doesn't cope well when there's just one match.

------------------------------------------------------------------------
r1123 | fabricecolin | 2007-11-23 23:36:49 +0800 (Fri, 23 Nov 2007) | 2 lines
Changed paths:
   M /trunk/Index/pinot-index.1
   M /trunk/Index/pinot-label.1
   M /trunk/NEWS
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/configure.in
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_TW.po

Preparing for 0.81 release.

------------------------------------------------------------------------
r1122 | fabricecolin | 2007-11-23 21:43:29 +0800 (Fri, 23 Nov 2007) | 2 lines
Changed paths:
   M /trunk/TODO

Current TODO list.

------------------------------------------------------------------------
r1121 | fabricecolin | 2007-11-23 21:42:51 +0800 (Fri, 23 Nov 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp

If sysctlbyname() is used, restart crawling when on AC.

------------------------------------------------------------------------
r1120 | fabricecolin | 2007-11-22 19:36:47 +0800 (Thu, 22 Nov 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml

Advertise that org.freedesktop.DBus.Introspectable.Introspect is supported.

------------------------------------------------------------------------
r1119 | fabricecolin | 2007-11-22 19:35:50 +0800 (Thu, 22 Nov 2007) | 2 lines
Changed paths:
   M /trunk/Makefile.am

look for data files to install in srcdir.

------------------------------------------------------------------------
r1118 | fabricecolin | 2007-11-22 19:29:14 +0800 (Thu, 22 Nov 2007) | 6 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Locations to crawl are queued and only popped from the queue if the crawler
wasn't stopped. This allows restarting crawling more or less where it stopped
when the system went on battery.
The battery state is queried at startup (through D-Bus) and crawling is
restarted when the system goes on AC.

------------------------------------------------------------------------
r1117 | fabricecolin | 2007-11-22 19:20:31 +0800 (Thu, 22 Nov 2007) | 3 lines
Changed paths:
   M /trunk/Search/Makefile.am
   M /trunk/Search/XapianEngine.cpp

XesamULParser depends on boost Spirit and should be built conditionally, just
like SherlockParser. This was reported by Reuben Thomas.

------------------------------------------------------------------------
r1116 | fabricecolin | 2007-11-22 19:17:36 +0800 (Thu, 22 Nov 2007) | 3 lines
Changed paths:
   M /trunk/configure.in

The function statfs(2) may be in sys/vfs.h, sys/statfs.h or sys/mount.h so check
for those, as well as sys/statvfs.h and sysctlbyname(3).

------------------------------------------------------------------------
r1115 | fabricecolin | 2007-11-21 22:44:20 +0800 (Wed, 21 Nov 2007) | 7 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Prox files can't be monitored with inotify so I am changing tactics. Now the
daemon listens for the battery state change signal sent on the message bus by
org.freedesktop.PowerManagement (as defined in the spec v0.1 and v0.2) as well
as the one from org.gnome.PowerManager (for older Gnome installations).
On FreeBSD, we query the sysctl hw.acpi.acline at the same time as the disk
usage check. I am not sure yet how useful it is, so this may be removed.

------------------------------------------------------------------------
r1114 | fabricecolin | 2007-11-17 15:50:51 +0800 (Sat, 17 Nov 2007) | 2 lines
Changed paths:
   M /trunk/scripts/python/pinot-module.py

Use get_category() to specify the category, it's cleaner.

------------------------------------------------------------------------
r1113 | fabricecolin | 2007-11-17 13:19:45 +0800 (Sat, 17 Nov 2007) | 2 lines
Changed paths:
   M /trunk/pinot-dbus-daemon.desktop

Fixed comment : the daemon doesn't allow searching anything but My Documents.

------------------------------------------------------------------------
r1112 | fabricecolin | 2007-11-15 20:51:08 +0800 (Thu, 15 Nov 2007) | 2 lines
Changed paths:
   M /trunk/README

Document Search This For, the new environment variables and Deskbar plugins.

------------------------------------------------------------------------
r1111 | fabricecolin | 2007-11-15 20:49:30 +0800 (Thu, 15 Nov 2007) | 3 lines
Changed paths:
   M /trunk/Utils/MIMEScanner.cpp

Work around broken shared-mime-info rules that identify all HTML files as
Mozilla bookmarks.

------------------------------------------------------------------------
r1110 | fabricecolin | 2007-11-15 20:47:14 +0800 (Thu, 15 Nov 2007) | 3 lines
Changed paths:
   M /trunk/pinot.spec.in

Put pinot-deskbar back in, as in the Fedora spec. This will simplify things
for Fedora users.

------------------------------------------------------------------------
r1109 | fabricecolin | 2007-11-15 19:08:50 +0800 (Thu, 15 Nov 2007) | 4 lines
Changed paths:
   M /trunk/scripts/python/pinot-module.py

The initialize() method connects to D-Bus.
GetStatistics() is called on the interface object.
Matches category is "documents".

------------------------------------------------------------------------
r1108 | fabricecolin | 2007-11-14 22:25:39 +0800 (Wed, 14 Nov 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp

Fix for previous check-in.

------------------------------------------------------------------------
r1107 | fabricecolin | 2007-11-14 21:52:25 +0800 (Wed, 14 Nov 2007) | 2 lines
Changed paths:
   A /trunk/ChangeLog-dijon

This file is required by make dist. Up to date as of Pinot v0.80.

------------------------------------------------------------------------
r1106 | fabricecolin | 2007-11-14 21:48:52 +0800 (Wed, 14 Nov 2007) | 2 lines
Changed paths:
   M /trunk/scripts/python/pinot-module.py

Undefined variable fix.

------------------------------------------------------------------------
r1105 | fabricecolin | 2007-11-14 21:47:42 +0800 (Wed, 14 Nov 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp

When inserting items in the history database, check whether they exist first.

------------------------------------------------------------------------
r1104 | fabricecolin | 2007-11-13 23:36:22 +0800 (Tue, 13 Nov 2007) | 3 lines
Changed paths:
   M /trunk/Index/XapianDatabase.cpp
   M /trunk/Index/XapianDatabase.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

When opened, XapianDatabase checks whether the env var PINOT_SPELLING_DB is set
to NO. If it is, spelling support is disabled.

------------------------------------------------------------------------
r1103 | fabricecolin | 2007-11-13 23:18:37 +0800 (Tue, 13 Nov 2007) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/pinot.spec.in

Distribute and install pinot-module.py.

------------------------------------------------------------------------
r1102 | fabricecolin | 2007-11-13 23:17:13 +0800 (Tue, 13 Nov 2007) | 2 lines
Changed paths:
   A /trunk/scripts/python/pinot-module.py

First shot at a plugin for Deskbar 2.20.

------------------------------------------------------------------------
r1101 | fabricecolin | 2007-11-13 19:37:46 +0800 (Tue, 13 Nov 2007) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

This should have been included in revision 1098.

------------------------------------------------------------------------
r1100 | fabricecolin | 2007-11-13 19:32:58 +0800 (Tue, 13 Nov 2007) | 3 lines
Changed paths:
   M /trunk/Index/XapianDatabase.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp

PINOT_MINIMUM_DISK_SPACE defaults to 50Mb.
Cosmetic changes.

------------------------------------------------------------------------
r1099 | fabricecolin | 2007-11-12 20:32:47 +0800 (Mon, 12 Nov 2007) | 7 lines
Changed paths:
   M /trunk/Monitor/MonitorHandler.cpp
   M /trunk/Monitor/MonitorHandler.h
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/mainWindow.cc

MonitorHandler's methods have a default, empty implementation.
DaemonState monitors the battery state file found under /proc/acpi/ac_adapter
and stops crawling when the system goes on battery. Indexing is not affected,
ie files reported by the crawler before it stops or the file monitor will be
indexed as per normal.
The ReloadHandler in mainWindow needs less hand-holding.

------------------------------------------------------------------------
r1098 | fabricecolin | 2007-11-11 15:03:00 +0800 (Sun, 11 Nov 2007) | 2 lines
Changed paths:
   M /trunk/Collect/Makefile.am
   M /trunk/Index/Makefile.am
   M /trunk/Makefile.am
   M /trunk/Monitor/Makefile.am
   M /trunk/SQL/Makefile.am
   M /trunk/Search/Google/Makefile.am
   M /trunk/Search/Makefile.am
   M /trunk/Tokenize/FilterUtils.cpp
   M /trunk/Tokenize/FilterUtils.h
   M /trunk/Tokenize/Makefile.am
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/Utils/Makefile.am

Patches from Gabriel C to build from any directory.

------------------------------------------------------------------------
r1097 | fabricecolin | 2007-11-08 14:25:25 +0800 (Thu, 08 Nov 2007) | 2 lines
Changed paths:
   M /trunk/configure.in

Check for stavfs(2) and statfs(2).

------------------------------------------------------------------------
r1096 | fabricecolin | 2007-11-08 14:21:35 +0800 (Thu, 08 Nov 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp

FileFoundSignal is on OnDiskHandler now.

------------------------------------------------------------------------
r1095 | fabricecolin | 2007-11-08 14:15:34 +0800 (Thu, 08 Nov 2007) | 6 lines
Changed paths:
   M /trunk/Monitor/MonitorHandler.h
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc

MonitorHandler has a directoryCreated() method. In practice, this means that
MonitorThread doesn't shortcut the handler when a directory is created, and
that OnDiskHandler can fire the "file found" signal on its own. This also
unifies indexing between monitoring and crawling, and should ensure no indexing
takes place when the new stop indexing flag is up.

------------------------------------------------------------------------
r1094 | fabricecolin | 2007-11-08 10:46:33 +0800 (Thu, 08 Nov 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

Stop indexing if the disk on which the daemon index resides is running out of
space. This is not directly configurable but the default value (10 Mb) can be
overriden by setting the environment variable PINOT_MINIMUM_DISK_SPACE.

------------------------------------------------------------------------
r1093 | fabricecolin | 2007-11-06 22:13:25 +0800 (Tue, 06 Nov 2007) | 3 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/po/pt.po
   M /trunk/po/sv.po

Mention Andreas Wagner's contribution.
Updated Portuguese and Swedish translations by Tiago Silva and Daniel Nylander.

------------------------------------------------------------------------
r1092 | fabricecolin | 2007-11-06 22:08:57 +0800 (Tue, 06 Nov 2007) | 2 lines
Changed paths:
   M /trunk/FAQ

There already was an entry about stale locks... Updated it.

------------------------------------------------------------------------
r1091 | fabricecolin | 2007-11-05 19:32:28 +0800 (Mon, 05 Nov 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/propertiesDialog.cc

Don't show "unknown" if the number of terms is 0.
Removed unused variable in mainWindow.cc.

------------------------------------------------------------------------
r1090 | fabricecolin | 2007-11-05 19:28:06 +0800 (Mon, 05 Nov 2007) | 2 lines
Changed paths:
   M /trunk/Index/pinot-label.cpp

Don't loop forever if the file was not indexed !

------------------------------------------------------------------------
r1089 | fabricecolin | 2007-11-05 19:20:01 +0800 (Mon, 05 Nov 2007) | 3 lines
Changed paths:
   M /trunk/Utils/Url.cpp

Don't look for parameters in file URLs, that truncates file names that have
a question mark.

------------------------------------------------------------------------
r1088 | fabricecolin | 2007-11-04 18:14:46 +0800 (Sun, 04 Nov 2007) | 2 lines
Changed paths:
   M /trunk/FAQ

Added entries about stale lock files and flushing.

------------------------------------------------------------------------
r1087 | fabricecolin | 2007-11-04 18:09:37 +0800 (Sun, 04 Nov 2007) | 2 lines
Changed paths:
   M /trunk/pinot-dbus-daemon.desktop
   M /trunk/pinot.desktop

Icon is not an absolute path and therefore shouldn't have an extension.

------------------------------------------------------------------------
r1086 | fabricecolin | 2007-11-04 12:45:02 +0800 (Sun, 04 Nov 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/EnginesTree.h
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/IndexPage.h
   M /trunk/UI/GTK2/src/Notebook.cpp
   M /trunk/UI/GTK2/src/Notebook.h
   M /trunk/UI/GTK2/src/PinotUtils.cpp
   M /trunk/UI/GTK2/src/PinotUtils.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/ServerThreads.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/importDialog_glade.cc
   M /trunk/UI/GTK2/src/indexDialog_glade.cc
   M /trunk/UI/GTK2/src/launcherDialog.cc
   M /trunk/UI/GTK2/src/launcherDialog_glade.cc
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/propertiesDialog_glade.cc
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.cc
   M /trunk/UI/GTK2/src/statisticsDialog.cc
   M /trunk/UI/GTK2/src/statisticsDialog.hh
   M /trunk/UI/GTK2/src/statisticsDialog_glade.cc

Replaced deprecated SigC calls. New versions of libsigc++ don't provide a
compatibility.h header.

------------------------------------------------------------------------
r1085 | fabricecolin | 2007-11-02 23:43:08 +0800 (Fri, 02 Nov 2007) | 2 lines
Changed paths:
   M /trunk/FAQ

Added item about KDE 3 and Autostart.

------------------------------------------------------------------------
r1083 | fabricecolin | 2007-11-01 19:02:46 +0800 (Thu, 01 Nov 2007) | 3 lines
Changed paths:
   M /trunk/Index/pinot-index.1
   M /trunk/Index/pinot-label.1
   M /trunk/NEWS
   M /trunk/README
   M /trunk/Search/pinot-search.1
   M /trunk/TODO
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/configure.in
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_TW.po

Updated for 0.80 release.
Clarified parts about document formats and external programs in the README.

------------------------------------------------------------------------
r1082 | fabricecolin | 2007-11-01 19:00:53 +0800 (Thu, 01 Nov 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/propertiesDialog.cc

Hide the language when editing several documents' properties, at least until
that can be updated over D-Bus en masse.

------------------------------------------------------------------------
r1081 | fabricecolin | 2007-10-30 19:25:20 +0800 (Tue, 30 Oct 2007) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

Merged audio-docs, deskbar and omega sub-packages into main one.

------------------------------------------------------------------------
r1080 | fabricecolin | 2007-10-30 19:07:25 +0800 (Tue, 30 Oct 2007) | 3 lines
Changed paths:
   M /trunk/configure.in

New option --with-ssl=PATH for those systems on which Curl or Neon require
OpenSSL but pkg-config can't be relied on.

------------------------------------------------------------------------
r1079 | fabricecolin | 2007-10-28 14:33:05 +0800 (Sun, 28 Oct 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Added missing includes for stat().

------------------------------------------------------------------------
r1078 | fabricecolin | 2007-10-27 21:10:35 +0800 (Sat, 27 Oct 2007) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README

Updated README with used external filter programs, and NEWS with current status.

------------------------------------------------------------------------
r1077 | fabricecolin | 2007-10-27 20:57:33 +0800 (Sat, 27 Oct 2007) | 2 lines
Changed paths:
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_TW.po

Current translations, including updates from JW (nl) and Leonardo Melo (pt_BR).

------------------------------------------------------------------------
r1076 | fabricecolin | 2007-10-27 11:47:11 +0800 (Sat, 27 Oct 2007) | 3 lines
Changed paths:
   M /trunk/Utils/Url.cpp

Escape '+'. That doesn't do any harm and prevents Xapian's spelling correction
from mistaking '+' in url filters for a boolean operator.

------------------------------------------------------------------------
r1075 | fabricecolin | 2007-10-27 11:45:26 +0800 (Sat, 27 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

In DEBUG mode, get a description of the Query object, that's pretty useful.

------------------------------------------------------------------------
r1074 | fabricecolin | 2007-10-27 10:37:24 +0800 (Sat, 27 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Index/pinot-label.cpp

Option --list doesn't need any parameter.

------------------------------------------------------------------------
r1073 | fabricecolin | 2007-10-26 23:18:13 +0800 (Fri, 26 Oct 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/propertiesDialog.cc

Better at telling when properties or daemon preferences have changed.

------------------------------------------------------------------------
r1072 | fabricecolin | 2007-10-24 22:05:41 +0800 (Wed, 24 Oct 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

In get_results_page_details(), set the query's name so that we can tell the user
what we failed to find. One case where this applies is More Like This on a
in-results search.

------------------------------------------------------------------------
r1071 | fabricecolin | 2007-10-24 21:53:17 +0800 (Wed, 24 Oct 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/propertiesDialog.cc

Don't refresh the index list if labels were not changed in any way.
Don't bother looking for the document's language if it's unknown !

------------------------------------------------------------------------
r1070 | fabricecolin | 2007-10-23 22:58:24 +0800 (Tue, 23 Oct 2007) | 3 lines
Changed paths:
   M /trunk/Index/pinot-index.cpp
   M /trunk/Search/pinot-search.cpp

Following the fix on language in XapianDatabase's records, we need to provide
names for all languages.

------------------------------------------------------------------------
r1069 | fabricecolin | 2007-10-23 22:52:05 +0800 (Tue, 23 Oct 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/propertiesDialog.hh

propertiesDialog should be able to tell when the user made modifications.
Modified LabelUpdateThread to set several labels on N documents at once. That's
used after labels are edited on several documents.

------------------------------------------------------------------------
r1068 | fabricecolin | 2007-10-23 22:43:39 +0800 (Tue, 23 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Search/pinot-search.cpp

Slightly better error message.

------------------------------------------------------------------------
r1067 | fabricecolin | 2007-10-23 22:42:32 +0800 (Tue, 23 Oct 2007) | 3 lines
Changed paths:
   M /trunk/Index/pinot-index.cpp
   M /trunk/Index/pinot-label.cpp

Process all parameters instead of stopping after the first one...
Don't display internal labels.

------------------------------------------------------------------------
r1066 | fabricecolin | 2007-10-23 22:39:08 +0800 (Tue, 23 Oct 2007) | 5 lines
Changed paths:
   M /trunk/Index/XapianDatabase.cpp
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/XapianEngine.cpp

The language stored by XapianDatabase::propsToRecord() is in English, so make
sure both XapianIndex and XapianEngine convert to locale after calling
recordToProps().
Dropped code about pre-0.60 timestamps; those indexes will be upgraded.

------------------------------------------------------------------------
r1065 | fabricecolin | 2007-10-23 22:35:08 +0800 (Tue, 23 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Index/LanguageDetector.cpp

Cosmetic.

------------------------------------------------------------------------
r1064 | fabricecolin | 2007-10-22 19:51:31 +0800 (Mon, 22 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Tokenize/FilterUtils.cpp

Ignore size 0 from filters.

------------------------------------------------------------------------
r1063 | fabricecolin | 2007-10-22 19:50:20 +0800 (Mon, 22 Oct 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

Set the error number on exceptions.

------------------------------------------------------------------------
r1062 | fabricecolin | 2007-10-22 19:44:57 +0800 (Mon, 22 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp

Minor fix.

------------------------------------------------------------------------
r1061 | fabricecolin | 2007-10-22 19:43:43 +0800 (Mon, 22 Oct 2007) | 3 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

Check at least twice the number of requested hits so that we have a reasonable
idea about whether a second hits page is needed.

------------------------------------------------------------------------
r1060 | fabricecolin | 2007-10-21 23:15:38 +0800 (Sun, 21 Oct 2007) | 2 lines
Changed paths:
   M /trunk/configure.in

Check for the OpenSSL package if required by Curl. Reported by Adel Gadllah.

------------------------------------------------------------------------
r1059 | fabricecolin | 2007-10-20 00:49:46 +0800 (Sat, 20 Oct 2007) | 2 lines
Changed paths:
   M /trunk/README

Mention that "pinot-dbus-daemon --reindex" will reset the My Documents index.

------------------------------------------------------------------------
r1058 | fabricecolin | 2007-10-20 00:20:05 +0800 (Sat, 20 Oct 2007) | 4 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/pinot-search.cpp

Pinot-search didn't show date and size.
When showing query times, XapianEngine displays the query text instead of the
output of Query::get_description() which may be misleading.

------------------------------------------------------------------------
r1057 | fabricecolin | 2007-10-19 23:48:42 +0800 (Fri, 19 Oct 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/propertiesDialog.hh

Fixed warning about order of initialization.

------------------------------------------------------------------------
r1056 | fabricecolin | 2007-10-19 22:32:49 +0800 (Fri, 19 Oct 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

In mainWindow, get UpdateDocumentThread to update labels on each document.
In DaemonState, log errors reported by IndexingThread.

------------------------------------------------------------------------
r1055 | fabricecolin | 2007-10-19 22:29:56 +0800 (Fri, 19 Oct 2007) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO

Current development status.

------------------------------------------------------------------------
r1054 | fabricecolin | 2007-10-18 22:56:02 +0800 (Thu, 18 Oct 2007) | 6 lines
Changed paths:
   M /trunk/README
   M /trunk/Search/QueryProperties.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp

XapianEngine::queryDatabase() logs how long queries took (setting up Enquire,
getting the MSet, generating abstracts).
PinotSettings creates a Me query on the first run.
Fixed comment in QueryProperties.
The README talks about D-Bus timeouts that may occur when the system is busy.

------------------------------------------------------------------------
r1053 | fabricecolin | 2007-10-18 19:23:15 +0800 (Thu, 18 Oct 2007) | 2 lines
Changed paths:
   M /trunk/configure.in

Check for socketpair(), fork() and setrlimit().

------------------------------------------------------------------------
r1052 | fabricecolin | 2007-10-18 19:14:10 +0800 (Thu, 18 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

"title:" should really be a probabilistic term prefix. Some extra DEBUG.

------------------------------------------------------------------------
r1051 | fabricecolin | 2007-10-17 22:26:54 +0800 (Wed, 17 Oct 2007) | 2 lines
Changed paths:
   M /trunk/README

Revised section 6.

------------------------------------------------------------------------
r1050 | fabricecolin | 2007-10-16 22:22:32 +0800 (Tue, 16 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Tokenize/Makefile.am

Filter libraries need not link against libBasicUtils anymore.

------------------------------------------------------------------------
r1049 | fabricecolin | 2007-10-16 22:03:27 +0800 (Tue, 16 Oct 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/propertiesDialog.cc

Don't show Unknown for size 0, it's fine. Several labels may be applied, so
use the plural Labels in the list. Pass an empty string for language Unknown.

------------------------------------------------------------------------
r1048 | fabricecolin | 2007-10-16 21:55:04 +0800 (Tue, 16 Oct 2007) | 4 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

Sort by relevance first and then by date, rather than by relevance only.
The latter seems to cause MSet::get_matches_estimated() to return figures way
below what we would get when sorting by date then relevance...

------------------------------------------------------------------------
r1047 | fabricecolin | 2007-10-16 19:52:44 +0800 (Tue, 16 Oct 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/queryDialog.cc

Give default values to filters as examples, instead of just "xxx".

------------------------------------------------------------------------
r1046 | fabricecolin | 2007-10-16 19:30:29 +0800 (Tue, 16 Oct 2007) | 2 lines
Changed paths:
   M /trunk/README

Examples of use for filters dir and title were not correct.

------------------------------------------------------------------------
r1045 | fabricecolin | 2007-10-15 22:18:26 +0800 (Mon, 15 Oct 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Be good and catch Glib exceptions too.

------------------------------------------------------------------------
r1044 | fabricecolin | 2007-10-15 21:47:38 +0800 (Mon, 15 Oct 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc

UpdateDocumentThread can update labels too.

------------------------------------------------------------------------
r1043 | fabricecolin | 2007-10-15 13:40:56 +0800 (Mon, 15 Oct 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

Get index IDs by name or location.

------------------------------------------------------------------------
r1042 | fabricecolin | 2007-10-15 12:06:30 +0800 (Mon, 15 Oct 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/mainWindow.cc

Synced mainWindow with changes made to propertiesDialog. It also assumed that
UpdateDocumentThread only operates on My Web Pages, which is incorrect.
ResultsTree::updateResult() returns false if it failed.

------------------------------------------------------------------------
r1041 | fabricecolin | 2007-10-15 12:02:41 +0800 (Mon, 15 Oct 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/propertiesDialog.hh

Manipulate the documents list the dialog was passed directly. There's no need
to call getDocumentInfo(), since the tree now caches all that information.

------------------------------------------------------------------------
r1040 | fabricecolin | 2007-10-15 11:57:50 +0800 (Mon, 15 Oct 2007) | 7 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

UpdateDocumentThread exports the index name and doesn't call getDocumentInfo()
after performing the update. It's not necessary, and may retrieve old data if
the update was done over D-Bus and the daemon has not flushed to the index.
IndexingThread restores the document and index IDs following the call to
getDocumentInfo(). We could probably do without this call, I'll have to look
into it later on...

------------------------------------------------------------------------
r1039 | fabricecolin | 2007-10-15 10:54:27 +0800 (Mon, 15 Oct 2007) | 2 lines
Changed paths:
   M /trunk/SQL/ActionQueue.cpp
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h

Use DocumentInfo serialization in ActionQueue and ResultsTree.

------------------------------------------------------------------------
r1038 | fabricecolin | 2007-10-15 10:52:22 +0800 (Mon, 15 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Utils/DocumentInfo.cpp
   M /trunk/Utils/DocumentInfo.h

Documents can be serialized to and from strings.

------------------------------------------------------------------------
r1037 | fabricecolin | 2007-10-14 17:06:54 +0800 (Sun, 14 Oct 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/propertiesDialog_glade.cc
   M /trunk/UI/GTK2/src/propertiesDialog_glade.hh

Reorganized the properties dialog box a bit.

------------------------------------------------------------------------
r1036 | fabricecolin | 2007-10-14 17:05:37 +0800 (Sun, 14 Oct 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/queryDialog.cc

Removed unused variables.

------------------------------------------------------------------------
r1035 | fabricecolin | 2007-10-13 21:56:29 +0800 (Sat, 13 Oct 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/propertiesDialog.hh
   M /trunk/UI/GTK2/src/propertiesDialog_glade.cc
   M /trunk/UI/GTK2/src/propertiesDialog_glade.hh

propertiesDialog can save a document's terms to file, and does some of the
processing previously done in mainWindow.
Also give a sensible default name to the file results are exported to.

------------------------------------------------------------------------
r1034 | fabricecolin | 2007-10-13 16:31:22 +0800 (Sat, 13 Oct 2007) | 2 lines
Changed paths:
   M /trunk/po/Makefile.in.in

Pass -c to msgfmt.

------------------------------------------------------------------------
r1033 | fabricecolin | 2007-10-13 15:03:43 +0800 (Sat, 13 Oct 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/statisticsDialog.cc
   M /trunk/UI/GTK2/src/statisticsDialog.hh

Errors actually give some indication as to what failed. Errors of the same kind
are grouped together.

------------------------------------------------------------------------
r1032 | fabricecolin | 2007-10-13 14:54:13 +0800 (Sat, 13 Oct 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

When something fails, thread record an error number, which can be converted into
an error string by the caller if necessary.
DirectoryScannerThread records scanning errors directly into CrawlHistory.

------------------------------------------------------------------------
r1031 | fabricecolin | 2007-10-13 13:20:22 +0800 (Sat, 13 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Index/pinot-index.cpp
   M /trunk/Index/pinot-label.cpp

Display labels escaped since that's how they should be fed to pinot-label.

------------------------------------------------------------------------
r1030 | fabricecolin | 2007-10-13 13:16:53 +0800 (Sat, 13 Oct 2007) | 4 lines
Changed paths:
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/CrawlHistory.h

Extra column ErrorNum in CrawlHistory.
The table will be dropped and recreated but it should be okay since it will
take place when users upgrade to 0.80, which will trigger reindexing.

------------------------------------------------------------------------
r1029 | fabricecolin | 2007-10-13 13:11:30 +0800 (Sat, 13 Oct 2007) | 2 lines
Changed paths:
   M /trunk/SQL/ActionQueue.cpp

Serialize labels too.

------------------------------------------------------------------------
r1028 | fabricecolin | 2007-10-13 11:02:26 +0800 (Sat, 13 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Tokenize/FilterUtils.cpp

If a type has no valid parent, add an entry in the alias cache that says so.

------------------------------------------------------------------------
r1027 | fabricecolin | 2007-10-11 22:27:19 +0800 (Thu, 11 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/Topix.src

Updated results parsing.

------------------------------------------------------------------------
r1026 | fabricecolin | 2007-10-11 22:25:20 +0800 (Thu, 11 Oct 2007) | 3 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

Consider Z-prefixed terms (stems) when expanding the query.
Fixed how the query is built when limited to several documents.

------------------------------------------------------------------------
r1025 | fabricecolin | 2007-10-10 22:32:32 +0800 (Wed, 10 Oct 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp

Set results' timestamps when exporting.

------------------------------------------------------------------------
r1024 | fabricecolin | 2007-10-10 22:02:28 +0800 (Wed, 10 Oct 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotUtils.cpp

File chooser asks for confirmation when overwriting files. File name and folder
are initialized correctly.

------------------------------------------------------------------------
r1023 | fabricecolin | 2007-10-10 21:52:43 +0800 (Wed, 10 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Tokenize/FilterUtils.cpp

Look for date.

------------------------------------------------------------------------
r1022 | fabricecolin | 2007-10-10 21:50:32 +0800 (Wed, 10 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Utils/TimeConverter.cpp

Worry about timezones only if GM time is needed.

------------------------------------------------------------------------
r1021 | fabricecolin | 2007-10-09 23:01:12 +0800 (Tue, 09 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Index/FilterWrapper.cpp

Doh ! Why do I always confuse true and false ? ;-P

------------------------------------------------------------------------
r1020 | fabricecolin | 2007-10-09 21:26:10 +0800 (Tue, 09 Oct 2007) | 6 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

Xapian::Database::get_metadata() doesn't throw an exception when the backend
doesn't support metadata, so check the version file if get_metadata("version")
returns an empty string.
Extended getDocumentTerms() to return (some but not all) prefixed terms, and
terms that don't have positional information.

------------------------------------------------------------------------
r1019 | fabricecolin | 2007-10-09 21:12:13 +0800 (Tue, 09 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Index/LanguageDetector.cpp
   M /trunk/Index/pinot-label.cpp

Minor mods.

------------------------------------------------------------------------
r1018 | fabricecolin | 2007-10-09 21:09:35 +0800 (Tue, 09 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Index/FilterWrapper.cpp
   M /trunk/Index/pinot-index.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/ServerThreads.cpp

Let FilterWrapper assign a default title to documents.

------------------------------------------------------------------------
r1017 | fabricecolin | 2007-10-07 18:26:07 +0800 (Sun, 07 Oct 2007) | 5 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

New method getDocumentTerms().
In XapianIndex, revert to using the version file if metadata isn't supported
by the index backend (eg Quartz). Make sure setVersion() always creates the
CACHEDIR.TAG file.

------------------------------------------------------------------------
r1016 | fabricecolin | 2007-10-07 18:22:37 +0800 (Sun, 07 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Index/XapianDatabase.cpp

Activate keep alive for remote databases.

------------------------------------------------------------------------
r1015 | fabricecolin | 2007-10-06 23:21:40 +0800 (Sat, 06 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Index/pinot-index.cpp

Deleting the index object when exiting cannot hurt.

------------------------------------------------------------------------
r1014 | fabricecolin | 2007-10-06 23:19:33 +0800 (Sat, 06 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.h

Corrected comment.

------------------------------------------------------------------------
r1013 | fabricecolin | 2007-10-04 21:59:39 +0800 (Thu, 04 Oct 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/statisticsDialog.cc

Got rid of leaks where the index returned by getIndex() wasn't deleted.

------------------------------------------------------------------------
r1012 | fabricecolin | 2007-10-04 21:17:49 +0800 (Thu, 04 Oct 2007) | 2 lines
Changed paths:
   M /trunk/pinot.desktop

More translations for Name and Comment.

------------------------------------------------------------------------
r1011 | fabricecolin | 2007-10-04 21:15:24 +0800 (Thu, 04 Oct 2007) | 3 lines
Changed paths:
   M /trunk/Index/Makefile.am
   M /trunk/Index/pinot-index.cpp
   A /trunk/Index/pinot-label.1
   A /trunk/Index/pinot-label.cpp
   M /trunk/Makefile.am
   M /trunk/README
   M /trunk/configure.in
   M /trunk/pinot.spec.in

New pinot-label tool to manipulate labels on indexed files.
Also increased requirement on Xapian to 1.0.3. This is enforced by configure.

------------------------------------------------------------------------
r1010 | fabricecolin | 2007-10-04 21:10:00 +0800 (Thu, 04 Oct 2007) | 3 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

Labels prefixed with "X-" are private, internal labels that can only be set when
the document is initially indexed and should be preserved until it's unindexed.

------------------------------------------------------------------------
r1009 | fabricecolin | 2007-10-04 20:56:11 +0800 (Thu, 04 Oct 2007) | 2 lines
Changed paths:
   R /trunk/Search/Plugins/Yahoo.src (from /trunk/Search/Plugins/YahooAPI.src:1003)
   D /trunk/Search/Plugins/YahooAPI.src

Renamed YahooAPI plugin to Yahoo.

------------------------------------------------------------------------
r1008 | fabricecolin | 2007-10-04 20:52:42 +0800 (Thu, 04 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexInterface.h

Overloaded getDocumentLabels(). Fixed typo in interface header file.

------------------------------------------------------------------------
r1007 | fabricecolin | 2007-10-04 20:50:50 +0800 (Thu, 04 Oct 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/ServerThreads.cpp

Prefix the source label with "X-". Send reply over D-Bus before flushing the
index.

------------------------------------------------------------------------
r1006 | fabricecolin | 2007-10-03 21:56:38 +0800 (Wed, 03 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Utils/MIMEScanner.cpp

Don't attempt loading anything if initialize() wasn't provided paths.

------------------------------------------------------------------------
r1005 | fabricecolin | 2007-10-03 21:53:49 +0800 (Wed, 03 Oct 2007) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/prefsDialog.cc

prefsDialog might not find labels in the index if the daemon hasn't had a
chance to upgrade it, in which case it should get them from the configuration
file.
More DEBUG in ServerThreads.

------------------------------------------------------------------------
r1004 | fabricecolin | 2007-10-02 23:35:01 +0800 (Tue, 02 Oct 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Reset everything when --reindex is passed, or when upgrading from an older
version.

------------------------------------------------------------------------
r1003 | fabricecolin | 2007-10-02 22:40:00 +0800 (Tue, 02 Oct 2007) | 10 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.hh

Daemon supports new D-Bus methods AddLabel and GetLabels. The labels list is
updated if necessary whenever labels are manipulated. For instance, calling
SetDocumentLabels with a new label should create that label.
If new labels are defined in the UI, LabelUpdateThread calls addLabel().
PinotSettings' labels list can be accessed directly without going through
setters and getters.
Modified the order in which the index is checked at startup and reset to
take into account changes made to versioning and labels lists.
Added a --reindex option to the daemon.

------------------------------------------------------------------------
r1002 | fabricecolin | 2007-10-02 22:30:42 +0800 (Tue, 02 Oct 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh

Keep track of new labels separately.

------------------------------------------------------------------------
r1001 | fabricecolin | 2007-10-02 22:25:04 +0800 (Tue, 02 Oct 2007) | 5 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

Actually, a new addLabel() method, together with the existing rename and
deleteLabel() methods, is more suitable to label management over D-Bus.
Removed the D-Bus'ified setLabels() and overloaded getLabels() for clients
that want to get the list directly from the daemon.

------------------------------------------------------------------------
r1000 | fabricecolin | 2007-10-01 20:43:31 +0800 (Mon, 01 Oct 2007) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h

Forgot to include config.h. Other minor mods.

------------------------------------------------------------------------
r999 | fabricecolin | 2007-09-30 17:54:25 +0800 (Sun, 30 Sep 2007) | 5 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianDatabaseFactory.cpp
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

If database metadata is available (Xapian >= 1.0.3), use it to store version and
labels. New method reset() gets XapianDatabaseFactory::getDatabase() to
overwrite and re-open the database.
DBusXapianIndex makes use of the D-Bus method SetLabels.

------------------------------------------------------------------------
r998 | fabricecolin | 2007-09-29 14:00:41 +0800 (Sat, 29 Sep 2007) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.h
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/configure.in

NUM_VERSION defines for Xapian and DBus.

------------------------------------------------------------------------
r997 | fabricecolin | 2007-09-27 20:36:15 +0800 (Thu, 27 Sep 2007) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/ServerThreads.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh

Query history button to show a stored query's latest results, for all engines
it's been run against, as found in the history database.
QueryingThread specializes into EngineQuery and EngineHistory sub-classes.
ResultsTree removes entries from previous queries if necessary.

------------------------------------------------------------------------
r996 | fabricecolin | 2007-09-27 20:32:02 +0800 (Thu, 27 Sep 2007) | 2 lines
Changed paths:
   M /trunk/SQL/QueryHistory.cpp
   M /trunk/SQL/QueryHistory.h

Overloaded deleteItems(), added getEngines().

------------------------------------------------------------------------
r995 | fabricecolin | 2007-09-26 23:01:39 +0800 (Wed, 26 Sep 2007) | 2 lines
Changed paths:
   M /trunk/README

Updated blurb about filters. Talk about ranges.

------------------------------------------------------------------------
r994 | fabricecolin | 2007-09-26 22:59:46 +0800 (Wed, 26 Sep 2007) | 3 lines
Changed paths:
   M /trunk/Search/SearchEngineInterface.cpp
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc

QueryingThread and ExpandQueryThread made assumptions about how index stuff
works that are better encapsulated in SearchEngine classes.

------------------------------------------------------------------------
r993 | fabricecolin | 2007-09-26 22:09:53 +0800 (Wed, 26 Sep 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.hh

Show the results sort order in queryDialog, save it in PinotSettings.

------------------------------------------------------------------------
r992 | fabricecolin | 2007-09-26 21:58:15 +0800 (Wed, 26 Sep 2007) | 4 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/Google/GoogleAPIEngine.cpp
   M /trunk/Search/Google/GoogleAPIEngine.h
   M /trunk/Search/QueryProperties.cpp
   M /trunk/Search/QueryProperties.h
   M /trunk/Search/SearchEngineFactory.cpp
   M /trunk/Search/SearchEngineInterface.cpp
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h

QueryProperties has a sort order (relevance or date). XapianIndex stores date
and time in value 4 for that purpose.
Removed setKey() from engines interface, it's only relevant to the Google API.

------------------------------------------------------------------------
r991 | fabricecolin | 2007-09-25 21:40:00 +0800 (Tue, 25 Sep 2007) | 6 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh

Backtracked previous UI changes. I realized that combining queries is not that
useful. Users can do that manually with copy-and-paste already.
Now there's a Search Again For menuitem that runs a specific query against
currently selected (indexed) results.
Removed the Edit query button, edits are done on a double-click. Added tooltips.

------------------------------------------------------------------------
r990 | fabricecolin | 2007-09-25 21:32:14 +0800 (Tue, 25 Sep 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

Synced with changes to query expansion.

------------------------------------------------------------------------
r989 | fabricecolin | 2007-09-25 21:29:33 +0800 (Tue, 25 Sep 2007) | 3 lines
Changed paths:
   M /trunk/Search/SearchEngineInterface.cpp
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h

Reworked query expansion a tad. We now use an ExpandDecider, and capitalized
terms as well as subject terms are not skipped.

------------------------------------------------------------------------
r988 | fabricecolin | 2007-09-24 20:50:16 +0800 (Mon, 24 Sep 2007) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh

Implemented search in results. Rather than having the user select results,
the selected query is combined with the one whose results are being shown.
The Buttons next to the queries list are replaced with ToolButtons and a
MenuToolButton.

------------------------------------------------------------------------
r987 | fabricecolin | 2007-09-23 22:26:50 +0800 (Sun, 23 Sep 2007) | 3 lines
Changed paths:
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_TW.po

Synced with Rosetta. This includes updates to es.po by Jesus Tramullas, and
to de.po by Andreas Meyer.

------------------------------------------------------------------------
r986 | fabricecolin | 2007-09-23 19:33:08 +0800 (Sun, 23 Sep 2007) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.h

Previous commit should have included this file too.

------------------------------------------------------------------------
r985 | fabricecolin | 2007-09-23 19:19:37 +0800 (Sun, 23 Sep 2007) | 5 lines
Changed paths:
   M /trunk/Search/Google/GoogleAPIEngine.cpp
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/QueryProperties.cpp
   M /trunk/Search/QueryProperties.h
   M /trunk/Search/WebEngine.cpp
   M /trunk/Search/WebEngine.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Tokenize/Tokenizer.cpp
   M /trunk/Tokenize/Tokenizer.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Don't bother extracting host and file filters from queries and applying them to
Web results. A better way to do it would be to pass them directly to the Web
engine, as most of them supports those filters natively. Hopefully, this will
be implemented soon-ish.

------------------------------------------------------------------------
r984 | fabricecolin | 2007-09-23 18:30:25 +0800 (Sun, 23 Sep 2007) | 5 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.cc
   M /trunk/Utils/TimeConverter.cpp
   M /trunk/Utils/TimeConverter.h

Support for time ranges (value 3). Tweaked the query properties dialog.
In XapianEngine, get Enquire::get_mset() to check at least maxResultsCount + 1
so that the total results estimate is determined correctly if between 0 to
maxResultsCount.

------------------------------------------------------------------------
r983 | fabricecolin | 2007-09-23 18:22:50 +0800 (Sun, 23 Sep 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Better check whether we actually obtained a Monitor.

------------------------------------------------------------------------
r982 | fabricecolin | 2007-09-22 00:51:46 +0800 (Sat, 22 Sep 2007) | 2 lines
Changed paths:
   M /trunk/TODO

Removed a bunch of stuff, added some more.

------------------------------------------------------------------------
r981 | fabricecolin | 2007-09-22 00:45:10 +0800 (Sat, 22 Sep 2007) | 2 lines
Changed paths:
   M /trunk/Utils/StringManip.cpp
   M /trunk/Utils/StringManip.h

Methods replaceEntities() and removeCharacters() were moved elsewhere.

------------------------------------------------------------------------
r980 | fabricecolin | 2007-09-22 00:41:09 +0800 (Sat, 22 Sep 2007) | 6 lines
Changed paths:
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.h
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/ServerThreads.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/MIMEScanner.h

MIMEScanner::initialize() takes prefixes (eg /usr /home/bozo/.local) instead of
directories. Method listConfigurationFiles() returns files to monitor for
modifications. Those are monitored by the UI and modifications trigger a
re-initialization of MIMEScanner.
Moved MonitorThread from ServerThreads to WorkerThreads.

------------------------------------------------------------------------
r979 | fabricecolin | 2007-09-19 23:36:45 +0800 (Wed, 19 Sep 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Don't refer to XapianEngine directly.

------------------------------------------------------------------------
r978 | fabricecolin | 2007-09-19 23:34:50 +0800 (Wed, 19 Sep 2007) | 3 lines
Changed paths:
   M /trunk/Tokenize/FilterUtils.cpp
   M /trunk/Tokenize/FilterUtils.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Just like with getFilter(), we need a version of isSupportedType() that knows
about parent types.

------------------------------------------------------------------------
r977 | fabricecolin | 2007-09-19 23:32:19 +0800 (Wed, 19 Sep 2007) | 5 lines
Changed paths:
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/MIMEScanner.h

Support for reinitialization.
Protect the caches list with a read/write lock as it can be emptied or appended
to while being read.
Prevent getDefaultActions() from returning the same action more than once.

------------------------------------------------------------------------
r976 | fabricecolin | 2007-09-12 23:03:04 +0800 (Wed, 12 Sep 2007) | 2 lines
Changed paths:
   M /trunk/configure.in

Help output wasn't pretty. Reported by Reuben Thomas.

------------------------------------------------------------------------
r975 | fabricecolin | 2007-09-12 22:49:24 +0800 (Wed, 12 Sep 2007) | 5 lines
Changed paths:
   M /trunk/SQL/QueryHistory.cpp
   M /trunk/SQL/QueryHistory.h
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

In importDialog, the location field suggests URLs pulled from QueryHistory,
based on what the user entered, similarly to terms suggestion on the live query
field.
Removed unnecessary match method in mainWindow.

------------------------------------------------------------------------
r974 | fabricecolin | 2007-09-11 21:54:26 +0800 (Tue, 11 Sep 2007) | 2 lines
Changed paths:
   M /trunk/Makefile.am

Use mkdir, not mkinstalldirs.

------------------------------------------------------------------------
r973 | fabricecolin | 2007-09-11 21:52:46 +0800 (Tue, 11 Sep 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ServerThreads.h

Always check DBUS_VERSION before defining DBUS_API_SUBJECT_TO_CHANGE !

------------------------------------------------------------------------
r972 | fabricecolin | 2007-09-11 21:42:26 +0800 (Tue, 11 Sep 2007) | 3 lines
Changed paths:
   M /trunk/Index/FilterWrapper.cpp
   M /trunk/Tokenize/FilterUtils.cpp
   M /trunk/Tokenize/FilterUtils.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

If a type has no filter defined, FilterUtils::getFilter() tries its parent
types, obtained from MIMEScanner.

------------------------------------------------------------------------
r971 | fabricecolin | 2007-09-11 21:28:42 +0800 (Tue, 11 Sep 2007) | 9 lines
Changed paths:
   M /trunk/Index/pinot-index.cpp
   M /trunk/Search/pinot-search.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/MIMEScanner.h

Applied patch by Lee Marks. The contents of defaults.list has priority over that
of mimeinfo.cache. User-specific settings found in ~/.local -which may point to
desktop files in the same directory- are loaded before system-wide settings.
Desktop files are cached for the duration of load() to avoid having to read the
same file several times.
While pinot and pinot-dbus-daemon fully initialize MIMEScanner, pinot-index and
pinot-search don't, as they only need to query files' types, not launch viewers.
Also added a getParentTypes() method that will be useful for filtering.

------------------------------------------------------------------------
r970 | fabricecolin | 2007-09-11 20:53:12 +0800 (Tue, 11 Sep 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp

Method getHomeDirectory() returns ~ as a last resort if unable to determine the
user's home.

------------------------------------------------------------------------
r969 | fabricecolin | 2007-09-11 20:48:02 +0800 (Tue, 11 Sep 2007) | 3 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/UI/GTK2/src/queryDialog.cc

Store documents' size, in bytes, in value 2. Ranges with suffix 'b' will be
applied on that value.

------------------------------------------------------------------------
r968 | fabricecolin | 2007-09-08 19:04:46 +0800 (Sat, 08 Sep 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/Makefile.am
   D /trunk/UI/GTK2/src/dateDialog.cc
   D /trunk/UI/GTK2/src/dateDialog.hh
   D /trunk/UI/GTK2/src/dateDialog_glade.cc
   D /trunk/UI/GTK2/src/dateDialog_glade.hh
   M /trunk/po/POTFILES.in

Trimmed down queryDialog, obsoleted dateDialog.

------------------------------------------------------------------------
r967 | fabricecolin | 2007-09-08 18:58:49 +0800 (Sat, 08 Sep 2007) | 8 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/QueryProperties.cpp
   M /trunk/Search/QueryProperties.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.hh
   M /trunk/UI/GTK2/src/queryDialog_glade.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.hh
   M /trunk/Utils/StringManip.cpp
   M /trunk/Utils/StringManip.h

Date ranges are now part of the query string in the form "yyyymmdd..yyyymmdd"
and processed with a DateValueRangeProcessor. Users can use the query dialog's
new "Date range" filter.
D, M and Y terms need not be generated for each document.
If Xapian > 1.0.2, spelling correction is enabled. Whenever a query on an index
doesn't return anything, the UI creates a new query (prefixed with "Corrected ")
that suggests replacement terms.

------------------------------------------------------------------------
r966 | fabricecolin | 2007-09-04 20:14:42 +0800 (Tue, 04 Sep 2007) | 3 lines
Changed paths:
   M /trunk
   M /trunk/TODO

Replaced Search/xesam and Tokenize/filters with externals.
More stuff to do...

------------------------------------------------------------------------
r965 | fabricecolin | 2007-09-04 20:07:18 +0800 (Tue, 04 Sep 2007) | 2 lines
Changed paths:
   D /trunk/Search/xesam
   D /trunk/Tokenize/filters

Will replace these directories with externals.

------------------------------------------------------------------------
r964 | fabricecolin | 2007-09-04 20:00:45 +0800 (Tue, 04 Sep 2007) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

Install the FAQ file.

------------------------------------------------------------------------
r963 | fabricecolin | 2007-09-04 19:33:47 +0800 (Tue, 04 Sep 2007) | 2 lines
Changed paths:
   A /trunk/ChangeLog
   A /trunk/INSTALL

These two files should be in the source tree.

------------------------------------------------------------------------
r962 | fabricecolin | 2007-09-04 19:30:21 +0800 (Tue, 04 Sep 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

Show external indexes in the List Contents Of menu, repopulate when one is
added/edited/removed. Properties of documents from external indexes are
-for the time being- not shown.

------------------------------------------------------------------------
r961 | fabricecolin | 2007-09-03 20:14:49 +0800 (Mon, 03 Sep 2007) | 2 lines
Changed paths:
   A /trunk/FAQ
   M /trunk/Makefile.am
   M /trunk/README

Moved FAQ to separate file.

------------------------------------------------------------------------
r960 | fabricecolin | 2007-09-03 19:12:38 +0800 (Mon, 03 Sep 2007) | 4 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

With Xapian 1.0, we can list all documents by getting a postlist of the empty
term. This will let us browse indexes that don't have the "magic term", i.e.
indexes not built with Pinot.

------------------------------------------------------------------------
r959 | fabricecolin | 2007-09-01 13:12:21 +0800 (Sat, 01 Sep 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/EnginesTree.h
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotUtils.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.cc

Fixed warnings about shadowed variables.

------------------------------------------------------------------------
r958 | fabricecolin | 2007-09-01 13:07:38 +0800 (Sat, 01 Sep 2007) | 2 lines
Changed paths:
   M /trunk/Search/OpenSearchParser.cpp
   M /trunk/Utils/StringManip.cpp
   M /trunk/Utils/Url.cpp

Fixed variable shadowing.

------------------------------------------------------------------------
r957 | fabricecolin | 2007-09-01 13:05:22 +0800 (Sat, 01 Sep 2007) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

No need to list files under %{_datadir}/pinot.

------------------------------------------------------------------------
r956 | fabricecolin | 2007-09-01 11:59:45 +0800 (Sat, 01 Sep 2007) | 2 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/UI/GTK2/src/pinot.cc

Include config.h before checking DBUS_VERSION as it's defined there.

------------------------------------------------------------------------
r955 | fabricecolin | 2007-09-01 11:48:49 +0800 (Sat, 01 Sep 2007) | 2 lines
Changed paths:
   M /trunk/Index/Makefile.am
   M /trunk/Search/Makefile.am

Applied patch by Gabriel C to fix dependencies, and hopefully, SMP builds.

------------------------------------------------------------------------
r954 | fabricecolin | 2007-08-26 22:13:41 +0800 (Sun, 26 Aug 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp

Catch exceptions in save(). Most likely, someone deletes ~/.pinot while the
application is running.

------------------------------------------------------------------------
r953 | fabricecolin | 2007-08-26 21:31:40 +0800 (Sun, 26 Aug 2007) | 2 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp

Parameter to Reload wasn't a glib type. This could cause a segault.

------------------------------------------------------------------------
r951 | fabricecolin | 2007-08-22 23:52:57 +0800 (Wed, 22 Aug 2007) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_TW.po

Checking in latest po's and the NEWS file in preparation for 0.76 release.

------------------------------------------------------------------------
r950 | fabricecolin | 2007-08-22 22:18:52 +0800 (Wed, 22 Aug 2007) | 2 lines
Changed paths:
   M /trunk/Search/pinot-search.1
   M /trunk/Search/pinot-search.cpp

Corrected example.

------------------------------------------------------------------------
r949 | fabricecolin | 2007-08-22 22:17:43 +0800 (Wed, 22 Aug 2007) | 3 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/configure.in

Use strings for version numbers so that we don't have to worry about the
decimal point.

------------------------------------------------------------------------
r948 | fabricecolin | 2007-08-21 22:24:36 +0800 (Tue, 21 Aug 2007) | 2 lines
Changed paths:
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   M /trunk/po/zh_TW.po

Updated translations.

------------------------------------------------------------------------
r947 | fabricecolin | 2007-08-21 22:19:25 +0800 (Tue, 21 Aug 2007) | 2 lines
Changed paths:
   M /trunk/scripts/bash/pinot-enum-index.sh

List documents whose scheme is not file://.

------------------------------------------------------------------------
r946 | fabricecolin | 2007-08-20 22:10:50 +0800 (Mon, 20 Aug 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot.cc

Very minor mod.

------------------------------------------------------------------------
r945 | fabricecolin | 2007-08-20 22:04:32 +0800 (Mon, 20 Aug 2007) | 2 lines
Changed paths:
   M /trunk/Index/pinot-index.1
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/configure.in

Upped version number, updated man pages.

------------------------------------------------------------------------
r944 | fabricecolin | 2007-08-20 22:01:07 +0800 (Mon, 20 Aug 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.hh

Leave queries' details in UTF-8.

------------------------------------------------------------------------
r943 | fabricecolin | 2007-08-20 21:53:18 +0800 (Mon, 20 Aug 2007) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

Disable spelling suggestions for the time being, it's not yet used.

------------------------------------------------------------------------
r942 | fabricecolin | 2007-08-19 22:12:19 +0800 (Sun, 19 Aug 2007) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

Some mods imported from Fedora 7's spec file.

------------------------------------------------------------------------
r941 | fabricecolin | 2007-08-19 22:10:03 +0800 (Sun, 19 Aug 2007) | 3 lines
Changed paths:
   M /trunk/AUTHORS

Updated contributors list. Lee suggested giving priority to local MIME settings
and Adel brought up some issues with packaging.

------------------------------------------------------------------------
r940 | fabricecolin | 2007-08-19 22:07:51 +0800 (Sun, 19 Aug 2007) | 3 lines
Changed paths:
   M /trunk/README
   M /trunk/TODO

Added blurb about the location of language models to the FAQ.
Removed some items from the TODO, added some more...

------------------------------------------------------------------------
r939 | fabricecolin | 2007-08-19 18:37:21 +0800 (Sun, 19 Aug 2007) | 3 lines
Changed paths:
   M /trunk/Search/WebEngine.cpp

Get the charset from the document's type, as set by the collector, or failing
that from the HTML filter.

------------------------------------------------------------------------
r938 | fabricecolin | 2007-08-18 00:17:08 +0800 (Sat, 18 Aug 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h

Don't open ViewHistory every time appendResult() is called.

------------------------------------------------------------------------
r937 | fabricecolin | 2007-08-17 23:54:00 +0800 (Fri, 17 Aug 2007) | 4 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

Spelling suggestions are not supported by all backends, eg Quartz, so try
indexing again without populating the spelling database if we get an
UnimplementedError.

------------------------------------------------------------------------
r936 | fabricecolin | 2007-08-17 22:54:40 +0800 (Fri, 17 Aug 2007) | 2 lines
Changed paths:
   M /trunk/Index/LanguageDetector.cpp
   M /trunk/Index/Makefile.am
   M /trunk/configure.in

Look for textcat.h in libtextcat.

------------------------------------------------------------------------
r935 | fabricecolin | 2007-08-17 00:47:24 +0800 (Fri, 17 Aug 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Forgot case where launcherDialog is used.

------------------------------------------------------------------------
r934 | fabricecolin | 2007-08-17 00:31:13 +0800 (Fri, 17 Aug 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Minor mod.

------------------------------------------------------------------------
r933 | fabricecolin | 2007-08-17 00:30:37 +0800 (Fri, 17 Aug 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/Utils/MIMEScanner.cpp

Make sure getDefaultActions() really provided a MIMEAction.

------------------------------------------------------------------------
r932 | fabricecolin | 2007-08-17 00:28:32 +0800 (Fri, 17 Aug 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.h

Unified handling of moving and deleting a file or directory.

------------------------------------------------------------------------
r931 | fabricecolin | 2007-08-17 00:26:35 +0800 (Fri, 17 Aug 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh

The label was ignored.

------------------------------------------------------------------------
r930 | fabricecolin | 2007-08-17 00:25:04 +0800 (Fri, 17 Aug 2007) | 4 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

Merged listDocuments...() methods into one.
XapianIndex adds an extra XFILE:-prefixed term to local documents so that the
file monitor can list or delete stuff without having to worry about the protocol.

------------------------------------------------------------------------
r929 | fabricecolin | 2007-08-15 21:58:38 +0800 (Wed, 15 Aug 2007) | 3 lines
Changed paths:
   M /trunk/pinot.spec.in

Simplified files section and added find_lang macro, as per Adel Gadllah's spec
for Fedora 7.

------------------------------------------------------------------------
r928 | fabricecolin | 2007-08-15 21:50:14 +0800 (Wed, 15 Aug 2007) | 2 lines
Changed paths:
   M /trunk/Utils/CommandLine.cpp

Sanity check.

------------------------------------------------------------------------
r927 | fabricecolin | 2007-08-15 21:49:17 +0800 (Wed, 15 Aug 2007) | 8 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Preliminary support for queries' spelling correction. No user feedback yet.
When a stored query is selected, scroll to it in the list.
A query with no text is not necessarily empty (eg, if a start date is provided)
so check isEmpty() to decide if a query can be run.
Get all programs associated with a file type, but only use the first one, which
should have the highest priority. Eventually, we'll pop up a menu to let the
user select.

------------------------------------------------------------------------
r926 | fabricecolin | 2007-08-15 21:44:40 +0800 (Wed, 15 Aug 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

Support for spelling correction.

------------------------------------------------------------------------
r925 | fabricecolin | 2007-08-15 21:43:18 +0800 (Wed, 15 Aug 2007) | 5 lines
Changed paths:
   M /trunk/Index/pinot-index.cpp
   M /trunk/Search/pinot-search.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/MIMEScanner.h

Initialize MIMEScanner with system-wide and if available user-specific
(~/.local) mimeinfo.cache, the latter's settings having priority.
All the programs associated with a MIME type are loaded by initialize()
and returned by getDefaultActions(). 

------------------------------------------------------------------------
r924 | fabricecolin | 2007-08-15 21:38:32 +0800 (Wed, 15 Aug 2007) | 3 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

Create a CACHEDIR.TAG file when the index is versioned. This tells archivers
(for instance "tar --exclude-caches") to skip the index directory.

------------------------------------------------------------------------
r923 | fabricecolin | 2007-08-14 23:33:43 +0800 (Tue, 14 Aug 2007) | 3 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/configure.in
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po
   A /trunk/po/zh_TW.po

Synced with Rosetta's current po's, including new zh_TW translation by
Yung-Chung Lin.

------------------------------------------------------------------------
r922 | fabricecolin | 2007-08-14 22:42:58 +0800 (Tue, 14 Aug 2007) | 2 lines
Changed paths:
   M /trunk/TODO

Current status.

------------------------------------------------------------------------
r921 | fabricecolin | 2007-08-14 22:40:52 +0800 (Tue, 14 Aug 2007) | 2 lines
Changed paths:
   M /trunk/Utils/Document.cpp

Try to open files with O_NOATIME.

------------------------------------------------------------------------
r920 | fabricecolin | 2007-08-14 22:39:33 +0800 (Tue, 14 Aug 2007) | 2 lines
Changed paths:
   M /trunk/Search/pinot-search.cpp

Call setDefaultOperator().

------------------------------------------------------------------------
r919 | fabricecolin | 2007-08-14 22:38:52 +0800 (Tue, 14 Aug 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.hh

Add a separator in the filters list between those that apply to all engines
and those that don't.

------------------------------------------------------------------------
r918 | fabricecolin | 2007-08-14 20:02:19 +0800 (Tue, 14 Aug 2007) | 2 lines
Changed paths:
   M /trunk/scripts/python/pinot-live.py

Removed shebang.

------------------------------------------------------------------------
r917 | fabricecolin | 2007-08-14 20:00:19 +0800 (Tue, 14 Aug 2007) | 3 lines
Changed paths:
   M /trunk/Search/SherlockParser.cpp

Tentative fix for boost 1.34. Plugins may not be parsed in full. This doesn't
prevent the parser from extracting the required information.

------------------------------------------------------------------------
r916 | fabricecolin | 2007-08-13 22:25:09 +0800 (Mon, 13 Aug 2007) | 3 lines
Changed paths:
   M /trunk/README

Talk about the new Reload method, the search strategy.
An explanation of the "ext" filter was missing.

------------------------------------------------------------------------
r915 | fabricecolin | 2007-08-08 23:24:54 +0800 (Wed, 08 Aug 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp

Directories were not unindexed when deleted, only their contents were.
Similarly, they were not updated when moved. They are now, and the title is set
to the new location too, unless it was edited by the user.

------------------------------------------------------------------------
r914 | fabricecolin | 2007-08-08 22:00:31 +0800 (Wed, 08 Aug 2007) | 3 lines
Changed paths:
   M /trunk/Index/FilterWrapper.cpp
   M /trunk/Index/XapianIndex.cpp

FilterWrapper should preserve/use the provided title for the top-level document.
Less DEBUG output in XapianIndex.

------------------------------------------------------------------------
r913 | fabricecolin | 2007-08-08 21:58:12 +0800 (Wed, 08 Aug 2007) | 3 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/Monitor/INotifyMonitor.h

A DELETE event would cause the monitor to deadlock and therefore stop picking up
new events.

------------------------------------------------------------------------
r912 | fabricecolin | 2007-08-06 22:32:57 +0800 (Mon, 06 Aug 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml

Reload returns a boolean to indicate if the configuration is being reloaded.

------------------------------------------------------------------------
r911 | fabricecolin | 2007-08-06 22:30:46 +0800 (Mon, 06 Aug 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h

Don't keep track of what's being crawled, get that information from the thread.

------------------------------------------------------------------------
r910 | fabricecolin | 2007-08-06 22:29:14 +0800 (Mon, 06 Aug 2007) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h

There's no need to activate all parsing options when validating a query.

------------------------------------------------------------------------
r909 | fabricecolin | 2007-08-06 22:26:37 +0800 (Mon, 06 Aug 2007) | 2 lines
Changed paths:
   M /trunk/Index/XapianDatabase.cpp
   M /trunk/Index/XapianDatabase.h
   M /trunk/Index/XapianIndex.cpp

Fixed deadlock introduced by previous check-in, added some extra DEBUG code.

------------------------------------------------------------------------
r908 | fabricecolin | 2007-08-06 22:23:47 +0800 (Mon, 06 Aug 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Fixed D-Bus error handling.

------------------------------------------------------------------------
r907 | fabricecolin | 2007-08-05 19:06:51 +0800 (Sun, 05 Aug 2007) | 6 lines
Changed paths:
   M /trunk/Search/SearchEngineInterface.cpp
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h
   M /trunk/UI/GTK2/src/ServerThreads.cpp

Altered XapianEngine multi-step search code. Steps 3 and 4 are gone, the
original behaviour can be reproduced by changing the default operator and
calling runQuery() again. That's what the DBusServlet thread does for
queries received through SimpleQuery.
Spelling corrections are available.

------------------------------------------------------------------------
r906 | fabricecolin | 2007-08-04 23:41:23 +0800 (Sat, 04 Aug 2007) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/Search/XapianEngine.cpp

Support for spelling suggestions. No feedback is given yet.

------------------------------------------------------------------------
r905 | fabricecolin | 2007-08-04 13:41:25 +0800 (Sat, 04 Aug 2007) | 2 lines
Changed paths:
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Tokenize/FilterUtils.cpp
   M /trunk/Tokenize/Tokenizer.h

Minor fixes and mods.

------------------------------------------------------------------------
r904 | fabricecolin | 2007-08-04 13:29:54 +0800 (Sat, 04 Aug 2007) | 3 lines
Changed paths:
   M /trunk/README
   M /trunk/pinot.spec.in

gSOAP 2.7.9e is required.
Updated the spec's Summary for the main and audio-docs packages. 

------------------------------------------------------------------------
r903 | fabricecolin | 2007-08-04 13:24:05 +0800 (Sat, 04 Aug 2007) | 5 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/FilterWrapper.cpp
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/Index/pinot-index.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Replaced our naive Tokenizer class with Xapian 1.0 TermGenerator.
When removing common terms, make sure we remove as much as necessary and not
just the very first posting.
Dropped method setStemmingMode().

------------------------------------------------------------------------
r902 | fabricecolin | 2007-08-04 12:43:43 +0800 (Sat, 04 Aug 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/importDialog.cc

Clear the progress bar's text when importing.

------------------------------------------------------------------------
r901 | fabricecolin | 2007-08-04 01:53:16 +0800 (Sat, 04 Aug 2007) | 2 lines
Changed paths:
   M /trunk/Collect/NeonDownloader.cpp

Neon downloader had not been updated after the move to Dijon filters.

------------------------------------------------------------------------
r900 | fabricecolin | 2007-08-04 01:34:12 +0800 (Sat, 04 Aug 2007) | 3 lines
Changed paths:
   M /trunk/Search/Google/GAPIC.cpp
   M /trunk/Search/Google/GAPIClient.cpp
   M /trunk/Search/Google/GAPIClientLib.cpp
   M /trunk/Search/Google/GAPIGoogleSearchBindingProxy.h
   M /trunk/Search/Google/GAPIH.h
   M /trunk/Search/Google/GAPIStub.h
   M /trunk/Search/Google/GoogleSearch.h
   M /trunk/Search/SOAPEnvH.h
   M /trunk/Search/SOAPEnvStub.h
   M /trunk/Search/pinot-search.cpp

Regenerated these files with gSOAP 2.7.9e and fixed GAPIC.cpp manually as in
revision 189.

------------------------------------------------------------------------
r899 | fabricecolin | 2007-08-03 22:52:01 +0800 (Fri, 03 Aug 2007) | 3 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

Fixed bug that prevented from running queries that only define a min and/or
max date, and no query string.

------------------------------------------------------------------------
r898 | fabricecolin | 2007-08-03 22:51:09 +0800 (Fri, 03 Aug 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.cc

Combos shouldn't expand when the window they are in is enlarged.

------------------------------------------------------------------------
r897 | fabricecolin | 2007-08-01 21:55:07 +0800 (Wed, 01 Aug 2007) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

Prefix wasn't applied correctly in listDocumentsInDirectory().

------------------------------------------------------------------------
r896 | fabricecolin | 2007-08-01 21:51:01 +0800 (Wed, 01 Aug 2007) | 4 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml

New D-Bus method Reload asks the daemon to reload its configuration and restart
crawling and monitoring. The UI now uses this method instead of GetStatistics
when the Preferences box' OK button is pressed.

------------------------------------------------------------------------
r894 | fabricecolin | 2007-07-28 00:43:37 +0800 (Sat, 28 Jul 2007) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po

Updated with latest changes.

------------------------------------------------------------------------
r893 | fabricecolin | 2007-07-28 00:29:15 +0800 (Sat, 28 Jul 2007) | 3 lines
Changed paths:
   M /trunk/Index/FilterWrapper.cpp

Don't stop going through nested documents just before the current one needs to
be passed to another filter, and assign it the right MIME type.

------------------------------------------------------------------------
r892 | fabricecolin | 2007-07-27 23:07:52 +0800 (Fri, 27 Jul 2007) | 2 lines
Changed paths:
   M /trunk/README

When resetting the history, it's ~/.pinot/history-daemon that matters.

------------------------------------------------------------------------
r891 | fabricecolin | 2007-07-27 22:36:32 +0800 (Fri, 27 Jul 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotUtils.cpp
   M /trunk/UI/GTK2/src/propertiesDialog.cc

Modified get_column_height() hack to do without the font's height.

------------------------------------------------------------------------
r890 | fabricecolin | 2007-07-26 22:28:55 +0800 (Thu, 26 Jul 2007) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po

Final touch to 0.75.

------------------------------------------------------------------------
r889 | fabricecolin | 2007-07-26 22:24:35 +0800 (Thu, 26 Jul 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp

Another very minor mod.

------------------------------------------------------------------------
r888 | fabricecolin | 2007-07-26 21:31:23 +0800 (Thu, 26 Jul 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.h

Minor fix to get rid of compilation warning.

------------------------------------------------------------------------
r887 | fabricecolin | 2007-07-26 19:52:56 +0800 (Thu, 26 Jul 2007) | 2 lines
Changed paths:
   M /trunk/README

Removed reference to mbox configuration.

------------------------------------------------------------------------
r886 | fabricecolin | 2007-07-25 22:43:23 +0800 (Wed, 25 Jul 2007) | 4 lines
Changed paths:
   M /trunk/Index/pinot-index.1
   M /trunk/Makefile.am
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/configure.in
   M /trunk/pinot.spec.in

Set version number to 0.75. Indexes built with older versions will be upgraded.
New file ChangeLog-dijon is installed, Ask.src isn't any more.
Updated manual pages.

------------------------------------------------------------------------
r885 | fabricecolin | 2007-07-25 21:50:56 +0800 (Wed, 25 Jul 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexPage.cpp

Modified label for default query filter.

------------------------------------------------------------------------
r884 | fabricecolin | 2007-07-25 21:42:03 +0800 (Wed, 25 Jul 2007) | 2 lines
Changed paths:
   M /trunk/Search/QueryProperties.cpp
   M /trunk/Search/QueryProperties.h
   M /trunk/Search/XapianEngine.cpp

XapianEngine::runQuery() checks whether the query is empty.

------------------------------------------------------------------------
r883 | fabricecolin | 2007-07-25 21:40:02 +0800 (Wed, 25 Jul 2007) | 2 lines
Changed paths:
   D /trunk/Search/Plugins/Ask.src
   M /trunk/Search/Plugins/Exalead.src

Updated Exalead, removed Ask.

------------------------------------------------------------------------
r882 | fabricecolin | 2007-07-25 21:37:17 +0800 (Wed, 25 Jul 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

If a ListerThread fails, reset the m_browsingIndex flag.
Cosmetic mods to WorkerThreads.

------------------------------------------------------------------------
r881 | fabricecolin | 2007-07-24 21:34:36 +0800 (Tue, 24 Jul 2007) | 3 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po

Current translations, including updates from Balaam's Miracle (Dutch) and
_PN_boy (Portuguese).

------------------------------------------------------------------------
r880 | fabricecolin | 2007-07-24 21:00:35 +0800 (Tue, 24 Jul 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

No point translating the copyright string.

------------------------------------------------------------------------
r879 | fabricecolin | 2007-07-24 20:21:42 +0800 (Tue, 24 Jul 2007) | 2 lines
Changed paths:
   M /trunk/COPYING
   M /trunk/Index/pinot-index.cpp
   M /trunk/Search/pinot-search.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc

Clarify that the license is GPL v2 and update the FSF's address in COPYING ! ;-)

------------------------------------------------------------------------
r878 | fabricecolin | 2007-07-24 20:01:29 +0800 (Tue, 24 Jul 2007) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

Provide a field mapping to XapianQueryBuilder.

------------------------------------------------------------------------
r877 | fabricecolin | 2007-07-23 22:29:59 +0800 (Mon, 23 Jul 2007) | 2 lines
Changed paths:
   M /trunk/README
   M /trunk/pinot.spec.in

Upped requirements on Xapian and SQLite.

------------------------------------------------------------------------
r876 | fabricecolin | 2007-07-21 12:28:21 +0800 (Sat, 21 Jul 2007) | 2 lines
Changed paths:
   M /trunk/po/POTFILES.in

MboxHandler was removed.

------------------------------------------------------------------------
r875 | fabricecolin | 2007-07-21 12:26:57 +0800 (Sat, 21 Jul 2007) | 3 lines
Changed paths:
   M /trunk/README

Talk about mbox files are handled now, file types and external-filters.xml
as well as the new patterns list.

------------------------------------------------------------------------
r874 | fabricecolin | 2007-07-21 12:17:51 +0800 (Sat, 21 Jul 2007) | 7 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/Makefile.am
   D /trunk/UI/GTK2/src/MboxHandler.cpp
   D /trunk/UI/GTK2/src/MboxHandler.h
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.hh

Mbox files are no longer a special case, they don't need to be configured
separately. Any mbox file found during a crawl should be handled correctly;
same for any other file type that has sub-documents.
The file patterns list may be used as a blacklist or a whitelist, depending
on preferences.
Some other minor changes.

------------------------------------------------------------------------
r873 | fabricecolin | 2007-07-21 12:09:30 +0800 (Sat, 21 Jul 2007) | 3 lines
Changed paths:
   M /trunk/Search/AbstractGenerator.cpp
   M /trunk/Search/Google/Makefile.am
   M /trunk/Search/pinot-search.cpp

Pinot-search ouputs type and language too.
Some other minor changes.

------------------------------------------------------------------------
r872 | fabricecolin | 2007-07-21 12:06:17 +0800 (Sat, 21 Jul 2007) | 5 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/FilterWrapper.cpp
   M /trunk/Index/FilterWrapper.h
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/LanguageDetector.cpp
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/Index/pinot-index.cpp

A XFILE-prefixed term is added to local documents that are sub-documents of
another. FilterWrapper unindexes them whenever the top document is updated or
unindexed. IndexInterface's unindexDocuments() was extended accordingly.
Some other minor changes.

------------------------------------------------------------------------
r871 | fabricecolin | 2007-07-21 00:55:50 +0800 (Sat, 21 Jul 2007) | 2 lines
Changed paths:
   M /trunk/Utils/Timer.cpp
   M /trunk/Utils/Timer.h

Return milliseconds.

------------------------------------------------------------------------
r869 | fabricecolin | 2007-06-24 14:50:56 +0800 (Sun, 24 Jun 2007) | 2 lines
Changed paths:
   M /trunk/NEWS

Releasing 0.74 today.

------------------------------------------------------------------------
r868 | fabricecolin | 2007-06-23 13:49:29 +0800 (Sat, 23 Jun 2007) | 2 lines
Changed paths:
   M /trunk/README

Mention that downgrading to Xapian 0.9 requires resetting the indexes.

------------------------------------------------------------------------
r867 | fabricecolin | 2007-06-23 13:46:50 +0800 (Sat, 23 Jun 2007) | 3 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po

Updated translations.
Christian Dywan pointed out that make uninstall doesn't remove everything.

------------------------------------------------------------------------
r866 | fabricecolin | 2007-06-23 13:33:58 +0800 (Sat, 23 Jun 2007) | 2 lines
Changed paths:
   M /trunk/Index/pinot-index.1
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1

Updated man pages.

------------------------------------------------------------------------
r865 | fabricecolin | 2007-06-23 13:29:56 +0800 (Sat, 23 Jun 2007) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/configure.in

Set version to 0.74, replaced SEARCH_LTLIBRARIES hack with a conditional.

------------------------------------------------------------------------
r864 | fabricecolin | 2007-06-23 13:24:47 +0800 (Sat, 23 Jun 2007) | 2 lines
Changed paths:
   M /trunk/Utils/Timer.cpp

Minor mod.

------------------------------------------------------------------------
r863 | fabricecolin | 2007-06-21 19:41:53 +0800 (Thu, 21 Jun 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/statisticsDialog.cc

Synced with changes to PinotSettings.

------------------------------------------------------------------------
r862 | fabricecolin | 2007-06-21 19:40:28 +0800 (Thu, 21 Jun 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h

Full scans can be forced.

------------------------------------------------------------------------
r861 | fabricecolin | 2007-06-21 19:39:20 +0800 (Thu, 21 Jun 2007) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc

Location of history database is obtained with a getter to allow the daemon to
have its own.
If it doesn't exist at startup, a copy of the client's is made. 
The daemon has a --fullscan parameter that forces full scans.

------------------------------------------------------------------------
r860 | fabricecolin | 2007-06-19 22:09:58 +0800 (Tue, 19 Jun 2007) | 3 lines
Changed paths:
   M /trunk/Search/Google/GoogleAPIEngine.cpp
   M /trunk/Search/Makefile.am
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/QueryProperties.cpp
   M /trunk/Search/QueryProperties.h
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/pinot-search.cpp

Initial support for the Xesam Query and User Languages. Both only apply to
index queries.

------------------------------------------------------------------------
r859 | fabricecolin | 2007-06-14 21:28:11 +0800 (Thu, 14 Jun 2007) | 2 lines
Changed paths:
   A /trunk/Search/xesam
   A /trunk/Search/xesam/README

Placeholder for the Xesam parsers and related classes.

------------------------------------------------------------------------
r858 | fabricecolin | 2007-06-13 22:19:47 +0800 (Wed, 13 Jun 2007) | 2 lines
Changed paths:
   M /trunk/Search/SherlockParser.cpp
   M /trunk/TODO

Cleanup.

------------------------------------------------------------------------
r857 | fabricecolin | 2007-06-04 20:39:20 +0800 (Mon, 04 Jun 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/prefsDialog.cc

Removed unused includes.

------------------------------------------------------------------------
r856 | fabricecolin | 2007-06-02 12:40:05 +0800 (Sat, 02 Jun 2007) | 5 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

Adopted Xapian 1.0's indexing strategy to make the most of the QueryParser.
This means that Pinot 0.73 and older will give better results for those still
using Xapian 0.9.
See http://www.xapian.org/docs/termgenerator.html for details.

------------------------------------------------------------------------
r855 | fabricecolin | 2007-05-31 15:49:38 +0800 (Thu, 31 May 2007) | 5 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/Utils/Languages.cpp
   M /trunk/textcat_conf.txt

Hungarian, Romanian and Turkish are supported by Xapian 1.0's stemmers.
Libtextcat 2.2 has Language Models for them but not 3.0 yet.
Xapian::Stem is supposed to throw an exception for languages it doesn't know
about, so this change should be backward-compatible with Xapian < 1.0.

------------------------------------------------------------------------
r854 | fabricecolin | 2007-05-31 15:45:02 +0800 (Thu, 31 May 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/propertiesDialog.cc

The properties dialog shows the document ID in the title bar.

------------------------------------------------------------------------
r853 | fabricecolin | 2007-05-31 15:10:54 +0800 (Thu, 31 May 2007) | 3 lines
Changed paths:
   M /trunk/Makefile.am

Added uninstall-local target to remove files installed by install-data-local.
This omission was reported by Christian Dywan on May 14th.

------------------------------------------------------------------------
r852 | fabricecolin | 2007-05-29 19:35:47 +0800 (Tue, 29 May 2007) | 3 lines
Changed paths:
   M /trunk/README

Specify that gsoap is optional, just like the Google SOAP API.
As for openssh-askpass, it's only needed if _SSH_TUNNEL is defined.

------------------------------------------------------------------------
r851 | fabricecolin | 2007-05-29 19:10:54 +0800 (Tue, 29 May 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Fixed previous check-in.

------------------------------------------------------------------------
r850 | fabricecolin | 2007-05-27 15:34:57 +0800 (Sun, 27 May 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc

Set the index ID on results , when in listing mode, to ensure their properties
can be shown and edited properly.

------------------------------------------------------------------------
r849 | fabricecolin | 2007-05-26 20:26:07 +0800 (Sat, 26 May 2007) | 2 lines
Changed paths:
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Search/SherlockParser.h

Minor cleanup.

------------------------------------------------------------------------
r848 | fabricecolin | 2007-05-26 12:53:07 +0800 (Sat, 26 May 2007) | 7 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/IndexPage.h
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/ServerThreads.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

Both IndexBrowser and Querying threads can be used to populate index lists, the
latter relies on the search engine's total number of results estimate.
In IndexPage, the combo now shows all stored queries. They can be applied to the
current index just like labels could previously. Stored queries maximum number
of results is then ignored.
Synced with changes made to Search.

------------------------------------------------------------------------
r847 | fabricecolin | 2007-05-26 12:21:17 +0800 (Sat, 26 May 2007) | 4 lines
Changed paths:
   M /trunk/Search/Google/GoogleAPIEngine.cpp
   M /trunk/Search/Google/GoogleAPIEngine.h
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/PluginWebEngine.h
   M /trunk/Search/SearchEngineInterface.cpp
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Search/WebEngine.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h
   M /trunk/Search/pinot-search.cpp

A start document can be passed to runQuery().
Support for total number of results estimates.
Removed some cruft.

------------------------------------------------------------------------
r845 | fabricecolin | 2007-05-23 21:31:04 +0800 (Wed, 23 May 2007) | 2 lines
Changed paths:
   M /trunk/NEWS

Forgot to mention a few things.

------------------------------------------------------------------------
r844 | fabricecolin | 2007-05-23 21:25:28 +0800 (Wed, 23 May 2007) | 2 lines
Changed paths:
   M /trunk/Index/pinot-index.1
   M /trunk/NEWS
   M /trunk/Search/pinot-search.1
   M /trunk/TODO
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1

Releasing 0.73.

------------------------------------------------------------------------
r843 | fabricecolin | 2007-05-22 19:53:33 +0800 (Tue, 22 May 2007) | 2 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/NEWS
   M /trunk/README
   M /trunk/configure.in
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po

0.73 release is close...

------------------------------------------------------------------------
r842 | fabricecolin | 2007-05-22 19:18:08 +0800 (Tue, 22 May 2007) | 2 lines
Changed paths:
   M /trunk/TODO

-3 +3 items.

------------------------------------------------------------------------
r841 | fabricecolin | 2007-05-22 19:16:03 +0800 (Tue, 22 May 2007) | 3 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

Stemming strategy was messed up.
Set FLAG_PURE_NOT if Xapian >= 1.0.

------------------------------------------------------------------------
r840 | fabricecolin | 2007-05-22 19:13:46 +0800 (Tue, 22 May 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Look out for ultra-rare case when SQLite fails to delete an item and
ActionQueue::popItem() returns the same thing repeatedly. The root cause is
unknown.

------------------------------------------------------------------------
r839 | fabricecolin | 2007-05-19 18:54:06 +0800 (Sat, 19 May 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/ServerThreads.h

Only full scans check for files that have been deleted while the daemon wasn't
running, and they should now happen roughly one time out of three.
Refactored DBusServletThread a bit, added method runQuery().

------------------------------------------------------------------------
r838 | fabricecolin | 2007-05-18 21:52:23 +0800 (Fri, 18 May 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot.cc

Recommend updating My Web Pages is the index's format is obsolete or it's older
than PINOT_INDEX_MIN_VERSION.

------------------------------------------------------------------------
r837 | fabricecolin | 2007-05-18 21:50:26 +0800 (Fri, 18 May 2007) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

When the index has to be replaced, close and overwrite it instead of deleting
all documents.
Do an upgrade if the index is older than PINOT_INDEX_MIN_VERSION or its format
has been obsoleted.

------------------------------------------------------------------------
r836 | fabricecolin | 2007-05-18 21:45:32 +0800 (Fri, 18 May 2007) | 3 lines
Changed paths:
   M /trunk/SQL/ActionQueue.cpp
   M /trunk/SQL/ActionQueue.h
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/CrawlHistory.h
   M /trunk/SQL/QueryHistory.cpp
   M /trunk/SQL/QueryHistory.h
   M /trunk/SQL/SQLiteBase.cpp
   M /trunk/SQL/SQLiteBase.h
   M /trunk/SQL/ViewHistory.cpp
   M /trunk/SQL/ViewHistory.h

Let the sub-class decide when to open the database.
New method CrawlHistory::updateItems().

------------------------------------------------------------------------
r835 | fabricecolin | 2007-05-18 21:42:48 +0800 (Fri, 18 May 2007) | 2 lines
Changed paths:
   M /trunk/Index/XapianDatabase.cpp

Minor change.

------------------------------------------------------------------------
r834 | fabricecolin | 2007-05-12 11:49:33 +0800 (Sat, 12 May 2007) | 4 lines
Changed paths:
   M /trunk/Index/XapianDatabase.cpp
   M /trunk/Index/XapianDatabase.h
   M /trunk/Index/XapianDatabaseFactory.cpp
   M /trunk/Index/XapianDatabaseFactory.h

Allow overwriting the index.
Preparing for Xapian 1.0 : upon DatabaseVersionError, overwrite the database
and let the app know so that it can do a full reindexing.

------------------------------------------------------------------------
r833 | fabricecolin | 2007-05-12 11:46:50 +0800 (Sat, 12 May 2007) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

Preparing for Xapian 1.0 : get_errno() is deprecated and stem_word() is gone.

------------------------------------------------------------------------
r832 | fabricecolin | 2007-05-07 21:54:45 +0800 (Mon, 07 May 2007) | 3 lines
Changed paths:
   M /trunk/configure.in

Define PINOT_INDEX_MIN_VERSION, the version number below which an index upgrade
should be performed.

------------------------------------------------------------------------
r831 | fabricecolin | 2007-05-06 10:59:59 +0800 (Sun, 06 May 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot.cc

Recommend updating documents in My Web Pages only if that index is not empty.

------------------------------------------------------------------------
r830 | fabricecolin | 2007-05-06 10:58:49 +0800 (Sun, 06 May 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp

In flat mode, don't attempt updating the parent group, there isn't any. This
fixes a crash when unindexing documents.
This bug was reported by Marco <visik7 at tin dot it>.

------------------------------------------------------------------------
r829 | fabricecolin | 2007-05-06 10:15:53 +0800 (Sun, 06 May 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/prefsDialog.cc

The Indexing tab has moved to fourth position.

------------------------------------------------------------------------
r827 | fabricecolin | 2007-04-28 10:32:44 +0800 (Sat, 28 Apr 2007) | 2 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/NEWS

Releasing 0.72 today.

------------------------------------------------------------------------
r826 | fabricecolin | 2007-04-28 09:58:35 +0800 (Sat, 28 Apr 2007) | 2 lines
Changed paths:
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po

Synced with current source.

------------------------------------------------------------------------
r825 | fabricecolin | 2007-04-27 23:52:41 +0800 (Fri, 27 Apr 2007) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Sometimes when the daemon is started via D-Bus activation and spends too long
upgrading the index, it receives a SIGKILL... I have moved the upgrade to
DaemonState::start() so that it happens after D-Bus is initialized and before
the main loop is run. This seems to help.

------------------------------------------------------------------------
r824 | fabricecolin | 2007-04-27 23:48:25 +0800 (Fri, 27 Apr 2007) | 2 lines
Changed paths:
   M /trunk/Tokenize/Makefile.am

Better have Filter.cc in the libraries source lists.

------------------------------------------------------------------------
r823 | fabricecolin | 2007-04-27 22:00:50 +0800 (Fri, 27 Apr 2007) | 2 lines
Changed paths:
   M /trunk/Index/pinot-index.1
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1

Updated man pages.

------------------------------------------------------------------------
r822 | fabricecolin | 2007-04-27 21:35:45 +0800 (Fri, 27 Apr 2007) | 2 lines
Changed paths:
   M /trunk/TODO

Update.

------------------------------------------------------------------------
r821 | fabricecolin | 2007-04-26 22:27:30 +0800 (Thu, 26 Apr 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/configure.in

Upped versio number to 0.72.
Older versions of My Documents are upgraded by the daemon.

------------------------------------------------------------------------
r820 | fabricecolin | 2007-04-26 22:25:41 +0800 (Thu, 26 Apr 2007) | 2 lines
Changed paths:
   M /trunk/README

Explain saving of results.

------------------------------------------------------------------------
r819 | fabricecolin | 2007-04-26 21:39:47 +0800 (Thu, 26 Apr 2007) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

Add term XDIR:/ to documents so that searches can be restricted with "dir:/".

------------------------------------------------------------------------
r818 | fabricecolin | 2007-04-26 19:51:58 +0800 (Thu, 26 Apr 2007) | 3 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/po/POTFILES.in
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po

Updated de (Christian Dywan) and it (Vincenzo Consales) translations.
IndexTree no longer exists.

------------------------------------------------------------------------
r817 | fabricecolin | 2007-04-26 19:37:20 +0800 (Thu, 26 Apr 2007) | 2 lines
Changed paths:
   M /trunk/Utils/xdgmime/ChangeLog
   M /trunk/Utils/xdgmime/xdgmimeglob.c

Synced with gtk+'s xdgmime.

------------------------------------------------------------------------
r816 | fabricecolin | 2007-04-26 19:34:21 +0800 (Thu, 26 Apr 2007) | 2 lines
Changed paths:
   M /trunk/Tokenize/FilterUtils.cpp

Cosmetic change.

------------------------------------------------------------------------
r815 | fabricecolin | 2007-04-26 19:33:08 +0800 (Thu, 26 Apr 2007) | 6 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

Synced with changes made to ResultsTree/IndexTree.
Implemented results export in on_exportresults_activate().
In view_documents(), open HTTP/HTTPS documents with the default browser. This
fixes a problem where documents identified as "application/x-php" were open
with a text editor.

------------------------------------------------------------------------
r814 | fabricecolin | 2007-04-26 19:28:12 +0800 (Thu, 26 Apr 2007) | 2 lines
Changed paths:
   D /trunk/UI/GTK2/src/IndexTree.cpp
   D /trunk/UI/GTK2/src/IndexTree.h
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h

Removed IndexTree and IndexModelColumns classes.

------------------------------------------------------------------------
r813 | fabricecolin | 2007-04-26 19:26:36 +0800 (Thu, 26 Apr 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh

Added Save As menuitem under Results.

------------------------------------------------------------------------
r812 | fabricecolin | 2007-04-26 19:22:13 +0800 (Thu, 26 Apr 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/IndexPage.h

Use ResultsTree, not IndexTree.

------------------------------------------------------------------------
r811 | fabricecolin | 2007-04-26 19:20:09 +0800 (Thu, 26 Apr 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h

Several small changes to allow using this class as a replacement for IndexTree.

------------------------------------------------------------------------
r810 | fabricecolin | 2007-04-26 19:16:33 +0800 (Thu, 26 Apr 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotUtils.cpp
   M /trunk/UI/GTK2/src/PinotUtils.h
   M /trunk/UI/GTK2/src/indexDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.cc

Modified select_file_name() so that prepare_file_chooser() is more useful.

------------------------------------------------------------------------
r809 | fabricecolin | 2007-04-26 19:13:15 +0800 (Thu, 26 Apr 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/EnginesTree.h

Renamed the signal getter method.

------------------------------------------------------------------------
r808 | fabricecolin | 2007-04-26 19:09:32 +0800 (Thu, 26 Apr 2007) | 2 lines
Changed paths:
   M /trunk/Utils/StringManip.cpp

Minor changes.

------------------------------------------------------------------------
r807 | fabricecolin | 2007-04-24 22:30:38 +0800 (Tue, 24 Apr 2007) | 5 lines
Changed paths:
   M /trunk/Search/Makefile.am
   A /trunk/Search/ResultsExporter.cpp
   A /trunk/Search/ResultsExporter.h
   M /trunk/Search/SearchEngineFactory.cpp
   M /trunk/Search/SearchEngineFactory.h
   M /trunk/Search/pinot-search.cpp

Implemented results export, to either CSV (semi-colon) or OpenSearch response
XML/RSS. pinot-search cai either save the results to file or output them.
SearchEngineFactory has a new utility method that returns a plugin's engine
name.

------------------------------------------------------------------------
r806 | fabricecolin | 2007-04-16 21:28:52 +0800 (Mon, 16 Apr 2007) | 2 lines
Changed paths:
   M /trunk/Tokenize/Makefile.am

Added Filter.cc to sources list, as found in revision 26 of filters.

------------------------------------------------------------------------
r805 | fabricecolin | 2007-04-10 22:16:33 +0800 (Tue, 10 Apr 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/IndexPage.h
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/IndexTree.h
   M /trunk/UI/GTK2/src/MboxHandler.h
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/OnDiskHandler.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

Phased out Result and IndexedDocument classes.

------------------------------------------------------------------------
r804 | fabricecolin | 2007-04-09 22:34:57 +0800 (Mon, 09 Apr 2007) | 2 lines
Changed paths:
   M /trunk/SQL/QueryHistory.cpp
   M /trunk/SQL/QueryHistory.h

Result class was dropped.

------------------------------------------------------------------------
r803 | fabricecolin | 2007-04-09 20:49:10 +0800 (Mon, 09 Apr 2007) | 3 lines
Changed paths:
   M /trunk/Monitor/MonitorHandler.h
   M /trunk/Search/Google/GoogleAPIEngine.cpp
   M /trunk/Search/OpenSearchParser.cpp
   M /trunk/Search/OpenSearchParser.h
   M /trunk/Search/PluginParsers.h
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/QueryProperties.h
   M /trunk/Search/SearchEngineInterface.cpp
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Search/SherlockParser.h
   M /trunk/Search/WebEngine.cpp
   M /trunk/Search/WebEngine.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h
   M /trunk/Search/pinot-search.cpp
   M /trunk/Utils/DocumentInfo.cpp
   M /trunk/Utils/DocumentInfo.h
   D /trunk/Utils/IndexedDocument.cpp
   D /trunk/Utils/IndexedDocument.h
   M /trunk/Utils/Makefile.am
   D /trunk/Utils/Result.cpp
   D /trunk/Utils/Result.h

Merged Result and IndexedDocument back into DocumentInfo.
In XapianEngine, generate an abstract with the terms matched by the document.

------------------------------------------------------------------------
r802 | fabricecolin | 2007-04-04 21:32:31 +0800 (Wed, 04 Apr 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/mainWindow.cc

Removed some fat off ResultsTree.

------------------------------------------------------------------------
r801 | fabricecolin | 2007-04-03 23:05:25 +0800 (Tue, 03 Apr 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp

Can remove deb from the blacklist since it's in the external filter's
configuration file.

------------------------------------------------------------------------
r800 | fabricecolin | 2007-03-31 17:24:27 +0800 (Sat, 31 Mar 2007) | 2 lines
Changed paths:
   M /trunk/NEWS

I forgot to list two new features... Never mind.

------------------------------------------------------------------------
r798 | fabricecolin | 2007-03-31 11:30:44 +0800 (Sat, 31 Mar 2007) | 2 lines
Changed paths:
   M /trunk/NEWS

Changes since previous release.

------------------------------------------------------------------------
r797 | fabricecolin | 2007-03-29 21:25:54 +0800 (Thu, 29 Mar 2007) | 2 lines
Changed paths:
   M /trunk/Tokenize/FilterUtils.cpp

More verbose DEBUG output.

------------------------------------------------------------------------
r796 | fabricecolin | 2007-03-29 21:25:12 +0800 (Thu, 29 Mar 2007) | 2 lines
Changed paths:
   M /trunk/TODO

Removed items that were implemented recently and added a whole lot more...

------------------------------------------------------------------------
r795 | fabricecolin | 2007-03-29 21:19:08 +0800 (Thu, 29 Mar 2007) | 2 lines
Changed paths:
   M /trunk/README

Details upgrading to 0.71. Some minor changes.

------------------------------------------------------------------------
r794 | fabricecolin | 2007-03-29 21:13:24 +0800 (Thu, 29 Mar 2007) | 2 lines
Changed paths:
   M /trunk/Utils/xdgmime/ChangeLog
   M /trunk/Utils/xdgmime/xdgmimecache.c

Sync with current gtk+ source.

------------------------------------------------------------------------
r793 | fabricecolin | 2007-03-29 19:07:48 +0800 (Thu, 29 Mar 2007) | 2 lines
Changed paths:
   M /trunk/pinot.desktop

Extra translations.

------------------------------------------------------------------------
r792 | fabricecolin | 2007-03-25 23:05:57 +0800 (Sun, 25 Mar 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ServerThreads.cpp

The D-Bus interface description file was looked for in the wrong directory.

------------------------------------------------------------------------
r791 | fabricecolin | 2007-03-25 15:33:34 +0800 (Sun, 25 Mar 2007) | 2 lines
Changed paths:
   M /trunk/po/de.po
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/it.po
   M /trunk/po/nl.po
   M /trunk/po/pt.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po

Synced po files.

------------------------------------------------------------------------
r790 | fabricecolin | 2007-03-24 15:28:21 +0800 (Sat, 24 Mar 2007) | 4 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/configure.in
   M /trunk/pinot.spec.in
   A /trunk/po/de.po
   A /trunk/po/it.po
   A /trunk/po/pt.po

New German, Italian and Portuguese translations by by Christian Dywan, Michele
Angrisano and _PN_boy respectively.
Bumped version number.

------------------------------------------------------------------------
r789 | fabricecolin | 2007-03-24 15:04:10 +0800 (Sat, 24 Mar 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/PinotUtils.cpp
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/queryDialog.cc

Minor changes : check RefPtr's and complain if XML file cannot be found when
Introspect is received.

------------------------------------------------------------------------
r788 | fabricecolin | 2007-03-24 12:18:00 +0800 (Sat, 24 Mar 2007) | 6 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc

The daemon checks the version of My Documents and performs an upgrade if
necessary. The D-Bus connection is not explicitely closed at exit time in case
a servlet thread is still running.
The UI also checks the version of My Web Pages but only advises to update all
documents.

------------------------------------------------------------------------
r787 | fabricecolin | 2007-03-24 12:14:35 +0800 (Sat, 24 Mar 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotUtils.cpp

Get the file chooser to show hidden files.

------------------------------------------------------------------------
r786 | fabricecolin | 2007-03-24 12:13:14 +0800 (Sat, 24 Mar 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

All worker threads are non-joinable. DaemonState doesn't delete the handlers
when destroyed in case they are still being used. Since it's destroyed only
when the program exits, it should be okay.

------------------------------------------------------------------------
r785 | fabricecolin | 2007-03-23 23:15:03 +0800 (Fri, 23 Mar 2007) | 4 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

Added versioning.
New method unindexAllDocuments() can reset the whole index.
Some cleanup.

------------------------------------------------------------------------
r784 | fabricecolin | 2007-03-23 21:59:14 +0800 (Fri, 23 Mar 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade

Reworked Network tab layout.

------------------------------------------------------------------------
r783 | fabricecolin | 2007-03-23 21:57:47 +0800 (Fri, 23 Mar 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.hh

Made proxy type a string so that it can be passed as is to the downloaders.
Network tab has same layout as indexDialog, and fields are disabled when direct
connection is activated.

------------------------------------------------------------------------
r782 | fabricecolin | 2007-03-23 21:33:06 +0800 (Fri, 23 Mar 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/IndexPage.h
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/importDialog_glade.cc
   M /trunk/UI/GTK2/src/importDialog_glade.hh
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/propertiesDialog.hh
   M /trunk/UI/GTK2/src/propertiesDialog_glade.cc
   M /trunk/UI/GTK2/src/propertiesDialog_glade.hh
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.hh
   M /trunk/UI/GTK2/src/queryDialog_glade.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.hh

Replaced ComboBox + ListStore with ComboBoxText.

------------------------------------------------------------------------
r781 | fabricecolin | 2007-03-22 20:45:56 +0800 (Thu, 22 Mar 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/indexDialog.cc
   M /trunk/UI/GTK2/src/indexDialog.hh
   M /trunk/UI/GTK2/src/indexDialog_glade.cc
   M /trunk/UI/GTK2/src/indexDialog_glade.hh
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.hh

Added Network tab to Preferences box for configuring the proxy.
Both indexDialog and prefsDialog use ComboBoxText.

------------------------------------------------------------------------
r780 | fabricecolin | 2007-03-22 19:02:19 +0800 (Thu, 22 Mar 2007) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/Utils/MIMEScanner.cpp

Tweaked DEBUG output.

------------------------------------------------------------------------
r779 | fabricecolin | 2007-03-22 19:00:20 +0800 (Thu, 22 Mar 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h

Documents MIME type was lost by the results tree.

------------------------------------------------------------------------
r778 | fabricecolin | 2007-03-22 18:56:57 +0800 (Thu, 22 Mar 2007) | 2 lines
Changed paths:
   M /trunk/Collect/FileCollector.cpp
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/Utils/Document.cpp

Directories are indexed as separate documents.

------------------------------------------------------------------------
r777 | fabricecolin | 2007-03-22 01:15:31 +0800 (Thu, 22 Mar 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/scripts/python/pinot-live.py

Updated deskbar handler to cope with new GetDocumentInfo. Use
deskbar.Utils.url_show() if available. Also added license and copyright notices.
D-Bus daemon implements org.freedesktop.DBus.Introspectable.Introspect.

------------------------------------------------------------------------
r776 | fabricecolin | 2007-03-20 19:46:40 +0800 (Tue, 20 Mar 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ServerThreads.cpp

MonitorThread::processEvents() didn't skip dotfiles and blacklisted files.

------------------------------------------------------------------------
r775 | fabricecolin | 2007-03-20 19:42:22 +0800 (Tue, 20 Mar 2007) | 2 lines
Changed paths:
   M /trunk/Search/SearchEngineInterface.cpp
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Search/WebEngine.cpp
   M /trunk/Search/WebEngine.h
   M /trunk/Search/pinot-search.1
   M /trunk/Search/pinot-search.cpp

Changes to allow configuring the proxy to use for Web searches.

------------------------------------------------------------------------
r774 | fabricecolin | 2007-03-20 19:39:35 +0800 (Tue, 20 Mar 2007) | 3 lines
Changed paths:
   M /trunk/Index/pinot-index.1
   M /trunk/Index/pinot-index.cpp

Proxy can be configured with "-a address -p port -t type".
Check and index no longer require an URL each.

------------------------------------------------------------------------
r773 | fabricecolin | 2007-03-20 18:50:45 +0800 (Tue, 20 Mar 2007) | 5 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/Monitor/MonitorEvent.cpp
   M /trunk/Monitor/MonitorEvent.h

Don't skip CREATE events on files !
MOVED_FROM events for which we didn't receive a MOVED_TO (because eg, the file
was moved to an unmonitored location on the same filesystem) are expired after
a minute and become DELETE events.

------------------------------------------------------------------------
r772 | fabricecolin | 2007-03-19 21:27:07 +0800 (Mon, 19 Mar 2007) | 3 lines
Changed paths:
   M /trunk/Collect/CurlDownloader.cpp
   M /trunk/Collect/CurlDownloader.h
   M /trunk/Collect/DownloaderInterface.h
   M /trunk/Collect/NeonDownloader.cpp
   M /trunk/Collect/NeonDownloader.h

Added settings for proxy address, port and type (not applicable to Neon).
Note that curl should automatically use the *_proxy environment variables.

------------------------------------------------------------------------
r771 | fabricecolin | 2007-03-18 20:47:08 +0800 (Sun, 18 Mar 2007) | 2 lines
Changed paths:
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/CrawlHistory.h

Method getSourceItems() can return items newer than a given date.

------------------------------------------------------------------------
r770 | fabricecolin | 2007-03-18 16:50:01 +0800 (Sun, 18 Mar 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/statisticsDialog.cc
   M /trunk/UI/GTK2/src/statisticsDialog.hh

Status window is refreshed every 5 seconds.

------------------------------------------------------------------------
r769 | fabricecolin | 2007-03-17 21:08:04 +0800 (Sat, 17 Mar 2007) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   D /trunk/UI/GTK2/pinot.png
   D /trunk/UI/GTK2/pinot.xcf
   A /trunk/UI/icons
   A /trunk/UI/icons/16x16
   A /trunk/UI/icons/16x16/pinot.png
   A /trunk/UI/icons/22x22
   A /trunk/UI/icons/22x22/pinot.png
   A /trunk/UI/icons/24x24
   A /trunk/UI/icons/24x24/pinot.png
   A /trunk/UI/icons/32x32
   A /trunk/UI/icons/32x32/pinot.png
   A /trunk/UI/icons/48x48
   A /trunk/UI/icons/48x48/pinot.png (from /trunk/UI/GTK2/pinot.png:765)
   A /trunk/UI/icons/pinot.xcf (from /trunk/UI/GTK2/pinot.xcf:765)
   A /trunk/UI/icons/scalable
   M /trunk/pinot.spec.in

Icons in several sizes.

------------------------------------------------------------------------
r768 | fabricecolin | 2007-03-17 11:12:40 +0800 (Sat, 17 Mar 2007) | 5 lines
Changed paths:
   M /trunk/Index/XapianDatabase.cpp
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/XapianEngine.cpp

Limit length of terms before prefix is applied so that search-time pre-processing
doesn't have to bother about prefixes when dealing with long terms.
Labels were not always length limited.
When pre-processing filters, transform them as done at indexing time.

------------------------------------------------------------------------
r767 | fabricecolin | 2007-03-16 23:45:56 +0800 (Fri, 16 Mar 2007) | 8 lines
Changed paths:
   M /trunk/Index/XapianDatabase.cpp
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/XapianEngine.cpp

In XapianIndex, if a prefix is to be used for terms use the same for capitalized
terms, so that they are not confused with unprefixed terms.
Escape label, file name, directory name and URL terms since they may contain
spaces. On the search side, pre-process the query string and escape all filter
values set between double-quotes.
Reindexing is required for these changes to work properly.
Some fixes to XapianDatabase.

------------------------------------------------------------------------
r766 | fabricecolin | 2007-03-16 23:39:33 +0800 (Fri, 16 Mar 2007) | 3 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml

On second thought, better use the same DocumentInfo fields as the document data
fields, at least for the time being.

------------------------------------------------------------------------
r765 | fabricecolin | 2007-03-15 21:30:07 +0800 (Thu, 15 Mar 2007) | 2 lines
Changed paths:
   M /trunk/README

Somewhat better documentation.

------------------------------------------------------------------------
r764 | fabricecolin | 2007-03-15 21:04:08 +0800 (Thu, 15 Mar 2007) | 4 lines
Changed paths:
   M /trunk/Utils/CommandLine.cpp
   M /trunk/Utils/MIMEScanner.cpp

If a desktop file has an equal sign in Exec, run the command with sh -c as
system() would do because we don't have an easy way to find out where the equal
sign is.

------------------------------------------------------------------------
r763 | fabricecolin | 2007-03-15 20:42:24 +0800 (Thu, 15 Mar 2007) | 4 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml
   M /trunk/UI/GTK2/src/pinot.cc

Changed signatures of DBus methods Get and SetDocumentInfo to allow passing
any metadata field.
Define DBUS_API_SUBJECT_TO_CHANGE only if DBus version is < 1.0.

------------------------------------------------------------------------
r762 | fabricecolin | 2007-03-12 22:41:30 +0800 (Mon, 12 Mar 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot.cc

Don't bother with our little locale hack if it's already UTF8.

------------------------------------------------------------------------
r761 | fabricecolin | 2007-03-12 22:33:22 +0800 (Mon, 12 Mar 2007) | 2 lines
Changed paths:
   M /trunk/Collect/MboxCollector.cpp

Set property OPERATING_MODE to "view".

------------------------------------------------------------------------
r760 | fabricecolin | 2007-03-12 20:49:05 +0800 (Mon, 12 Mar 2007) | 2 lines
Changed paths:
   M /trunk/Collect/DownloaderFactory.cpp
   M /trunk/Collect/Makefile.am
   D /trunk/Collect/XapianCollector.cpp
   D /trunk/Collect/XapianCollector.h
   D /trunk/Collect/pinot-collect.1
   D /trunk/Collect/pinot-collect.cpp
   M /trunk/Makefile.am
   M /trunk/pinot.spec.in

XapianCollector is no longer needed. Removed pinot-collect.

------------------------------------------------------------------------
r759 | fabricecolin | 2007-03-10 15:09:30 +0800 (Sat, 10 Mar 2007) | 2 lines
Changed paths:
   M /trunk/Index/pinot-index.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc

Initialize HtmlFilter before loading the filters.

------------------------------------------------------------------------
r758 | fabricecolin | 2007-03-08 20:58:59 +0800 (Thu, 08 Mar 2007) | 2 lines
Changed paths:
   M /trunk/TODO

Keep track of stuff I told Reuben I would do :-)

------------------------------------------------------------------------
r757 | fabricecolin | 2007-03-07 23:08:04 +0800 (Wed, 07 Mar 2007) | 4 lines
Changed paths:
   M /trunk/Collect/DownloaderInterface.cpp
   M /trunk/configure.in

Curl might not have been built against OpenSSL so check the output of
'curl-config --features' and act accordingly.
This was reported by Reuben Thomas.

------------------------------------------------------------------------
r755 | fabricecolin | 2007-03-06 18:24:42 +0800 (Tue, 06 Mar 2007) | 3 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README

Describe work-around for threading problem on FreeBSD.
Release date is now today ;-)

------------------------------------------------------------------------
r754 | fabricecolin | 2007-03-05 19:45:02 +0800 (Mon, 05 Mar 2007) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/nl.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po

Setting release date to today.

------------------------------------------------------------------------
r753 | fabricecolin | 2007-03-05 19:39:14 +0800 (Mon, 05 Mar 2007) | 2 lines
Changed paths:
   M /trunk/TODO

Cleanup.

------------------------------------------------------------------------
r752 | fabricecolin | 2007-03-05 19:28:01 +0800 (Mon, 05 Mar 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/configure.in

Make sure Glib::thread_init() is called before any other glib function.
Run the dbus version number through awk to make it more useful.
Call dbus_threads_init_default() just in case if dbus >= 1.0 is available.

------------------------------------------------------------------------
r751 | fabricecolin | 2007-03-01 21:52:12 +0800 (Thu, 01 Mar 2007) | 2 lines
Changed paths:
   M /trunk/Collect/pinot-collect.1
   M /trunk/Index/pinot-index.1
   M /trunk/Search/pinot-search.1
   M /trunk/Search/pinot-search.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1

Updated manual pages.

------------------------------------------------------------------------
r750 | fabricecolin | 2007-02-28 21:39:02 +0800 (Wed, 28 Feb 2007) | 4 lines
Changed paths:
   M /trunk/Utils/MIMEScanner.cpp

Workaround broken desktop files that set envvars in the Exec field, for instance
"PATH=... cmd_line", even though the spec says the equal sign is not allowed.
Thanks to Thierry Thomas for reporting this.

------------------------------------------------------------------------
r749 | fabricecolin | 2007-02-27 18:57:02 +0800 (Tue, 27 Feb 2007) | 3 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Utils/TimeConverter.cpp

Fixed stupid time conversion error that would sometimes prevent date ranges from
being applied.

------------------------------------------------------------------------
r748 | fabricecolin | 2007-02-26 21:21:37 +0800 (Mon, 26 Feb 2007) | 2 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/NEWS
   M /trunk/README
   M /trunk/configure.in
   M /trunk/pinot.desktop
   M /trunk/pinot.spec.in

Preparing for 0.70 release.

------------------------------------------------------------------------
r747 | fabricecolin | 2007-02-26 21:14:09 +0800 (Mon, 26 Feb 2007) | 2 lines
Changed paths:
   M /trunk/po/es.po

Updates by Gar Bage.

------------------------------------------------------------------------
r746 | fabricecolin | 2007-02-26 21:09:11 +0800 (Mon, 26 Feb 2007) | 2 lines
Changed paths:
   M /trunk/TODO

+8 items.

------------------------------------------------------------------------
r745 | fabricecolin | 2007-02-24 16:55:12 +0800 (Sat, 24 Feb 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Query results were not labeled because getIndexId() was called on the location
instead of the name of internal indices.

------------------------------------------------------------------------
r744 | fabricecolin | 2007-02-24 16:08:39 +0800 (Sat, 24 Feb 2007) | 5 lines
Changed paths:
   M /trunk/Collect/MboxCollector.cpp
   M /trunk/Index/FilterWrapper.cpp
   M /trunk/Index/FilterWrapper.h
   M /trunk/Tokenize/FilterUtils.cpp

FilterUtils::feedFilter() can save data to a temporary file as a last resort.
Mailbox documents shouldn't be treated like files.
FilterWrapper preserves the MIME type of documents before transformation.
MboxCollector first feeds the mbox file, then skips to the necessary offset.

------------------------------------------------------------------------
r743 | fabricecolin | 2007-02-24 15:07:01 +0800 (Sat, 24 Feb 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Skip download if the filter can be directly pointed at the document.

------------------------------------------------------------------------
r742 | fabricecolin | 2007-02-23 23:19:48 +0800 (Fri, 23 Feb 2007) | 4 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/CrawlHistory.h
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Overloaded IndexInterface::unindexDocuments() and added deleteItems() to
CrawlHistory to be able to remove all documents under a given directory in one
fell swoop.

------------------------------------------------------------------------
r741 | fabricecolin | 2007-02-23 21:30:13 +0800 (Fri, 23 Feb 2007) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

Not finding any result is okay, queryDatabase() shouldn't return false.

------------------------------------------------------------------------
r740 | fabricecolin | 2007-02-22 23:01:22 +0800 (Thu, 22 Feb 2007) | 2 lines
Changed paths:
   M /trunk/Utils/xdgmime/xdgmimemagic.c

Synced with gtk+/gtk/xdgmime.

------------------------------------------------------------------------
r739 | fabricecolin | 2007-02-22 22:57:10 +0800 (Thu, 22 Feb 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml

Warning notice about the changing interface.

------------------------------------------------------------------------
r738 | fabricecolin | 2007-02-22 22:56:33 +0800 (Thu, 22 Feb 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp

Removed extensions handled by ExternalFilter from default blacklist.

------------------------------------------------------------------------
r737 | fabricecolin | 2007-02-22 22:53:39 +0800 (Thu, 22 Feb 2007) | 2 lines
Changed paths:
   M /trunk/Utils/Document.cpp
   M /trunk/Utils/Document.h

Method resetData().

------------------------------------------------------------------------
r736 | fabricecolin | 2007-02-22 22:53:03 +0800 (Thu, 22 Feb 2007) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

Comment to remind myself I could use enquire.get_matching_terms_begin() here.

------------------------------------------------------------------------
r735 | fabricecolin | 2007-02-22 22:05:02 +0800 (Thu, 22 Feb 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/statisticsDialog.cc

Index stats labels were swapped.

------------------------------------------------------------------------
r734 | fabricecolin | 2007-02-22 20:58:35 +0800 (Thu, 22 Feb 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp

Fixed construction of Results.

------------------------------------------------------------------------
r733 | fabricecolin | 2007-02-21 22:39:05 +0800 (Wed, 21 Feb 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Look for the robots directive.

------------------------------------------------------------------------
r732 | fabricecolin | 2007-02-21 22:37:48 +0800 (Wed, 21 Feb 2007) | 2 lines
Changed paths:
   M /trunk/Tokenize/FilterUtils.cpp

Don't fail if the file is empty.

------------------------------------------------------------------------
r731 | fabricecolin | 2007-02-21 22:34:01 +0800 (Wed, 21 Feb 2007) | 2 lines
Changed paths:
   M /trunk/Index/FilterWrapper.cpp
   M /trunk/Index/FilterWrapper.h

Handles unsupported types.

------------------------------------------------------------------------
r730 | fabricecolin | 2007-02-20 19:38:06 +0800 (Tue, 20 Feb 2007) | 2 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/NEWS
   M /trunk/TODO

State update.

------------------------------------------------------------------------
r729 | fabricecolin | 2007-02-20 14:09:21 +0800 (Tue, 20 Feb 2007) | 2 lines
Changed paths:
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/nl.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po

Commit current po files before I import them into Rosetta.

------------------------------------------------------------------------
r728 | fabricecolin | 2007-02-20 14:03:43 +0800 (Tue, 20 Feb 2007) | 2 lines
Changed paths:
   M /trunk/po/sv.po

Checking in Daniel's latest translations, exported from Rosetta today.

------------------------------------------------------------------------
r727 | fabricecolin | 2007-02-20 13:07:22 +0800 (Tue, 20 Feb 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/mainWindow.cc

Show results' timestamp. Don't attempt setting the indexed icon on results that
are being indexed as their document ID is not yet known.

------------------------------------------------------------------------
r726 | fabricecolin | 2007-02-20 13:04:52 +0800 (Tue, 20 Feb 2007) | 2 lines
Changed paths:
   M /trunk/Index/XapianDatabase.cpp
   M /trunk/Index/XapianDatabase.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/Search/XapianEngine.cpp

Moved DocumentInfo <-> Xapian document data conversion to XapianDatabase.

------------------------------------------------------------------------
r725 | fabricecolin | 2007-02-19 23:21:36 +0800 (Mon, 19 Feb 2007) | 3 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

XapianEngine sets the results' timestamp as well as document IDs, so that
QueryingThread can skip calling hasDocument() on internal indexes.

------------------------------------------------------------------------
r724 | fabricecolin | 2007-02-19 22:15:18 +0800 (Mon, 19 Feb 2007) | 2 lines
Changed paths:
   M /trunk/Index/XapianDatabase.cpp
   M /trunk/Index/XapianDatabase.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

Moved m_maxTermLength to XapianDatabase.

------------------------------------------------------------------------
r723 | fabricecolin | 2007-02-18 19:40:47 +0800 (Sun, 18 Feb 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc

Let a thread start the daemon.
Give (slight) priority to internal engines when running a query.

------------------------------------------------------------------------
r722 | fabricecolin | 2007-02-17 21:00:43 +0800 (Sat, 17 Feb 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh

Moved Preferences menuitem back to Session, with Status.

------------------------------------------------------------------------
r721 | fabricecolin | 2007-02-17 20:58:58 +0800 (Sat, 17 Feb 2007) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

Method queryDatabase() handles exceptions more gracefully.

------------------------------------------------------------------------
r720 | fabricecolin | 2007-02-17 18:27:53 +0800 (Sat, 17 Feb 2007) | 2 lines
Changed paths:
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/nl.po
   M /trunk/po/pt_BR.po
   M /trunk/po/ru.po
   M /trunk/po/sv.po

Synced po files.

------------------------------------------------------------------------
r719 | fabricecolin | 2007-02-17 18:13:25 +0800 (Sat, 17 Feb 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/statisticsDialog.cc

Daemon logs its PID, shown by the Status window.
In the Status window, don't add an Errors row if no error was logged.

------------------------------------------------------------------------
r718 | fabricecolin | 2007-02-17 18:11:43 +0800 (Sat, 17 Feb 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/Utils/Result.cpp

Fixes for previous commit.

------------------------------------------------------------------------
r717 | fabricecolin | 2007-02-17 17:29:23 +0800 (Sat, 17 Feb 2007) | 6 lines
Changed paths:
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/Utils/Result.cpp
   M /trunk/Utils/Result.h

Avoid peeking at the indexes from the main UI thread.
- IndexingThread determines whether the document should be updated.
- QueryingThread finds which results are in one of the indexes.
- ExpandQueryThread gets the document IDs of the relevant documents.
- LabelUpdateThread can set labels on documents.

------------------------------------------------------------------------
r716 | fabricecolin | 2007-02-17 17:23:09 +0800 (Sat, 17 Feb 2007) | 2 lines
Changed paths:
   M /trunk/Tokenize/Tokenizer.cpp
   M /trunk/Tokenize/Tokenizer.h

Removed now unused method.

------------------------------------------------------------------------
r715 | fabricecolin | 2007-02-17 12:17:08 +0800 (Sat, 17 Feb 2007) | 2 lines
Changed paths:
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Tokenize/FilterUtils.cpp

Fixed link and abstract extraction, both broken following the move to Filter.

------------------------------------------------------------------------
r714 | fabricecolin | 2007-02-16 23:03:36 +0800 (Fri, 16 Feb 2007) | 2 lines
Changed paths:
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Search/WebEngine.cpp
   M /trunk/Search/pinot-search.cpp

Use FilterUtils.

------------------------------------------------------------------------
r713 | fabricecolin | 2007-02-16 23:02:12 +0800 (Fri, 16 Feb 2007) | 3 lines
Changed paths:
   M /trunk/Collect/MboxCollector.cpp
   M /trunk/Index/FilterWrapper.cpp
   M /trunk/Index/FilterWrapper.h
   A /trunk/Tokenize/FilterUtils.cpp
   A /trunk/Tokenize/FilterUtils.h
   M /trunk/Tokenize/Makefile.am
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/MboxHandler.h
   M /trunk/Utils/Makefile.am
   D /trunk/Utils/MboxParser.cpp
   D /trunk/Utils/MboxParser.h

Moved FilterWrapper's non-indexing related methods to FilterUtils.
The mbox filter obsoletes MboxParser. Updated MboxCollector and MboxHandler.

------------------------------------------------------------------------
r712 | fabricecolin | 2007-02-10 14:11:30 +0800 (Sat, 10 Feb 2007) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/pinot.spec.in

Distribute and install external-filters.xml.

------------------------------------------------------------------------
r711 | fabricecolin | 2007-02-09 23:09:44 +0800 (Fri, 09 Feb 2007) | 4 lines
Changed paths:
   M /trunk/Index/Makefile.am
   M /trunk/Makefile.am
   M /trunk/README
   M /trunk/Search/Google/Makefile.am
   M /trunk/pinot.spec.in

Install the new catalogs and the AUTHORS file.
New dependency on openssh-askpass.
Makefile typo fixes.

------------------------------------------------------------------------
r710 | fabricecolin | 2007-02-09 22:25:43 +0800 (Fri, 09 Feb 2007) | 2 lines
Changed paths:
   M /trunk/Utils/DocumentInfo.h

Type declaration.

------------------------------------------------------------------------
r709 | fabricecolin | 2007-02-09 22:25:09 +0800 (Fri, 09 Feb 2007) | 6 lines
Changed paths:
   M /trunk/Index/pinot-index.cpp
   M /trunk/Search/pinot-search.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc

Replaced specialized tokenizers with Dijon filters.
Pinot-index takes --db to specify the path to the index; the index type is
hardcoded to xapian.
Pinot-search takes --max to specify the maximum number of results.
Pinot sets SSH_ASKPASS.

------------------------------------------------------------------------
r708 | fabricecolin | 2007-02-09 22:14:01 +0800 (Fri, 09 Feb 2007) | 4 lines
Changed paths:
   A /trunk/Index/FilterWrapper.cpp
   A /trunk/Index/FilterWrapper.h
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Search/WebEngine.cpp
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

FilterWrapper provides a couple of useful methods to filter documents or index
their content.
Replaced specialized tokenizers with Dijon filters.

------------------------------------------------------------------------
r707 | fabricecolin | 2007-02-09 22:02:37 +0800 (Fri, 09 Feb 2007) | 2 lines
Changed paths:
   D /trunk/Tokenize/HtmlTokenizer.cpp
   D /trunk/Tokenize/HtmlTokenizer.h
   D /trunk/Tokenize/OpenDocumentTokenizer.cpp
   D /trunk/Tokenize/OpenDocumentTokenizer.h
   D /trunk/Tokenize/PdfTokenizer.cpp
   D /trunk/Tokenize/PdfTokenizer.h
   D /trunk/Tokenize/RtfTokenizer.cpp
   D /trunk/Tokenize/RtfTokenizer.h
   D /trunk/Tokenize/TagLibTokenizer.cpp
   D /trunk/Tokenize/TagLibTokenizer.h
   D /trunk/Tokenize/TokenizerFactory.cpp
   D /trunk/Tokenize/TokenizerFactory.h
   D /trunk/Tokenize/UnknownTypeTokenizer.cpp
   D /trunk/Tokenize/UnknownTypeTokenizer.h
   D /trunk/Tokenize/WordTokenizer.cpp
   D /trunk/Tokenize/WordTokenizer.h
   D /trunk/Tokenize/XmlTokenizer.cpp
   D /trunk/Tokenize/XmlTokenizer.h
   A /trunk/Tokenize/filters
   A /trunk/Tokenize/filters/README

Specialized tokenizers are replaced by Dijon's filters.

------------------------------------------------------------------------
r706 | fabricecolin | 2007-02-08 23:28:51 +0800 (Thu, 08 Feb 2007) | 2 lines
Changed paths:
   M /trunk/Collect/Makefile.am
   M /trunk/Index/Makefile.am
   M /trunk/Makefile.am
   M /trunk/Monitor/Makefile.am
   M /trunk/Search/Google/Makefile.am
   M /trunk/Search/Makefile.am
   M /trunk/Tokenize/Makefile.am
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/Utils/Makefile.am
   M /trunk/configure.in

Added Tokenize/filters to build. Renamed gmime variables.

------------------------------------------------------------------------
r705 | fabricecolin | 2007-01-31 21:53:44 +0800 (Wed, 31 Jan 2007) | 2 lines
Changed paths:
   M /trunk/TODO

A lot more to do...

------------------------------------------------------------------------
r704 | fabricecolin | 2007-01-28 13:23:31 +0800 (Sun, 28 Jan 2007) | 2 lines
Changed paths:
   M /trunk/po/fr.po

Synced to current source.

------------------------------------------------------------------------
r703 | fabricecolin | 2007-01-28 13:13:07 +0800 (Sun, 28 Jan 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/statisticsDialog.cc
   M /trunk/UI/GTK2/src/statisticsDialog_glade.cc

Changed title to Status. Errors rows are collapsed by default and the Indexes
row is selected.

------------------------------------------------------------------------
r702 | fabricecolin | 2007-01-28 13:10:32 +0800 (Sun, 28 Jan 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/propertiesDialog.hh
   M /trunk/UI/GTK2/src/propertiesDialog_glade.cc
   M /trunk/UI/GTK2/src/propertiesDialog_glade.hh

Show a document's size and terms count in propertiesDialog.
Some minor mods to the queries list.

------------------------------------------------------------------------
r701 | fabricecolin | 2007-01-28 13:05:29 +0800 (Sun, 28 Jan 2007) | 3 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/LanguageDetector.cpp
   M /trunk/Index/XapianDatabase.cpp
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

Added getDocumentTermsCount() to IndexInterface.
Minor fix to XapianDatabase::openDatabase().

------------------------------------------------------------------------
r700 | fabricecolin | 2007-01-27 19:57:05 +0800 (Sat, 27 Jan 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh

Don't call DBusXapianIndex::getStatistics() here, this might freeze the UI
temporarily.

------------------------------------------------------------------------
r699 | fabricecolin | 2007-01-27 19:55:39 +0800 (Sat, 27 Jan 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/statisticsDialog.cc

No need to show getItemsCount(CRAWLING).

------------------------------------------------------------------------
r698 | fabricecolin | 2007-01-22 21:50:31 +0800 (Mon, 22 Jan 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/mainWindow.cc

When Results, Index is selected, skip results already indexed.
Clear the status bar when a notebook page is closed.

------------------------------------------------------------------------
r697 | fabricecolin | 2007-01-22 21:30:38 +0800 (Mon, 22 Jan 2007) | 2 lines
Changed paths:
   M /trunk/Tokenize/TokenizerFactory.cpp

Minor fix : application/xml is supported, not application/html.

------------------------------------------------------------------------
r696 | fabricecolin | 2007-01-20 12:41:02 +0800 (Sat, 20 Jan 2007) | 2 lines
Changed paths:
   M /trunk/SQL/ViewHistory.cpp
   M /trunk/SQL/ViewHistory.h
   M /trunk/UI/GTK2/src/statisticsDialog.cc

Show how many results were viewed.

------------------------------------------------------------------------
r695 | fabricecolin | 2007-01-13 23:36:08 +0800 (Sat, 13 Jan 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/dateDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.cc

Date::set_time_current() is a recent addition, prefer set_time().

------------------------------------------------------------------------
r694 | fabricecolin | 2007-01-12 20:57:13 +0800 (Fri, 12 Jan 2007) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

Don't include terms with weight 0 in abstract generation.

------------------------------------------------------------------------
r693 | fabricecolin | 2007-01-12 20:46:10 +0800 (Fri, 12 Jan 2007) | 5 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h
   M /trunk/Utils/TimeConverter.cpp
   M /trunk/Utils/TimeConverter.h

Date range filtering, back-end part.
Creation of the date range query is copied from Omega's date_range_filter()
function found in xapian-applications/omega/date.cc.
When the dates don't make sense, they are ignored. 

------------------------------------------------------------------------
r692 | fabricecolin | 2007-01-12 20:36:29 +0800 (Fri, 12 Jan 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/statisticsDialog.cc
   M /trunk/Utils/DocumentInfo.cpp
   M /trunk/Utils/StringManip.cpp

A bunch of cosmetic changes and typo corrections.

------------------------------------------------------------------------
r691 | fabricecolin | 2007-01-11 23:35:47 +0800 (Thu, 11 Jan 2007) | 3 lines
Changed paths:
   M /trunk/Search/QueryProperties.cpp
   M /trunk/Search/QueryProperties.h
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   A /trunk/UI/GTK2/src/dateDialog.cc
   A /trunk/UI/GTK2/src/dateDialog.hh
   A /trunk/UI/GTK2/src/dateDialog_glade.cc
   A /trunk/UI/GTK2/src/dateDialog_glade.hh
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.hh
   M /trunk/UI/GTK2/src/queryDialog_glade.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.hh
   M /trunk/po/POTFILES.in

Date range filtering, UI-only part.
Added dateDialog, a date picker box, and extended queryDialog.

------------------------------------------------------------------------
r690 | fabricecolin | 2007-01-10 07:57:14 +0800 (Wed, 10 Jan 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/MIMEScanner.h

Minor mods.

------------------------------------------------------------------------
r689 | fabricecolin | 2007-01-10 06:30:12 +0800 (Wed, 10 Jan 2007) | 3 lines
Changed paths:
   A /trunk/UI/GTK2/src/launcherDialog.cc
   A /trunk/UI/GTK2/src/launcherDialog.hh
   A /trunk/UI/GTK2/src/launcherDialog_glade.cc
   A /trunk/UI/GTK2/src/launcherDialog_glade.hh
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/MIMEScanner.h
   M /trunk/Utils/Url.cpp

Follow-up to previous commit : actual GTKmm code, mods to MIMEScanner's list
of actions and Url prettification.

------------------------------------------------------------------------
r688 | fabricecolin | 2007-01-10 06:25:17 +0800 (Wed, 10 Jan 2007) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/statisticsDialog.cc
   M /trunk/po/POTFILES.in

Still jet-lagged, I can't sleep, so I am checking in code to prompt the user for
a command to open documents of unsupported types ;-)
And a minor fix in statisticsDialog.

------------------------------------------------------------------------
r687 | fabricecolin | 2007-01-09 21:25:52 +0800 (Tue, 09 Jan 2007) | 3 lines
Changed paths:
   A /trunk/po/pt_BR.po
   A /trunk/po/ru.po

Brazilian Portuguese and Russian translations by Leonardo Melo and Sergey
Vostrikov, respectively.

------------------------------------------------------------------------
r686 | fabricecolin | 2007-01-09 20:36:50 +0800 (Tue, 09 Jan 2007) | 2 lines
Changed paths:
   M /trunk/Utils/Url.cpp

Hacky fix for parsing of user and password.

------------------------------------------------------------------------
r685 | fabricecolin | 2007-01-09 20:35:03 +0800 (Tue, 09 Jan 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/po/POTFILES.in

Compile and translate statisticsDialog.

------------------------------------------------------------------------
r684 | fabricecolin | 2007-01-09 20:33:34 +0800 (Tue, 09 Jan 2007) | 2 lines
Changed paths:
   A /trunk/UI/GTK2/src/statisticsDialog.cc
   A /trunk/UI/GTK2/src/statisticsDialog.hh
   A /trunk/UI/GTK2/src/statisticsDialog_glade.cc
   A /trunk/UI/GTK2/src/statisticsDialog_glade.hh

Statistics window.

------------------------------------------------------------------------
r683 | fabricecolin | 2007-01-09 20:31:48 +0800 (Tue, 09 Jan 2007) | 2 lines
Changed paths:
   M /trunk/SQL/SQLiteBase.cpp

Removed DEBUG code.

------------------------------------------------------------------------
r682 | fabricecolin | 2007-01-09 20:30:03 +0800 (Tue, 09 Jan 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Removed long obsolete header.

------------------------------------------------------------------------
r681 | fabricecolin | 2007-01-09 20:28:33 +0800 (Tue, 09 Jan 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/ServerThreads.h

DirectoryScannerThread::scanEntry() logs errors to the database so that they can
be shown by statisticsDialog.

------------------------------------------------------------------------
r680 | fabricecolin | 2007-01-09 20:22:54 +0800 (Tue, 09 Jan 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/queryDialog_glade.cc

Renamed variable.

------------------------------------------------------------------------
r679 | fabricecolin | 2007-01-09 20:22:18 +0800 (Tue, 09 Jan 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh

Open statisticsDialog when Session, Statistics is activated.
Added .desktop file's Comment to about box to help with translation.

------------------------------------------------------------------------
r678 | fabricecolin | 2007-01-09 20:19:23 +0800 (Tue, 09 Jan 2007) | 4 lines
Changed paths:
   M /trunk/Index/XapianDatabase.cpp
   M /trunk/UI/GTK2/src/indexDialog.cc
   M /trunk/UI/GTK2/src/indexDialog_glade.cc
   M /trunk/UI/GTK2/src/indexDialog_glade.hh

Changes to remote indexes backend and UI to allow using xapian-progsrv with SSH.
Note this is disabled in the UI until I figure out the best way to prompt for
a password.

------------------------------------------------------------------------
r677 | fabricecolin | 2007-01-09 20:17:46 +0800 (Tue, 09 Jan 2007) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade

Moved Preferences under Edit in mainWindow, added Statistics under Session.
Revamped indexDialog.

------------------------------------------------------------------------
r676 | fabricecolin | 2007-01-07 22:17:12 +0800 (Sun, 07 Jan 2007) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/importDialog.cc

Removed long gone header.

------------------------------------------------------------------------
r675 | fabricecolin | 2007-01-07 22:03:19 +0800 (Sun, 07 Jan 2007) | 6 lines
Changed paths:
   M /trunk/SQL/ActionQueue.cpp
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/CrawlHistory.h
   M /trunk/SQL/SQLiteBase.cpp

In SQLiteBase::open(), we may have to close the handle returned by
sqlite3_open() when it doesn't return SQLITE_OK !
Changed prototype of some of CrawlHistory's methods, fixed unescaping in
getSources().
Less DEBUG in ActionQueue.

------------------------------------------------------------------------
r673 | fabricecolin | 2006-12-21 22:59:10 +0800 (Thu, 21 Dec 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

Changes since previous release.

------------------------------------------------------------------------
r672 | fabricecolin | 2006-12-21 22:58:31 +0800 (Thu, 21 Dec 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/nl.po
   M /trunk/po/sv.po

Force locale to UTF-8. This is very hackish but should help with a so far
unexplained crash when it's something else, eg fr_FR.ISO-8859-1.

------------------------------------------------------------------------
r671 | fabricecolin | 2006-12-20 21:20:53 +0800 (Wed, 20 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Collect/pinot-collect.1
   M /trunk/Index/pinot-index.1
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1

Updated with new version number.

------------------------------------------------------------------------
r670 | fabricecolin | 2006-12-20 21:19:37 +0800 (Wed, 20 Dec 2006) | 2 lines
Changed paths:
   M /trunk/configure.in

Bumped version number.

------------------------------------------------------------------------
r669 | fabricecolin | 2006-12-20 21:16:58 +0800 (Wed, 20 Dec 2006) | 2 lines
Changed paths:
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/nl.po
   M /trunk/po/sv.po

Synced translations with source.

------------------------------------------------------------------------
r668 | fabricecolin | 2006-12-20 21:01:19 +0800 (Wed, 20 Dec 2006) | 2 lines
Changed paths:
   M /trunk/pinot.desktop

Removed Application from Categories to keep desktop-file-install 0.11 happy.

------------------------------------------------------------------------
r667 | fabricecolin | 2006-12-20 21:00:20 +0800 (Wed, 20 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/HtmlTokenizer.cpp

Error and warning handlers log only in DEBUG mode.

------------------------------------------------------------------------
r666 | fabricecolin | 2006-12-19 19:10:30 +0800 (Tue, 19 Dec 2006) | 5 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

In removeCommonTerms(), be prepared for some terms to not be present in the
document, eg if the document was indexed with a previous version that didn't
create the same terms.
Changed addCommonTerms() prototype.

------------------------------------------------------------------------
r665 | fabricecolin | 2006-12-19 19:08:19 +0800 (Tue, 19 Dec 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

The daemon doesn't have load engine plugins.

------------------------------------------------------------------------
r664 | fabricecolin | 2006-12-18 18:53:10 +0800 (Mon, 18 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/TagLibTokenizer.h

Corrected define typo.

------------------------------------------------------------------------
r663 | fabricecolin | 2006-12-18 18:52:30 +0800 (Mon, 18 Dec 2006) | 2 lines
Changed paths:
   M /trunk/README
   M /trunk/TODO

Minus 9 items, plus 3.

------------------------------------------------------------------------
r662 | fabricecolin | 2006-12-16 12:03:18 +0800 (Sat, 16 Dec 2006) | 3 lines
Changed paths:
   M /trunk/Tokenize/TagLibTokenizer.cpp

Save the document's content to a temporary file if necessary.
Don't request all documents.

------------------------------------------------------------------------
r661 | fabricecolin | 2006-12-16 10:59:34 +0800 (Sat, 16 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Index/pinot-index.cpp

Fixed argument count checking.

------------------------------------------------------------------------
r660 | fabricecolin | 2006-12-15 19:38:56 +0800 (Fri, 15 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp

Labelling methods allocate arrays on the heap.

------------------------------------------------------------------------
r659 | fabricecolin | 2006-12-15 19:35:28 +0800 (Fri, 15 Dec 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

When documents are relabeled, call browse_index() so that the list is cleared
if necessary.

------------------------------------------------------------------------
r658 | fabricecolin | 2006-12-14 20:21:23 +0800 (Thu, 14 Dec 2006) | 2 lines
Changed paths:
   M /trunk/AUTHORS

Removed specifics of who suggested what, I can't keep track :-)

------------------------------------------------------------------------
r657 | fabricecolin | 2006-12-14 20:20:18 +0800 (Thu, 14 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Utils/TimeConverter.cpp
   M /trunk/Utils/TimeConverter.h

Date terms Dyyyymmdd, Myyyymm and Yyyyy.

------------------------------------------------------------------------
r656 | fabricecolin | 2006-12-14 19:26:16 +0800 (Thu, 14 Dec 2006) | 2 lines
Changed paths:
   M /trunk/README

Document which filters apply to all engines.

------------------------------------------------------------------------
r655 | fabricecolin | 2006-12-14 19:18:57 +0800 (Thu, 14 Dec 2006) | 2 lines
Changed paths:
   M /trunk/configure.in
   M /trunk/pinot.spec.in

New option --enable-debug. Renamed --with-soap to --enable-soap.

------------------------------------------------------------------------
r654 | fabricecolin | 2006-12-13 21:24:19 +0800 (Wed, 13 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Index/pinot-index.cpp

Unload tokenizers on exit.

------------------------------------------------------------------------
r653 | fabricecolin | 2006-12-13 20:49:55 +0800 (Wed, 13 Dec 2006) | 6 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/UI/GTK2/src/ServerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml

Added method setDocumentsLabels() to IndexInterface. DBusXapianIndex's version
maps to a DBus method.
This is definitely faster than calling SetDocumentLabels on each document.
Note that DBusXapianIndex works around a problem with dbus_g_proxy_call(), which
modifies the first argument's pointer.

------------------------------------------------------------------------
r652 | fabricecolin | 2006-12-12 21:47:49 +0800 (Tue, 12 Dec 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp

Activate the firstRun flag if the configuration file couldn't be found.

------------------------------------------------------------------------
r651 | fabricecolin | 2006-12-12 21:46:55 +0800 (Tue, 12 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Utils/Document.cpp

In setDataFromFile(), set the document's timestamp and size.

------------------------------------------------------------------------
r650 | fabricecolin | 2006-12-12 21:45:38 +0800 (Tue, 12 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Index/pinot-index.cpp

Load and unload tokenizers !!!

------------------------------------------------------------------------
r649 | fabricecolin | 2006-12-12 21:44:34 +0800 (Tue, 12 Dec 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h

Store the charset in QueryHistory, convert the extract to UTF-8 before display
and catch (conversion) exceptions in updateRow().

------------------------------------------------------------------------
r648 | fabricecolin | 2006-12-12 21:42:19 +0800 (Tue, 12 Dec 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc

Replaced setenv() with Glib::setenv().

------------------------------------------------------------------------
r647 | fabricecolin | 2006-12-12 21:40:00 +0800 (Tue, 12 Dec 2006) | 3 lines
Changed paths:
   M /trunk/SQL/QueryHistory.cpp
   M /trunk/SQL/QueryHistory.h

Store the result's charset in the so far unused Language column.
I ought to rename the column now...

------------------------------------------------------------------------
r646 | fabricecolin | 2006-12-12 21:38:15 +0800 (Tue, 12 Dec 2006) | 3 lines
Changed paths:
   M /trunk/Search/AbstractGenerator.cpp
   M /trunk/Search/WebEngine.cpp

Convert strings to UTF-8 before escaping them for markup. This prevents a crash
when the locale is not UTF-8.

------------------------------------------------------------------------
r645 | fabricecolin | 2006-12-11 22:52:25 +0800 (Mon, 11 Dec 2006) | 2 lines
Changed paths:
   M /trunk/configure.in

Make sure all binaries are linked against pthreads, not just the UI.

------------------------------------------------------------------------
r644 | fabricecolin | 2006-12-11 22:49:46 +0800 (Mon, 11 Dec 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h

Removed unused member.

------------------------------------------------------------------------
r643 | fabricecolin | 2006-12-11 21:29:09 +0800 (Mon, 11 Dec 2006) | 2 lines
Changed paths:
   M /trunk/scripts/bash/pinot-enum-index.sh

Skip non-files silently.

------------------------------------------------------------------------
r642 | fabricecolin | 2006-12-11 21:24:50 +0800 (Mon, 11 Dec 2006) | 3 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

Additional check on document's data before calling scanDocument().
In updateDocument(), if the document has no data, don't return with an error.

------------------------------------------------------------------------
r641 | fabricecolin | 2006-12-10 22:34:22 +0800 (Sun, 10 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Collect/CurlDownloader.h
   M /trunk/Collect/DownloaderFactory.h
   M /trunk/Collect/FileCollector.h
   M /trunk/Collect/MboxCollector.h
   M /trunk/Collect/NeonDownloader.h
   M /trunk/Collect/XapianCollector.h
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexFactory.h
   M /trunk/Index/LanguageDetector.h
   M /trunk/Index/XapianDatabase.h
   M /trunk/Index/XapianDatabaseFactory.h
   M /trunk/Index/XapianIndex.h
   M /trunk/Monitor/INotifyMonitor.h
   M /trunk/Monitor/MonitorEvent.h
   M /trunk/Monitor/MonitorFactory.h
   M /trunk/Monitor/MonitorHandler.h
   M /trunk/Monitor/MonitorInterface.h
   M /trunk/SQL/ActionQueue.h
   M /trunk/SQL/CrawlHistory.h
   M /trunk/SQL/QueryHistory.h
   M /trunk/SQL/SQLiteBase.h
   M /trunk/SQL/ViewHistory.h
   M /trunk/Search/AbstractGenerator.h
   M /trunk/Search/Google/GoogleAPIEngine.h
   M /trunk/Search/OpenSearchParser.h
   M /trunk/Search/PluginParsers.h
   M /trunk/Search/QueryProperties.h
   M /trunk/Search/SearchEngineFactory.h
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Search/SearchPluginProperties.h
   M /trunk/Search/SherlockParser.h
   M /trunk/Search/WebEngine.h
   M /trunk/Search/XapianEngine.h
   M /trunk/Tokenize/HtmlTokenizer.h
   M /trunk/Tokenize/OpenDocumentTokenizer.h
   M /trunk/Tokenize/PdfTokenizer.h
   M /trunk/Tokenize/RtfTokenizer.h
   M /trunk/Tokenize/TagLibTokenizer.h
   M /trunk/Tokenize/Tokenizer.h
   M /trunk/Tokenize/TokenizerFactory.h
   M /trunk/Tokenize/UnknownTypeTokenizer.h
   M /trunk/Tokenize/WordTokenizer.h
   M /trunk/Tokenize/XmlTokenizer.h
   M /trunk/Utils/CommandLine.h
   M /trunk/Utils/Document.h
   M /trunk/Utils/DocumentInfo.h
   M /trunk/Utils/IndexedDocument.h
   M /trunk/Utils/Languages.h
   M /trunk/Utils/MIMEScanner.h
   M /trunk/Utils/MboxParser.h
   M /trunk/Utils/Result.h
   M /trunk/Utils/StringManip.h
   M /trunk/Utils/TimeConverter.h
   M /trunk/Utils/Timer.h
   M /trunk/Utils/Url.h

Minimal class documentation.

------------------------------------------------------------------------
r640 | fabricecolin | 2006-12-10 22:02:31 +0800 (Sun, 10 Dec 2006) | 3 lines
Changed paths:
   M /trunk/scripts/bash/pinot-enum-index.sh

Delve might be called xapian-delve, so check for that.
Run bash not sh.

------------------------------------------------------------------------
r639 | fabricecolin | 2006-12-10 15:18:22 +0800 (Sun, 10 Dec 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/Makefile.am
   A /trunk/UI/GTK2/src/ServerThreads.cpp
   A /trunk/UI/GTK2/src/ServerThreads.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Let D-Bus message be processed and replied to by DBusServletThread.
Moved Monitor and DirectoryScannerThread to ServerThreads.

------------------------------------------------------------------------
r638 | fabricecolin | 2006-12-10 15:09:09 +0800 (Sun, 10 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/Tokenizer.h
   M /trunk/Tokenize/TokenizerFactory.cpp

Don't request any data for unknown types.

------------------------------------------------------------------------
r637 | fabricecolin | 2006-12-09 13:46:02 +0800 (Sat, 09 Dec 2006) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

Mark files in sysconfdir with %config(noreplace).

------------------------------------------------------------------------
r636 | fabricecolin | 2006-12-09 11:36:11 +0800 (Sat, 09 Dec 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml

When a query returns, only relabel documents that are already indexed.
Fixed description of GetDocumentLabels method.

------------------------------------------------------------------------
r635 | fabricecolin | 2006-12-09 11:19:34 +0800 (Sat, 09 Dec 2006) | 2 lines
Changed paths:
   M /trunk/TODO

More stuff to do...

------------------------------------------------------------------------
r634 | fabricecolin | 2006-12-09 10:20:37 +0800 (Sat, 09 Dec 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/prefsDialog.cc

First time Pinot is launched, open the preferences and show the Indexing tab.

------------------------------------------------------------------------
r633 | fabricecolin | 2006-12-08 22:59:01 +0800 (Fri, 08 Dec 2006) | 5 lines
Changed paths:
   M /trunk/Index/LanguageDetector.cpp
   M /trunk/Makefile.am
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/configure.in
   M /trunk/pinot.spec.in

Install configuration files under $sysconfdir/pinot, tokenizers under
$libdir/pinot/tokenizers. Search plugins are not configuration files so can stay
under $datadir.
Some other tweaks to the spec file suggested by Neal Becker.

------------------------------------------------------------------------
r632 | fabricecolin | 2006-12-08 19:30:24 +0800 (Fri, 08 Dec 2006) | 2 lines
Changed paths:
   M /trunk/configure.in

Complain bitterly if textcat.h is not found.

------------------------------------------------------------------------
r631 | fabricecolin | 2006-12-08 19:17:59 +0800 (Fri, 08 Dec 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Don't call setDocumentLabels() if there were and still are no labels.

------------------------------------------------------------------------
r630 | fabricecolin | 2006-12-08 19:12:48 +0800 (Fri, 08 Dec 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot.cc

Better initialize D-Bus in the UI too. Not sure why this wasn't a problem
earlier.

------------------------------------------------------------------------
r629 | fabricecolin | 2006-12-08 19:11:44 +0800 (Fri, 08 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

Fixed extraction of language and size from the document data.

------------------------------------------------------------------------
r628 | fabricecolin | 2006-12-08 19:11:00 +0800 (Fri, 08 Dec 2006) | 3 lines
Changed paths:
   M /trunk/Utils/CommandLine.cpp

Expand %f, %d and %n correctly. When there is no suitable parameter, or none at
all, the command line wasn't correct either.

------------------------------------------------------------------------
r627 | fabricecolin | 2006-12-07 21:12:25 +0800 (Thu, 07 Dec 2006) | 3 lines
Changed paths:
   M /trunk/configure.in

From Thierry Thomas : determine which of '-pthread' '-lc_r' '-lthr' and
'-lpthread' is needed to link against pthreads.

------------------------------------------------------------------------
r626 | fabricecolin | 2006-12-07 19:26:49 +0800 (Thu, 07 Dec 2006) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

Require gsoap > 2.7.8c.

------------------------------------------------------------------------
r625 | fabricecolin | 2006-12-06 22:35:01 +0800 (Wed, 06 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Collect/CurlDownloader.h
   M /trunk/Collect/DownloaderFactory.cpp
   M /trunk/Collect/DownloaderFactory.h
   M /trunk/Collect/DownloaderInterface.cpp
   M /trunk/Collect/DownloaderInterface.h
   M /trunk/Collect/NeonDownloader.cpp
   M /trunk/Collect/NeonDownloader.h
   M /trunk/Collect/XapianCollector.cpp
   M /trunk/Collect/XapianCollector.h
   M /trunk/Collect/pinot-collect.cpp
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexFactory.cpp
   M /trunk/Index/IndexFactory.h
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianDatabase.cpp
   M /trunk/Index/XapianDatabase.h
   M /trunk/Index/XapianDatabaseFactory.cpp
   M /trunk/Index/XapianDatabaseFactory.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/Index/pinot-index.cpp
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/Monitor/INotifyMonitor.h
   M /trunk/Monitor/MonitorFactory.cpp
   M /trunk/Monitor/MonitorFactory.h
   M /trunk/Monitor/MonitorInterface.h
   M /trunk/Search/Google/GoogleAPIEngine.cpp
   M /trunk/Search/Google/GoogleAPIEngine.h
   M /trunk/Search/Google/GoogleSearch.h
   M /trunk/Search/SearchEngineFactory.cpp
   M /trunk/Search/SearchEngineFactory.h
   M /trunk/Search/SearchEngineInterface.cpp
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h
   M /trunk/Search/pinot-search.cpp
   M /trunk/Search/plugintest.cpp
   M /trunk/Tokenize/HtmlTokenizer.cpp
   M /trunk/Tokenize/HtmlTokenizer.h
   M /trunk/Tokenize/Tokenizer.cpp
   M /trunk/Tokenize/Tokenizer.h
   M /trunk/Tokenize/TokenizerFactory.cpp
   M /trunk/Tokenize/TokenizerFactory.h
   M /trunk/Tokenize/UnknownTypeTokenizer.cpp
   M /trunk/Tokenize/UnknownTypeTokenizer.h
   M /trunk/Tokenize/XmlTokenizer.cpp
   M /trunk/Tokenize/XmlTokenizer.h
   M /trunk/Tokenize/tokenizertest.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.hh
   M /trunk/Utils/Languages.cpp
   M /trunk/Utils/Languages.h
   M /trunk/Utils/MboxParser.cpp
   M /trunk/Utils/MboxParser.h
   M /trunk/Utils/Result.cpp
   M /trunk/Utils/Result.h
   M /trunk/Utils/Timer.cpp
   M /trunk/Utils/Timer.h

Reset executable bit on source files.

------------------------------------------------------------------------
r623 | fabricecolin | 2006-12-05 18:44:07 +0800 (Tue, 05 Dec 2006) | 2 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/NEWS

Updated with these few days changes. Set release date to today.

------------------------------------------------------------------------
r622 | fabricecolin | 2006-12-05 18:42:17 +0800 (Tue, 05 Dec 2006) | 2 lines
Changed paths:
   M /trunk/po/es.po
   M /trunk/po/fr.po
   M /trunk/po/nl.po
   M /trunk/po/sv.po

Synced po's with source.

------------------------------------------------------------------------
r621 | fabricecolin | 2006-12-05 18:33:24 +0800 (Tue, 05 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Index/XapianDatabase.cpp
   M /trunk/Index/XapianIndex.cpp

Less DEBUG messages.

------------------------------------------------------------------------
r620 | fabricecolin | 2006-12-04 22:55:56 +0800 (Mon, 04 Dec 2006) | 3 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/configure.in
   M /trunk/pinot.spec.in

Added nl and sv to list of languages.
Changed how tokenizers are installed and packaged.

------------------------------------------------------------------------
r619 | fabricecolin | 2006-12-04 21:15:28 +0800 (Mon, 04 Dec 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Fixed deadlock, reported by Thierry Thomas <thierry at freebsd dot org>.

------------------------------------------------------------------------
r618 | fabricecolin | 2006-12-04 18:42:17 +0800 (Mon, 04 Dec 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp

Only return actual documents in getSelection().

------------------------------------------------------------------------
r617 | fabricecolin | 2006-12-04 18:38:12 +0800 (Mon, 04 Dec 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

Don't update the index list incrementally, do it when IndexBrowser returns. This
fixes a crash on SMP systems due to calls to GTK by the UI and a worker thread.

------------------------------------------------------------------------
r616 | fabricecolin | 2006-12-04 18:31:41 +0800 (Mon, 04 Dec 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc

Check whether Glib threads subsystem is initialized before calling init().

------------------------------------------------------------------------
r615 | fabricecolin | 2006-12-04 18:30:40 +0800 (Mon, 04 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

The file name shouldn't be lower-cased.

------------------------------------------------------------------------
r614 | fabricecolin | 2006-12-04 08:00:56 +0800 (Mon, 04 Dec 2006) | 2 lines
Changed paths:
   A /trunk/po/sv.po

Swedish translation by Daniel Nylander.

------------------------------------------------------------------------
r613 | fabricecolin | 2006-12-03 23:37:44 +0800 (Sun, 03 Dec 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/po/es.po
   M /trunk/po/fr.po

Minor corrections and new string in French and Spanish po files.

------------------------------------------------------------------------
r612 | fabricecolin | 2006-12-03 23:31:43 +0800 (Sun, 03 Dec 2006) | 2 lines
Changed paths:
   A /trunk/po/nl.po

Dutch translation by Tikkel, through Rosetta.

------------------------------------------------------------------------
r611 | fabricecolin | 2006-12-03 23:02:10 +0800 (Sun, 03 Dec 2006) | 3 lines
Changed paths:
   M /trunk/Collect/pinot-collect.1
   M /trunk/Index/pinot-index.1
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/configure.in

Updated man pages. Increased version number in preparation for release in
a few days time.

------------------------------------------------------------------------
r610 | fabricecolin | 2006-12-02 11:45:41 +0800 (Sat, 02 Dec 2006) | 2 lines
Changed paths:
   M /trunk/SQL/SQLiteBase.cpp
   M /trunk/Tokenize/TagLibTokenizer.cpp
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/Notebook.cpp

Fixed minor warnings.

------------------------------------------------------------------------
r609 | fabricecolin | 2006-12-02 11:18:18 +0800 (Sat, 02 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Collect/NeonDownloader.cpp

Deserved dusting off.

------------------------------------------------------------------------
r608 | fabricecolin | 2006-12-01 23:53:51 +0800 (Fri, 01 Dec 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am

Distribute the enum-index script.

------------------------------------------------------------------------
r607 | fabricecolin | 2006-12-01 23:53:01 +0800 (Fri, 01 Dec 2006) | 2 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/NEWS
   M /trunk/README
   M /trunk/TODO

Status update.

------------------------------------------------------------------------
r606 | fabricecolin | 2006-12-01 23:48:46 +0800 (Fri, 01 Dec 2006) | 4 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

The length of R-prefixed terms was not limited. This could raise "key too long"
exceptions and prevent some documents from being indexed.
Print the exception's errno when caught. Made DEBUG a bit more verbose.

------------------------------------------------------------------------
r605 | fabricecolin | 2006-12-01 21:14:06 +0800 (Fri, 01 Dec 2006) | 3 lines
Changed paths:
   M /trunk/Tokenize/PdfTokenizer.cpp
   M /trunk/Tokenize/PdfTokenizer.h

Pass -htmlmeta to pdftotext so that document text is wrapped in html with
some useful metadata.

------------------------------------------------------------------------
r604 | fabricecolin | 2006-12-01 21:12:02 +0800 (Fri, 01 Dec 2006) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

Build with -O0 in debug mode.

------------------------------------------------------------------------
r603 | fabricecolin | 2006-12-01 19:11:25 +0800 (Fri, 01 Dec 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

Glib::Dispatcher is supposed to allow multiple senders without locking, but
some people on the gtkmm mailing list think otherwise :-) Better safe than
sorry. I am adding a mutex in emitSignal().

------------------------------------------------------------------------
r602 | fabricecolin | 2006-12-01 19:08:16 +0800 (Fri, 01 Dec 2006) | 4 lines
Changed paths:
   M /trunk/Index/XapianDatabase.cpp
   M /trunk/Index/XapianDatabase.h

Contrary to what I thought, simultaneous read accesses on the same Database
object are not safe ! Of course, it's only on SMP systems that weird problems
cropped up.

------------------------------------------------------------------------
r601 | fabricecolin | 2006-11-27 22:25:46 +0800 (Mon, 27 Nov 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/Utils/MboxParser.h

Cosmetic mods.

------------------------------------------------------------------------
r600 | fabricecolin | 2006-11-27 20:54:22 +0800 (Mon, 27 Nov 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

Found out that SigC::Object/sigc::trackable doesn't have a virtual destructor
for some obscure reason and that it should be inherited from virtually.
Fixing this can only be a good thing...

------------------------------------------------------------------------
r599 | fabricecolin | 2006-11-25 14:04:36 +0800 (Sat, 25 Nov 2006) | 5 lines
Changed paths:
   M /trunk/Collect/CurlDownloader.cpp
   M /trunk/Tokenize/HtmlTokenizer.cpp
   M /trunk/Tokenize/OpenDocumentTokenizer.cpp
   M /trunk/Tokenize/OpenDocumentTokenizer.h
   M /trunk/Tokenize/PdfTokenizer.cpp
   M /trunk/Tokenize/PdfTokenizer.h
   M /trunk/Tokenize/RtfTokenizer.cpp
   M /trunk/Tokenize/RtfTokenizer.h
   M /trunk/Tokenize/TagLibTokenizer.cpp
   M /trunk/Tokenize/TagLibTokenizer.h
   M /trunk/Tokenize/Tokenizer.cpp
   M /trunk/Tokenize/Tokenizer.h
   M /trunk/Tokenize/TokenizerFactory.cpp
   M /trunk/Tokenize/TokenizerFactory.h
   M /trunk/Tokenize/WordTokenizer.cpp
   M /trunk/Tokenize/WordTokenizer.h
   M /trunk/Tokenize/XmlTokenizer.cpp
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/Utils/MboxParser.cpp
   M /trunk/Utils/MboxParser.h

Preserve size and timestamp attributes determined when documents are retrieved,
by a crawl, a download or an adapter.
Don't load files that are going to be handled by helper applications that can
access them directly.

------------------------------------------------------------------------
r598 | fabricecolin | 2006-11-25 13:57:11 +0800 (Sat, 25 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Utils/CommandLine.cpp
   M /trunk/Utils/CommandLine.h

Static method to shell-quote strings.

------------------------------------------------------------------------
r597 | fabricecolin | 2006-11-25 13:47:31 +0800 (Sat, 25 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/UI/GTK2/src/queryDialog.cc

File extension stored in the index with prefix XEXT.

------------------------------------------------------------------------
r596 | fabricecolin | 2006-11-23 21:04:12 +0800 (Thu, 23 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Utils/DocumentInfo.h

Missed this in previous commit.

------------------------------------------------------------------------
r595 | fabricecolin | 2006-11-23 21:02:56 +0800 (Thu, 23 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Collect/XapianCollector.cpp
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/pinot-index.cpp
   M /trunk/SQL/ActionQueue.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/Utils/DocumentInfo.cpp

Added file size to DocumentInfo and the index (as data).

------------------------------------------------------------------------
r594 | fabricecolin | 2006-11-22 21:13:41 +0800 (Wed, 22 Nov 2006) | 3 lines
Changed paths:
   M /trunk/Search/Google/GAPIC.cpp
   M /trunk/Search/Google/GAPIClient.cpp
   M /trunk/Search/Google/GAPIClientLib.cpp
   M /trunk/Search/Google/GAPIGoogleSearchBindingProxy.h
   M /trunk/Search/Google/GAPIH.h
   M /trunk/Search/Google/GAPIStub.h
   M /trunk/Search/Google/GoogleSearch.h
   M /trunk/Search/Google/Makefile.am
   M /trunk/Search/SOAPEnvH.h
   M /trunk/Search/SOAPEnvStub.h

Regenerated SOAP stubs with gSOAP v2.7.8c. Applied same fixes to GAPIC.cpp as
in revision 189.

------------------------------------------------------------------------
r593 | fabricecolin | 2006-11-21 19:26:46 +0800 (Tue, 21 Nov 2006) | 6 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Disconnect and get threads to stop before closing stuff down and exiting.
Worker threads that have a signal disconnect it in their stop() method.
DirectoryScanner didn't check whether it was supposed to exit. While crawling,
the daemon should now be able to stop gracefully, whether because it was
signalled or the Stop method was invoked.

------------------------------------------------------------------------
r592 | fabricecolin | 2006-11-19 14:35:00 +0800 (Sun, 19 Nov 2006) | 3 lines
Changed paths:
   A /trunk/SQL/ActionQueue.cpp
   A /trunk/SQL/ActionQueue.h
   M /trunk/SQL/Makefile.am
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc

Replaced std::queue-based indexing queue with a database table appropriately
named ActionQueue. This seems to lower first-crawl memory usage a good deal.

------------------------------------------------------------------------
r591 | fabricecolin | 2006-11-19 14:03:24 +0800 (Sun, 19 Nov 2006) | 2 lines
Changed paths:
   D /trunk/UI/pinot-live.py

This was moved elsewhere.

------------------------------------------------------------------------
r590 | fabricecolin | 2006-11-19 14:02:31 +0800 (Sun, 19 Nov 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Set the daemon's scheduling priority to 15 (default) or any value passed with
"--priority". This already makes a big difference. Changing the I/O scheduling
class and priority may not be necessary ?

------------------------------------------------------------------------
r589 | fabricecolin | 2006-11-19 13:57:54 +0800 (Sun, 19 Nov 2006) | 4 lines
Changed paths:
   M /trunk/Makefile.am
   A /trunk/scripts
   A /trunk/scripts/bash
   A /trunk/scripts/bash/pinot-enum-index.sh
   A /trunk/scripts/python
   A /trunk/scripts/python/pinot-live.py (from /trunk/UI/pinot-live.py:587)

Moved pinot-live.py into scripts/python.
Bash script scripts/bash/pinot-enum-index.sh enumerates files in an index and
gives an estimate of the corresponding disk space. It needs delve, du and dc.

------------------------------------------------------------------------
r587 | fabricecolin | 2006-11-18 15:36:10 +0800 (Sat, 18 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Collect/pinot-collect.1
   M /trunk/Index/pinot-index.1
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1

Updated version in man pages.

------------------------------------------------------------------------
r586 | fabricecolin | 2006-11-18 15:24:34 +0800 (Sat, 18 Nov 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/configure.in
   M /trunk/po/es.po
   M /trunk/po/fr.po

Updating po and NEWS, releasing 0.63 today.

------------------------------------------------------------------------
r585 | fabricecolin | 2006-11-18 14:23:24 +0800 (Sat, 18 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Utils/TimeConverter.cpp

Initialize struct tm to keep valgrind happy.

------------------------------------------------------------------------
r584 | fabricecolin | 2006-11-18 14:17:18 +0800 (Sat, 18 Nov 2006) | 3 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/TODO

Mention Nicolas Velin's contribution to the French po.
Removed from TODO a couple of items.

------------------------------------------------------------------------
r583 | fabricecolin | 2006-11-17 19:09:16 +0800 (Fri, 17 Nov 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

Added msf and sh to default filter list.
Treat documents on https as text/html if no handler application is found.

------------------------------------------------------------------------
r582 | fabricecolin | 2006-11-17 19:07:53 +0800 (Fri, 17 Nov 2006) | 3 lines
Changed paths:
   M /trunk/Tokenize/HtmlTokenizer.cpp
   M /trunk/Tokenize/HtmlTokenizer.h
   M /trunk/Tokenize/OpenDocumentTokenizer.cpp
   M /trunk/Tokenize/PdfTokenizer.cpp
   M /trunk/Tokenize/PdfTokenizer.h
   M /trunk/Tokenize/RtfTokenizer.cpp
   M /trunk/Tokenize/TagLibTokenizer.cpp
   M /trunk/Tokenize/TagLibTokenizer.h
   M /trunk/Tokenize/Tokenizer.cpp
   M /trunk/Tokenize/UnknownTypeTokenizer.cpp
   M /trunk/Tokenize/UnknownTypeTokenizer.h
   M /trunk/Tokenize/XmlTokenizer.cpp
   M /trunk/Tokenize/XmlTokenizer.h

Fixed pretty bad memory leak. Temporary Document objects were not freed most
of the time.

------------------------------------------------------------------------
r581 | fabricecolin | 2006-11-17 19:05:41 +0800 (Fri, 17 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/Yahoo.src

Removed superfluous parameters.

------------------------------------------------------------------------
r580 | fabricecolin | 2006-11-17 19:04:31 +0800 (Fri, 17 Nov 2006) | 3 lines
Changed paths:
   M /trunk/Collect/CurlDownloader.cpp

Watch out for NULL characters in the data received. This happens sometimes with
Yahoo! queries that return non-Latin results.

------------------------------------------------------------------------
r579 | fabricecolin | 2006-11-17 19:01:45 +0800 (Fri, 17 Nov 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/configure.in

The DBus connection can be closed if dbus < 0.70 (eg Fedora Core 5).
Unreferencing is not sufficient, it will raise a SIGBART signal.
Daemon catches exceptions, UI catches const char*.

------------------------------------------------------------------------
r578 | fabricecolin | 2006-11-14 23:16:47 +0800 (Tue, 14 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Search/QueryProperties.cpp
   M /trunk/Search/WebEngine.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h

XapianEngine::validateQuery() is now useful :-) WebEngine is less verbose.

------------------------------------------------------------------------
r577 | fabricecolin | 2006-11-14 22:00:30 +0800 (Tue, 14 Nov 2006) | 3 lines
Changed paths:
   M /trunk/po/es.po
   M /trunk/po/fr.po

Added new strings since 0.62, merged in fixes to French po made by Nicolas Velin
prior to updating templates in Rosetta.

------------------------------------------------------------------------
r576 | fabricecolin | 2006-11-14 21:23:10 +0800 (Tue, 14 Nov 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

Minor mods.

------------------------------------------------------------------------
r575 | fabricecolin | 2006-11-13 19:42:51 +0800 (Mon, 13 Nov 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/mainWindow.cc

Extract was not copied into the clipboard and result rows not correctly.

------------------------------------------------------------------------
r574 | fabricecolin | 2006-11-13 19:40:33 +0800 (Mon, 13 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Search/Google/GoogleAPIEngine.cpp
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/WebEngine.cpp
   M /trunk/Search/WebEngine.h

Use QueryProperties::getTerms() as it skips filters.

------------------------------------------------------------------------
r573 | fabricecolin | 2006-11-12 17:05:04 +0800 (Sun, 12 Nov 2006) | 4 lines
Changed paths:
   M /trunk/Search/AbstractGenerator.cpp
   M /trunk/Search/Google/GoogleAPIEngine.cpp
   M /trunk/Search/Google/GoogleAPIEngine.h
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/SearchEngineInterface.cpp
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Search/WebEngine.cpp
   M /trunk/Search/WebEngine.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Utils/Result.cpp
   M /trunk/Utils/Result.h

WebEngine now handles filtering results and highlighting abstracts, similarly
to AbstractGenerator.
Escape strings in markup. Minor cleanup.

------------------------------------------------------------------------
r572 | fabricecolin | 2006-11-12 13:11:06 +0800 (Sun, 12 Nov 2006) | 2 lines
Changed paths:
   M /trunk/README

Mention freedesktop.org's Autostart.

------------------------------------------------------------------------
r571 | fabricecolin | 2006-11-12 13:08:48 +0800 (Sun, 12 Nov 2006) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

In ResultsTree, don't re-parse the abstract, just rely on included markup.
Replaced the extract text view with a list to make this easier. Groups are
highlighted (search engine/host name).
Let columns autoresize in the results, index, engines and query trees.

------------------------------------------------------------------------
r570 | fabricecolin | 2006-11-12 13:03:36 +0800 (Sun, 12 Nov 2006) | 4 lines
Changed paths:
   M /trunk/Search/AbstractGenerator.cpp
   M /trunk/Search/AbstractGenerator.h
   M /trunk/Search/XapianEngine.cpp

Use a simple markup on terms that should be highlighted, so that the abstract
doesn't have to be parsed again when displayed.
That markup is conveniently the same as Pango's :-)

------------------------------------------------------------------------
r569 | fabricecolin | 2006-11-12 12:52:30 +0800 (Sun, 12 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/configure.in
   A /trunk/pinot-dbus-daemon.desktop
   M /trunk/pinot.spec.in

Let Autostart handle the daemon.

------------------------------------------------------------------------
r567 | fabricecolin | 2006-11-04 21:17:36 +0800 (Sat, 04 Nov 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

List bug fixes and new features since 0.61.

------------------------------------------------------------------------
r566 | fabricecolin | 2006-11-04 21:13:38 +0800 (Sat, 04 Nov 2006) | 3 lines
Changed paths:
   D /trunk/po/en.po
   M /trunk/po/es.po
   M /trunk/po/fr.po

Updated translations. I am taking over the Spanish po... only temporarily
hopefully :-)

------------------------------------------------------------------------
r565 | fabricecolin | 2006-11-04 18:25:00 +0800 (Sat, 04 Nov 2006) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

Merged text-docs into main package since most people only download that.

------------------------------------------------------------------------
r564 | fabricecolin | 2006-11-04 18:23:46 +0800 (Sat, 04 Nov 2006) | 2 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/TODO

Updates.

------------------------------------------------------------------------
r563 | fabricecolin | 2006-11-04 13:59:03 +0800 (Sat, 04 Nov 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot.cc

Some strings were not localized.
Don't alarm the user if the daemon index cannot be open, it just means it's not
been created just yet.

------------------------------------------------------------------------
r562 | fabricecolin | 2006-11-04 13:46:01 +0800 (Sat, 04 Nov 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/importDialog.cc

Removed unused variable.

------------------------------------------------------------------------
r561 | fabricecolin | 2006-11-04 12:13:46 +0800 (Sat, 04 Nov 2006) | 4 lines
Changed paths:
   M /trunk/README

Mention patterns, that the Flint backend is immune to the lock problem, when
monitor events are acted on, and that directory filters work as expected with
Xapian 0.9.8.

------------------------------------------------------------------------
r560 | fabricecolin | 2006-11-04 12:11:16 +0800 (Sat, 04 Nov 2006) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

DirectoryScanner checks whether files and directories are blacklisted so that
it can skip crawling those that are and remove those that didn't used to be.
Use unindexDocument() overload where it makes sense.
DEBUG output a bit less verbose.

------------------------------------------------------------------------
r559 | fabricecolin | 2006-11-04 12:08:03 +0800 (Sat, 04 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

Overloaded unindexDocument() to allow unindexing by location.

------------------------------------------------------------------------
r558 | fabricecolin | 2006-11-03 21:40:25 +0800 (Fri, 03 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/Accoona.src
   M /trunk/Search/Plugins/Exalead.src

Caught up with modified output.

------------------------------------------------------------------------
r557 | fabricecolin | 2006-11-03 20:40:34 +0800 (Fri, 03 Nov 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp

Added archive formats to file patterns blacklist.

------------------------------------------------------------------------
r556 | fabricecolin | 2006-11-03 20:21:41 +0800 (Fri, 03 Nov 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Changed message.

------------------------------------------------------------------------
r555 | fabricecolin | 2006-11-03 19:36:20 +0800 (Fri, 03 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Collect/pinot-collect.1
   M /trunk/Index/pinot-index.1
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/configure.in

Preparing for imminent 0.62 release. Updated man pages.

------------------------------------------------------------------------
r554 | fabricecolin | 2006-11-03 19:15:01 +0800 (Fri, 03 Nov 2006) | 6 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Don't close the D-Bus connection, unreference it. This removes the error message
"Applications can not close shared connections.  Please fix this in your app.
Ignoring close request and continuing." seen when the daemon exits.
Any such message seen when calling one of our methods comes from the client;
this holds true for dbus-send ;-)

------------------------------------------------------------------------
r553 | fabricecolin | 2006-11-03 19:02:52 +0800 (Fri, 03 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/TagLibTokenizer.cpp

Minor modification.

------------------------------------------------------------------------
r552 | fabricecolin | 2006-11-03 19:02:17 +0800 (Fri, 03 Nov 2006) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

When receiving a WRITE_CLOSED event, ensure the file was actually modified
before being closed.
This should fix a major bug where the daemon loops endlessly reindexing mp3/ogg
files. It seems the event is generated by the TagLib tokenizer.

------------------------------------------------------------------------
r551 | fabricecolin | 2006-11-02 22:40:26 +0800 (Thu, 02 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Utils/MIMEScanner.cpp

Less verbose.

------------------------------------------------------------------------
r550 | fabricecolin | 2006-11-02 22:39:45 +0800 (Thu, 02 Nov 2006) | 3 lines
Changed paths:
   M /trunk/README

New section on how to reset indexes.
Also added blurb about dbus-send and file patterns.

------------------------------------------------------------------------
r549 | fabricecolin | 2006-11-02 19:53:36 +0800 (Thu, 02 Nov 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

If queue_index() fails, display the reason string.
In importDialog, start pulsing the progress bar only when we know for sure that
the document was queued for indexing.

------------------------------------------------------------------------
r548 | fabricecolin | 2006-11-02 19:48:45 +0800 (Thu, 02 Nov 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.hh

File patterns are editable though the Preferences dialog box.

------------------------------------------------------------------------
r547 | fabricecolin | 2006-11-02 19:46:18 +0800 (Thu, 02 Nov 2006) | 6 lines
Changed paths:
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

Load and save glob patterns for files that shouldn't be indexed. Both
ThreadsManager::index_document() and OnDiskHandler::indexFile() now check files
with PinotSettings::isBlackListed().
Index_document() returns why it failed.
PinotSettings saves the current version string to allow automatic upgrades.

------------------------------------------------------------------------
r546 | fabricecolin | 2006-11-02 00:07:12 +0800 (Thu, 02 Nov 2006) | 2 lines
Changed paths:
   M /trunk/Utils/Document.cpp

No point trying to mmap() an empty file.

------------------------------------------------------------------------
r545 | fabricecolin | 2006-11-01 21:58:32 +0800 (Wed, 01 Nov 2006) | 3 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

XDIR and XLABEL always include a colon at indexing time, and they should here
as well.

------------------------------------------------------------------------
r544 | fabricecolin | 2006-10-31 22:19:54 +0800 (Tue, 31 Oct 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/PinotUtils.cpp
   M /trunk/UI/GTK2/src/PinotUtils.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

Queries' Last Run column and index lists' Timestamp column were sorted
alphabetically !

------------------------------------------------------------------------
r543 | fabricecolin | 2006-10-30 22:55:10 +0800 (Mon, 30 Oct 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

Refresh index lists when labels have changed and the combo is reset.

------------------------------------------------------------------------
r542 | fabricecolin | 2006-10-29 17:42:04 +0800 (Sun, 29 Oct 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc

Fixed warnings.

------------------------------------------------------------------------
r541 | fabricecolin | 2006-10-29 17:05:51 +0800 (Sun, 29 Oct 2006) | 4 lines
Changed paths:
   M /trunk/Index/LanguageDetector.cpp
   M /trunk/Index/Makefile.am
   M /trunk/Makefile.am
   M /trunk/configure.in

If libtextcat has textcat_Cat(), set HAVE_TEXTCAT_CAT to use this function
instead of textcat_Classify(). Install textcat3_conf.txt, so that if
textcat_Version() returns version 3 we can initialize the library with it.

------------------------------------------------------------------------
r540 | fabricecolin | 2006-10-29 16:26:23 +0800 (Sun, 29 Oct 2006) | 3 lines
Changed paths:
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/configure.in

Get the shared-mime-info prefix and use that instead of PREFIX to determine
where MIME files are to be found.

------------------------------------------------------------------------
r539 | fabricecolin | 2006-10-27 23:39:17 +0800 (Fri, 27 Oct 2006) | 2 lines
Changed paths:
   A /trunk/textcat3_conf.txt

A configuration file for language models included in the upcoming libtextcat 3.0.

------------------------------------------------------------------------
r538 | fabricecolin | 2006-10-24 20:41:18 +0800 (Tue, 24 Oct 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/EnginesTree.h
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/IndexPage.h
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/IndexTree.h
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/MboxHandler.h
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/Notebook.cpp
   M /trunk/UI/GTK2/src/Notebook.h
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.h
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/PinotUtils.cpp
   M /trunk/UI/GTK2/src/PinotUtils.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/indexDialog.cc
   M /trunk/UI/GTK2/src/indexDialog.hh
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/propertiesDialog.hh
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.hh

Added missing copyright notice.

------------------------------------------------------------------------
r537 | fabricecolin | 2006-10-24 18:46:15 +0800 (Tue, 24 Oct 2006) | 2 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexFactory.cpp
   M /trunk/Index/IndexFactory.h
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/LanguageDetector.cpp
   M /trunk/Index/LanguageDetector.h
   M /trunk/Index/XapianDatabase.cpp
   M /trunk/Index/XapianDatabase.h
   M /trunk/Index/XapianDatabaseFactory.cpp
   M /trunk/Index/XapianDatabaseFactory.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/Index/pinot-index.cpp
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/Monitor/INotifyMonitor.h
   M /trunk/Monitor/MonitorEvent.cpp
   M /trunk/Monitor/MonitorEvent.h
   M /trunk/Monitor/MonitorFactory.cpp
   M /trunk/Monitor/MonitorFactory.h
   M /trunk/Monitor/MonitorHandler.cpp
   M /trunk/Monitor/MonitorHandler.h
   M /trunk/Monitor/MonitorInterface.h
   M /trunk/Search/Google/GoogleAPIEngine.cpp
   M /trunk/Search/Google/GoogleAPIEngine.h

Added missing copyright notice.

------------------------------------------------------------------------
r536 | fabricecolin | 2006-10-24 18:26:18 +0800 (Tue, 24 Oct 2006) | 2 lines
Changed paths:
   M /trunk/Collect/CurlDownloader.cpp
   M /trunk/Collect/CurlDownloader.h
   M /trunk/Collect/DownloaderFactory.cpp
   M /trunk/Collect/DownloaderFactory.h
   M /trunk/Collect/DownloaderInterface.cpp
   M /trunk/Collect/DownloaderInterface.h
   M /trunk/Collect/FileCollector.cpp
   M /trunk/Collect/FileCollector.h
   M /trunk/Collect/MboxCollector.cpp
   M /trunk/Collect/MboxCollector.h
   M /trunk/Collect/NeonDownloader.cpp
   M /trunk/Collect/NeonDownloader.h
   M /trunk/Collect/XapianCollector.cpp
   M /trunk/Collect/XapianCollector.h
   M /trunk/Collect/pinot-collect.cpp
   M /trunk/Search/AbstractGenerator.cpp
   M /trunk/Search/AbstractGenerator.h
   M /trunk/Search/OpenSearchParser.cpp
   M /trunk/Search/OpenSearchParser.h
   M /trunk/Search/PluginParsers.h
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/PluginWebEngine.h
   M /trunk/Search/QueryProperties.cpp
   M /trunk/Search/QueryProperties.h
   M /trunk/Search/SearchEngineFactory.cpp
   M /trunk/Search/SearchEngineFactory.h
   M /trunk/Search/SearchEngineInterface.cpp
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Search/SearchPluginProperties.cpp
   M /trunk/Search/SearchPluginProperties.h
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Search/SherlockParser.h
   M /trunk/Search/WebEngine.cpp
   M /trunk/Search/WebEngine.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h
   M /trunk/Search/pinot-search.cpp
   M /trunk/Search/plugintest.cpp

Adeed missing copyright notice.

------------------------------------------------------------------------
r535 | fabricecolin | 2006-10-24 18:12:18 +0800 (Tue, 24 Oct 2006) | 2 lines
Changed paths:
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/CrawlHistory.h
   M /trunk/SQL/QueryHistory.cpp
   M /trunk/SQL/QueryHistory.h
   M /trunk/SQL/SQLiteBase.cpp
   M /trunk/SQL/SQLiteBase.h
   M /trunk/SQL/ViewHistory.cpp
   M /trunk/SQL/ViewHistory.h
   M /trunk/SQL/historytest.cpp
   M /trunk/Tokenize/HtmlTokenizer.cpp
   M /trunk/Tokenize/HtmlTokenizer.h
   M /trunk/Tokenize/OpenDocumentTokenizer.cpp
   M /trunk/Tokenize/OpenDocumentTokenizer.h
   M /trunk/Tokenize/PdfTokenizer.cpp
   M /trunk/Tokenize/PdfTokenizer.h
   M /trunk/Tokenize/RtfTokenizer.cpp
   M /trunk/Tokenize/RtfTokenizer.h
   M /trunk/Tokenize/TagLibTokenizer.cpp
   M /trunk/Tokenize/TagLibTokenizer.h
   M /trunk/Tokenize/Tokenizer.cpp
   M /trunk/Tokenize/Tokenizer.h
   M /trunk/Tokenize/TokenizerFactory.cpp
   M /trunk/Tokenize/TokenizerFactory.h
   M /trunk/Tokenize/UnknownTypeTokenizer.cpp
   M /trunk/Tokenize/UnknownTypeTokenizer.h
   M /trunk/Tokenize/WordTokenizer.cpp
   M /trunk/Tokenize/WordTokenizer.h
   M /trunk/Tokenize/XmlTokenizer.cpp
   M /trunk/Tokenize/XmlTokenizer.h
   M /trunk/Tokenize/tokenizertest.cpp
   M /trunk/Utils/Url.h

Do it properly !!!

------------------------------------------------------------------------
r534 | fabricecolin | 2006-10-24 13:48:19 +0800 (Tue, 24 Oct 2006) | 2 lines
Changed paths:
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/CrawlHistory.h
   M /trunk/SQL/QueryHistory.cpp
   M /trunk/SQL/QueryHistory.h
   M /trunk/SQL/SQLiteBase.cpp
   M /trunk/SQL/SQLiteBase.h
   M /trunk/SQL/ViewHistory.cpp
   M /trunk/SQL/ViewHistory.h
   M /trunk/SQL/historytest.cpp

Added missing copyright notice.

------------------------------------------------------------------------
r533 | fabricecolin | 2006-10-24 13:46:56 +0800 (Tue, 24 Oct 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/HtmlTokenizer.cpp
   M /trunk/Tokenize/HtmlTokenizer.h
   M /trunk/Tokenize/OpenDocumentTokenizer.cpp
   M /trunk/Tokenize/OpenDocumentTokenizer.h
   M /trunk/Tokenize/PdfTokenizer.cpp
   M /trunk/Tokenize/PdfTokenizer.h
   M /trunk/Tokenize/RtfTokenizer.cpp
   M /trunk/Tokenize/RtfTokenizer.h
   M /trunk/Tokenize/TagLibTokenizer.cpp
   M /trunk/Tokenize/TagLibTokenizer.h
   M /trunk/Tokenize/Tokenizer.cpp
   M /trunk/Tokenize/Tokenizer.h
   M /trunk/Tokenize/TokenizerFactory.cpp
   M /trunk/Tokenize/TokenizerFactory.h
   M /trunk/Tokenize/UnknownTypeTokenizer.cpp
   M /trunk/Tokenize/UnknownTypeTokenizer.h
   M /trunk/Tokenize/WordTokenizer.cpp
   M /trunk/Tokenize/WordTokenizer.h
   M /trunk/Tokenize/XmlTokenizer.cpp
   M /trunk/Tokenize/XmlTokenizer.h
   M /trunk/Tokenize/tokenizertest.cpp

Added missing copyright notice.

------------------------------------------------------------------------
r532 | fabricecolin | 2006-10-24 13:43:55 +0800 (Tue, 24 Oct 2006) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/A9.src

A9's output changed.

------------------------------------------------------------------------
r531 | fabricecolin | 2006-10-24 13:43:03 +0800 (Tue, 24 Oct 2006) | 2 lines
Changed paths:
   M /trunk/Utils/CommandLine.cpp
   M /trunk/Utils/CommandLine.h
   M /trunk/Utils/Document.cpp
   M /trunk/Utils/Document.h
   M /trunk/Utils/DocumentInfo.cpp
   M /trunk/Utils/DocumentInfo.h
   M /trunk/Utils/IndexedDocument.cpp
   M /trunk/Utils/IndexedDocument.h
   M /trunk/Utils/Languages.cpp
   M /trunk/Utils/Languages.h
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/MIMEScanner.h
   M /trunk/Utils/MboxParser.cpp
   M /trunk/Utils/MboxParser.h
   M /trunk/Utils/NLS.h
   M /trunk/Utils/Result.cpp
   M /trunk/Utils/Result.h
   M /trunk/Utils/StringManip.cpp
   M /trunk/Utils/StringManip.h
   M /trunk/Utils/TimeConverter.cpp
   M /trunk/Utils/TimeConverter.h
   M /trunk/Utils/Timer.cpp
   M /trunk/Utils/Timer.h
   M /trunk/Utils/Url.cpp
   M /trunk/Utils/Url.h

Added missing copyright notice.

------------------------------------------------------------------------
r530 | fabricecolin | 2006-10-21 13:19:22 +0800 (Sat, 21 Oct 2006) | 2 lines
Changed paths:
   M /trunk/Index/Makefile.am
   A /trunk/Index/XapianDatabase.cpp (from /trunk/Utils/XapianDatabase.cpp:528)
   A /trunk/Index/XapianDatabase.h (from /trunk/Utils/XapianDatabase.h:528)
   A /trunk/Index/XapianDatabaseFactory.cpp (from /trunk/Utils/XapianDatabaseFactory.cpp:528)
   A /trunk/Index/XapianDatabaseFactory.h (from /trunk/Utils/XapianDatabaseFactory.h:528)
   M /trunk/Makefile.am
   M /trunk/Monitor/Makefile.am
   M /trunk/Search/Google/Makefile.am
   M /trunk/Search/Makefile.am
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/Utils/Makefile.am
   D /trunk/Utils/XapianDatabase.cpp
   D /trunk/Utils/XapianDatabase.h
   D /trunk/Utils/XapianDatabaseFactory.cpp
   D /trunk/Utils/XapianDatabaseFactory.h

Moved XapianDatabase classes to Index, on which Search now depends.

------------------------------------------------------------------------
r528 | fabricecolin | 2006-10-18 21:08:33 +0800 (Wed, 18 Oct 2006) | 2 lines
Changed paths:
   M /trunk/Collect/pinot-collect.1
   M /trunk/Index/pinot-index.1
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1

Same man pages with new version number.

------------------------------------------------------------------------
r527 | fabricecolin | 2006-10-18 20:59:50 +0800 (Wed, 18 Oct 2006) | 3 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README
   M /trunk/TODO
   M /trunk/configure.in

Updated README and NEWS with latest changes, added to TODO list.
Releasing 0.61.

------------------------------------------------------------------------
r526 | fabricecolin | 2006-10-18 20:36:32 +0800 (Wed, 18 Oct 2006) | 2 lines
Changed paths:
   M /trunk/po/es.po
   M /trunk/po/fr.po

Updated translations.

------------------------------------------------------------------------
r525 | fabricecolin | 2006-10-17 21:37:06 +0800 (Tue, 17 Oct 2006) | 2 lines
Changed paths:
   M /trunk/Utils/xdgmime/xdgmime.c
   M /trunk/Utils/xdgmime/xdgmime.h
   M /trunk/Utils/xdgmime/xdgmimealias.c
   M /trunk/Utils/xdgmime/xdgmimecache.c
   M /trunk/Utils/xdgmime/xdgmimeglob.c
   M /trunk/Utils/xdgmime/xdgmimemagic.c

Imported GTK+'s version of xdgmime.

------------------------------------------------------------------------
r524 | fabricecolin | 2006-10-17 21:34:03 +0800 (Tue, 17 Oct 2006) | 10 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Finally woke up to the fact that :
- abstracts were most of the time bogus because term position wasn't incremented
 correctly at indexing time.
- updates didn't happen correctly, most of the time ? It seems to be due to the
 call to setDocumentLabels right after updateDocument. It was extraneous anyway
 since updateDocument preserves labels.
Doh !
Abstracts are generated for all documents, even if they have a sample field, as
produced by omindex. Some tweaks to the QueryParser setup.

------------------------------------------------------------------------
r523 | fabricecolin | 2006-10-16 21:59:29 +0800 (Mon, 16 Oct 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

If the document to open is a sub-type of text/plain and doesn't have a defined
application, use that of text/plain. Useful for types like text/x-authors.

------------------------------------------------------------------------
r522 | fabricecolin | 2006-10-15 19:29:35 +0800 (Sun, 15 Oct 2006) | 3 lines
Changed paths:
   M /trunk/pinot.spec.in

Require 0.9.7. There's no new API we make use of, but the changes to the
QueryParser are worth forcing an upgrade.

------------------------------------------------------------------------
r521 | fabricecolin | 2006-10-15 11:10:24 +0800 (Sun, 15 Oct 2006) | 3 lines
Changed paths:
   M /trunk/Search/Google/GoogleAPIEngine.cpp
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/QueryProperties.cpp
   M /trunk/Search/QueryProperties.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h

Run queries through the QueryParser, remove filters and only keep non-prefixed
terms when querying a Web engine, or generating an abstract.

------------------------------------------------------------------------
r520 | fabricecolin | 2006-10-15 08:40:43 +0800 (Sun, 15 Oct 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/mainWindow_glade.cc

Use more appropriate icon for the "Show all search engines" button.

------------------------------------------------------------------------
r519 | fabricecolin | 2006-10-15 08:17:57 +0800 (Sun, 15 Oct 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade

Should have committed this in revision 512.

------------------------------------------------------------------------
r518 | fabricecolin | 2006-10-15 08:16:13 +0800 (Sun, 15 Oct 2006) | 2 lines
Changed paths:
   A /trunk/Search/Plugins/GoogleCodeSearch.src

Plugin for the new Google code search service.

------------------------------------------------------------------------
r517 | fabricecolin | 2006-10-15 08:15:26 +0800 (Sun, 15 Oct 2006) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

Less verbose DEBUG output.

------------------------------------------------------------------------
r516 | fabricecolin | 2006-10-15 08:14:47 +0800 (Sun, 15 Oct 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp

Documents deleted since last crawl were not removed from the index if the
corresponding location wasn't monitored.

------------------------------------------------------------------------
r515 | fabricecolin | 2006-10-14 19:11:08 +0800 (Sat, 14 Oct 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/prefsDialog.cc

Mail accounts were saved only if there were no directories configured !

------------------------------------------------------------------------
r514 | fabricecolin | 2006-10-14 13:50:56 +0800 (Sat, 14 Oct 2006) | 2 lines
Changed paths:
   M /trunk/README

Updated section about Preferences.

------------------------------------------------------------------------
r513 | fabricecolin | 2006-10-14 13:50:02 +0800 (Sat, 14 Oct 2006) | 3 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/NEWS
   M /trunk/TODO

Updated NEWS and AUTHORS, removed completed items from TODO (and added one new
item).

------------------------------------------------------------------------
r512 | fabricecolin | 2006-10-14 13:41:06 +0800 (Sat, 14 Oct 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow_glade.cc

Widget hostnamegroup1 was active.

------------------------------------------------------------------------
r511 | fabricecolin | 2006-10-14 13:22:45 +0800 (Sat, 14 Oct 2006) | 7 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh

Simplified the UI to make it less scary to people used to Beagle :-)
By default, My Web Pages is not shown and the queries and engines lists are
hidden. The latter is shown/hidden by using the toggle button on the left
of the query field.
This and the previous changes to the Preferences box were suggested by
Manuel Breitfeld <manu_foren at gmx dot net>.

------------------------------------------------------------------------
r510 | fabricecolin | 2006-10-14 12:41:32 +0800 (Sat, 14 Oct 2006) | 3 lines
Changed paths:
   M /trunk/Collect/pinot-collect.1
   M /trunk/Index/pinot-index.1
   M /trunk/Search/pinot-search.1
   M /trunk/Search/pinot-search.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1

Previous check-in should have included pinot-search.cpp.
Updated man pages.

------------------------------------------------------------------------
r509 | fabricecolin | 2006-10-14 12:40:11 +0800 (Sat, 14 Oct 2006) | 10 lines
Changed paths:
   M /trunk/Search/Google/GoogleAPIEngine.cpp
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/QueryProperties.cpp
   M /trunk/Search/QueryProperties.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.hh
   M /trunk/UI/GTK2/src/queryDialog_glade.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.hh

Extensive modifications to enable using Xapian::QueryParser and get rid of the
straight-jacket of AND/OR/NOT/Phrase.
The live and stored queries in the UI as well as SimpleSearch's searchText can
be free queries mixing search terms and any number of filters, eg :
"type:text/html and lang:en and (tcp near ip)"
The downsides are that the host and file filters no longer apply to plugins
or the Google SOAP API engine, and that generated abstracts are pretty much
useless.
Revamped the query dialog for easy adding of filters.

------------------------------------------------------------------------
r508 | fabricecolin | 2006-10-14 12:23:26 +0800 (Sat, 14 Oct 2006) | 2 lines
Changed paths:
   M /trunk/Utils/StringManip.cpp
   M /trunk/Utils/StringManip.h

Modified extractField() method a bit.

------------------------------------------------------------------------
r507 | fabricecolin | 2006-10-13 21:12:12 +0800 (Fri, 13 Oct 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

Fixed warnings.

------------------------------------------------------------------------
r506 | fabricecolin | 2006-10-13 21:09:39 +0800 (Fri, 13 Oct 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.hh

Removed Edit buttons from prefsDialog Indexing tab.

------------------------------------------------------------------------
r505 | fabricecolin | 2006-10-12 22:57:08 +0800 (Thu, 12 Oct 2006) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

Better SuSE support, suggested by Marcus Rueckert <darix at web dot de>.

------------------------------------------------------------------------
r504 | fabricecolin | 2006-10-12 22:53:26 +0800 (Thu, 12 Oct 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.hh

Move My Documents and My Email under one tab labelled "Indexing".

------------------------------------------------------------------------
r503 | fabricecolin | 2006-10-07 00:38:23 +0800 (Sat, 07 Oct 2006) | 3 lines
Changed paths:
   M /trunk/Collect/MboxCollector.cpp
   M /trunk/Utils/MboxParser.cpp
   M /trunk/Utils/MboxParser.h

MboxCollector can access any part of a message.
Removed hash ("h=...") from URL scheme.

------------------------------------------------------------------------
r502 | fabricecolin | 2006-10-06 22:45:04 +0800 (Fri, 06 Oct 2006) | 2 lines
Changed paths:
   M /trunk/Utils/MboxParser.cpp
   M /trunk/Utils/MboxParser.h

Go through all of a message's parts. Don't skip parts based on their MIME type.

------------------------------------------------------------------------
r501 | fabricecolin | 2006-10-05 22:36:22 +0800 (Thu, 05 Oct 2006) | 2 lines
Changed paths:
   M /trunk/TODO

Rearranged/removed tasks somewhat.

------------------------------------------------------------------------
r500 | fabricecolin | 2006-09-30 12:47:17 +0800 (Sat, 30 Sep 2006) | 3 lines
Changed paths:
   M /trunk/Search/OpenSearchParser.cpp
   M /trunk/Search/OpenSearchParser.h

Allow mozSearch plugins too as they are similar to OpenSearch Description, even
though most, if not all, will return results in text/html !

------------------------------------------------------------------------
r499 | fabricecolin | 2006-09-30 11:56:39 +0800 (Sat, 30 Sep 2006) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

dbus-glib, not dbus, is required on Fedora, while on SuSE it's dbus-1-glib.

------------------------------------------------------------------------
r497 | fabricecolin | 2006-09-25 20:42:13 +0800 (Mon, 25 Sep 2006) | 3 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README

Corrected name of Deskbar plugin in README.
Updated NEWS with missing items, set release date to today.

------------------------------------------------------------------------
r496 | fabricecolin | 2006-09-25 20:26:55 +0800 (Mon, 25 Sep 2006) | 2 lines
Changed paths:
   M /trunk/pinot.desktop

Modified Categories.

------------------------------------------------------------------------
r495 | fabricecolin | 2006-09-25 20:25:45 +0800 (Mon, 25 Sep 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/Notebook.cpp
   M /trunk/UI/GTK2/src/Notebook.h

Further attempt at putting buttons in notebook tabs. This still doesn't work
correctly and is disabled. I'll have to revisit this later...

------------------------------------------------------------------------
r494 | fabricecolin | 2006-09-25 20:23:40 +0800 (Mon, 25 Sep 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc

Label text change.

------------------------------------------------------------------------
r493 | fabricecolin | 2006-09-25 20:22:17 +0800 (Mon, 25 Sep 2006) | 2 lines
Changed paths:
   M /trunk/po/es.po
   M /trunk/po/fr.po

Updated translations.

------------------------------------------------------------------------
r492 | fabricecolin | 2006-09-23 21:21:33 +0800 (Sat, 23 Sep 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Cosmetic change.

------------------------------------------------------------------------
r491 | fabricecolin | 2006-09-23 15:44:31 +0800 (Sat, 23 Sep 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Don't set the status on stop().

------------------------------------------------------------------------
r490 | fabricecolin | 2006-09-21 20:04:54 +0800 (Thu, 21 Sep 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   D /trunk/UI/pinot-deskbar.py
   A /trunk/UI/pinot-live.py (from /trunk/UI/pinot-deskbar.py:463)
   M /trunk/pinot.spec.in

Renamed deskbar plugin to pinot-live.py

------------------------------------------------------------------------
r489 | fabricecolin | 2006-09-20 22:24:47 +0800 (Wed, 20 Sep 2006) | 3 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Monitor/MonitorEvent.cpp
   M /trunk/Search/QueryProperties.cpp
   M /trunk/Search/SearchPluginProperties.cpp
   M /trunk/Tokenize/HtmlTokenizer.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/Utils/Document.cpp
   M /trunk/Utils/DocumentInfo.cpp
   M /trunk/Utils/IndexedDocument.cpp
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/Result.cpp
   M /trunk/Utils/Timer.cpp
   M /trunk/Utils/Url.cpp
   M /trunk/Utils/XapianDatabase.cpp

Copy operators check we are not trying to copy the current object.
Some didn't return anything !

------------------------------------------------------------------------
r488 | fabricecolin | 2006-09-14 19:19:18 +0800 (Thu, 14 Sep 2006) | 2 lines
Changed paths:
   M /trunk/TODO

Slightly less to do...

------------------------------------------------------------------------
r487 | fabricecolin | 2006-09-14 19:15:04 +0800 (Thu, 14 Sep 2006) | 2 lines
Changed paths:
   M /trunk/README

Clarified a few things, added blurb about the Deskbar Applet plugin.

------------------------------------------------------------------------
r486 | fabricecolin | 2006-09-13 22:45:14 +0800 (Wed, 13 Sep 2006) | 2 lines
Changed paths:
   M /trunk/Index/pinot-index.cpp

Align help text nicely.

------------------------------------------------------------------------
r485 | fabricecolin | 2006-09-13 22:41:25 +0800 (Wed, 13 Sep 2006) | 2 lines
Changed paths:
   M /trunk/README

Talk a bit more about how the D-Bus service functions.

------------------------------------------------------------------------
r484 | fabricecolin | 2006-09-13 21:17:48 +0800 (Wed, 13 Sep 2006) | 2 lines
Changed paths:
   M /trunk/README

Hugely more useful README !

------------------------------------------------------------------------
r483 | fabricecolin | 2006-09-13 20:57:38 +0800 (Wed, 13 Sep 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

Updated with recent changes.

------------------------------------------------------------------------
r482 | fabricecolin | 2006-09-13 20:56:25 +0800 (Wed, 13 Sep 2006) | 2 lines
Changed paths:
   M /trunk/AUTHORS

Mention code was borrowed from wget.

------------------------------------------------------------------------
r481 | fabricecolin | 2006-09-13 20:55:38 +0800 (Wed, 13 Sep 2006) | 3 lines
Changed paths:
   M /trunk/Collect/Makefile.am
   M /trunk/Index/Makefile.am
   M /trunk/Search/Makefile.am
   M /trunk/Tokenize/Makefile.am
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/Utils/Makefile.am

Bundle Utils classes needed by the tokenizers in libBasicUtils, WITHOUT any
static data that would mess things up in the UI after it loads the tokenizers.

------------------------------------------------------------------------
r480 | fabricecolin | 2006-09-13 20:53:48 +0800 (Wed, 13 Sep 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh

Start the service if there are directories OR mbox files to index !

------------------------------------------------------------------------
r479 | fabricecolin | 2006-09-13 20:51:31 +0800 (Wed, 13 Sep 2006) | 2 lines
Changed paths:
   M /trunk/Index/pinot-index.1
   M /trunk/Index/pinot-index.cpp

Added --showinfo option. This outputs the document's DocumentInfo, with labels.

------------------------------------------------------------------------
r478 | fabricecolin | 2006-09-13 20:48:00 +0800 (Wed, 13 Sep 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/Utils/XapianDatabase.cpp

Minor changea and less verbose debug output.

------------------------------------------------------------------------
r477 | fabricecolin | 2006-09-13 20:47:10 +0800 (Wed, 13 Sep 2006) | 2 lines
Changed paths:
   M /trunk/Utils/Timer.cpp

Doh ! What kind of broken timer is that !?

------------------------------------------------------------------------
r476 | fabricecolin | 2006-09-12 21:13:47 +0800 (Tue, 12 Sep 2006) | 4 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/UI/GTK2/src/prefsDialog.cc

DBusXapianIndex exports the GetStatistics method. It's invoked when validating
new preferences if there are locations to index. D-Bus activation will then
start the service if not already running.

------------------------------------------------------------------------
r475 | fabricecolin | 2006-09-09 14:15:05 +0800 (Sat, 09 Sep 2006) | 3 lines
Changed paths:
   M /trunk/Utils/StringManip.cpp
   M /trunk/Utils/TimeConverter.cpp

Portability fixes. On platforms that don't have timegm(), use wget's
mktime_from_utc() function.

------------------------------------------------------------------------
r474 | fabricecolin | 2006-09-09 10:25:28 +0800 (Sat, 09 Sep 2006) | 2 lines
Changed paths:
   M /trunk/Collect/pinot-collect.1
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1

Updated man pages date.

------------------------------------------------------------------------
r473 | fabricecolin | 2006-09-08 20:35:34 +0800 (Fri, 08 Sep 2006) | 3 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/README

Mention code was borrowed from Xapian, and that D-Bus and its Glib bindings
are required.

------------------------------------------------------------------------
r472 | fabricecolin | 2006-09-08 20:33:52 +0800 (Fri, 08 Sep 2006) | 6 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Utils/StringManip.cpp
   M /trunk/Utils/StringManip.h
   M /trunk/configure.in

Borrowed code from Xapian so that the timestamp of documents is stored in the
format used by Omega, as modtime in the document data, and as a value that
allows sorting by date.
In configure.in, added necessary checks and backtracked on recent change to
AC_OUTPUT() : Search/Google/Makefile should be generated conditionally.

------------------------------------------------------------------------
r471 | fabricecolin | 2006-09-08 19:43:31 +0800 (Fri, 08 Sep 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

OnDiskHandler and DirectoryScannerThread populate CrawlHistory correctly.
MonitorThread doesn't own the handler object.

------------------------------------------------------------------------
r470 | fabricecolin | 2006-09-08 19:39:57 +0800 (Fri, 08 Sep 2006) | 2 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/Monitor/INotifyMonitor.h

Deal with IN_MOVE_SELF.

------------------------------------------------------------------------
r469 | fabricecolin | 2006-09-07 23:03:01 +0800 (Thu, 07 Sep 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Fix in previous commit on WorkerThreads.
Cosmetic change to OnDiskHandler.

------------------------------------------------------------------------
r468 | fabricecolin | 2006-09-07 21:29:08 +0800 (Thu, 07 Sep 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/pinot.spec.in

Install the deskbar plugin, package in separate RPM.

------------------------------------------------------------------------
r467 | fabricecolin | 2006-09-07 19:50:27 +0800 (Thu, 07 Sep 2006) | 2 lines
Changed paths:
   M /trunk/Monitor/MonitorHandler.cpp
   M /trunk/Monitor/MonitorHandler.h
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Update signalling in MonitorHandler is no longer useful.

------------------------------------------------------------------------
r466 | fabricecolin | 2006-09-07 19:41:21 +0800 (Thu, 07 Sep 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.h

OnDisk adds a label for the source the document being indexed belongs to.
Protect against concurrent access.
Removed unnecessary call to setDocumentLabels() in Mbox.

------------------------------------------------------------------------
r465 | fabricecolin | 2006-09-07 19:38:20 +0800 (Thu, 07 Sep 2006) | 4 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/Monitor/INotifyMonitor.h

Generate a CREATED event for directories moved from somewhere that was not
monitored. Don't generate an internal event when a new directory is created.
Protect against concurrent access.

------------------------------------------------------------------------
r464 | fabricecolin | 2006-09-07 19:35:33 +0800 (Thu, 07 Sep 2006) | 3 lines
Changed paths:
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/CrawlHistory.h
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

DirectoryScanner deletes items and informs the MonitorHandler for all entries
associated to the source that were not found by the current crawl.

------------------------------------------------------------------------
r463 | fabricecolin | 2006-09-07 08:24:02 +0800 (Thu, 07 Sep 2006) | 3 lines
Changed paths:
   M /trunk/UI/pinot-deskbar.py

Somewhat better plugin. Handler inherits from SignallingHandler and calls to
GetDocumentInfo are asynchronous.

------------------------------------------------------------------------
r462 | fabricecolin | 2006-09-05 20:14:31 +0800 (Tue, 05 Sep 2006) | 2 lines
Changed paths:
   A /trunk/UI/pinot-deskbar.py

First working version of a plugin for deskbar-applet.

------------------------------------------------------------------------
r461 | fabricecolin | 2006-09-05 20:14:02 +0800 (Tue, 05 Sep 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot.cc

Cosmetic changes.

------------------------------------------------------------------------
r460 | fabricecolin | 2006-09-05 20:13:29 +0800 (Tue, 05 Sep 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

A lot of changes that boil down to making correct use of the D-Bus API,
eg process messages in the right place.

------------------------------------------------------------------------
r459 | fabricecolin | 2006-09-04 23:03:21 +0800 (Mon, 04 Sep 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

Fixed previous check-in !

------------------------------------------------------------------------
r458 | fabricecolin | 2006-09-04 19:45:43 +0800 (Mon, 04 Sep 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml

Fixed usage of array in GetDocumentLabels and SimpleQuery methods.

------------------------------------------------------------------------
r457 | fabricecolin | 2006-09-03 16:42:17 +0800 (Sun, 03 Sep 2006) | 2 lines
Changed paths:
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/MIMEScanner.h

Protect calls to xdgmime with mutex.

------------------------------------------------------------------------
r456 | fabricecolin | 2006-09-02 16:19:50 +0800 (Sat, 02 Sep 2006) | 2 lines
Changed paths:
   M /trunk/Search/SearchEngineFactory.cpp

Check HAVE_GOOGLEAPI.

------------------------------------------------------------------------
r455 | fabricecolin | 2006-09-02 16:18:32 +0800 (Sat, 02 Sep 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh

Monitoring indexable locations is optional.

------------------------------------------------------------------------
r454 | fabricecolin | 2006-09-02 15:58:22 +0800 (Sat, 02 Sep 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc

Removed obsolete cache stuff from DownloadingThread.

------------------------------------------------------------------------
r453 | fabricecolin | 2006-09-02 15:55:12 +0800 (Sat, 02 Sep 2006) | 2 lines
Changed paths:
   M /trunk/Index/pinot-index.cpp
   M /trunk/Search/pinot-search.cpp
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc

Initialize and shutdown HtmlTokenizer.

------------------------------------------------------------------------
r452 | fabricecolin | 2006-09-02 15:53:52 +0800 (Sat, 02 Sep 2006) | 2 lines
Changed paths:
   M /trunk/configure.in

It should be ok to generate Search/Google/Makefile when SOAP support is off.

------------------------------------------------------------------------
r451 | fabricecolin | 2006-09-02 15:51:42 +0800 (Sat, 02 Sep 2006) | 3 lines
Changed paths:
   M /trunk/Tokenize/HtmlTokenizer.cpp
   M /trunk/Tokenize/HtmlTokenizer.h

This wasn't thread-safe. xmlInitParser() shouldn't be called by each thread.
Moreover the parsed document wasn't freed.

------------------------------------------------------------------------
r450 | fabricecolin | 2006-09-02 11:42:09 +0800 (Sat, 02 Sep 2006) | 3 lines
Changed paths:
   M /trunk/Index/pinot-index.1
   M /trunk/Index/pinot-index.cpp

Made sure index was open in the appropriate mode.
Removed reference to pinot-search in man page.

------------------------------------------------------------------------
r449 | fabricecolin | 2006-08-31 19:46:35 +0800 (Thu, 31 Aug 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/MboxHandler.h
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Support for move and delete events on directories. OnDisk will move or delete
all documents under a given directory.

------------------------------------------------------------------------
r448 | fabricecolin | 2006-08-31 19:44:26 +0800 (Thu, 31 Aug 2006) | 3 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/Monitor/MonitorHandler.h

If a watch has moved, INotifyMonitor updates its details.
New methods to MonitorHandler for events on directories.

------------------------------------------------------------------------
r447 | fabricecolin | 2006-08-31 19:42:41 +0800 (Thu, 31 Aug 2006) | 3 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

List of documents under a given directory can be obtained with
listDocumentsInDirectory().

------------------------------------------------------------------------
r446 | fabricecolin | 2006-08-30 22:15:46 +0800 (Wed, 30 Aug 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

Slightly better at monitoring directories. New directories are crawled and
monitored but moving and deletion don't do the right thing just yet.

------------------------------------------------------------------------
r445 | fabricecolin | 2006-08-30 20:21:55 +0800 (Wed, 30 Aug 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp

Minor fixes. OnDiskHandler sets the document's title to the file name, not
the full URL.

------------------------------------------------------------------------
r444 | fabricecolin | 2006-08-29 21:40:43 +0800 (Tue, 29 Aug 2006) | 2 lines
Changed paths:
   M /trunk/SQL/SQLiteBase.cpp
   M /trunk/Tokenize/HtmlTokenizer.cpp

Less verbose in DEBUG mode.

------------------------------------------------------------------------
r443 | fabricecolin | 2006-08-29 21:39:00 +0800 (Tue, 29 Aug 2006) | 3 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp

Backtracking on revision 353's changes. This will have to be revisited at some
point though.

------------------------------------------------------------------------
r442 | fabricecolin | 2006-08-29 21:31:28 +0800 (Tue, 29 Aug 2006) | 4 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexFactory.cpp
   M /trunk/Index/IndexFactory.h
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/Makefile.am
   D /trunk/Index/WritableXapianIndex.cpp
   D /trunk/Index/WritableXapianIndex.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/Index/pinot-index.cpp
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/MboxHandler.h
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.h
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

On second thought, merged WritableXapianIndex back into XapianIndex. This
complicated matters unnecessarily, especially since R/W access is handled so
nicely by XapianDatabase.

------------------------------------------------------------------------
r441 | fabricecolin | 2006-08-28 19:22:21 +0800 (Mon, 28 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/prefsDialog.cc

Not all preferences were saved !

------------------------------------------------------------------------
r440 | fabricecolin | 2006-08-27 10:38:26 +0800 (Sun, 27 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc

Expand queries with ExpandQueryThread rather than QueryingThread.

------------------------------------------------------------------------
r439 | fabricecolin | 2006-08-27 10:35:51 +0800 (Sun, 27 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Monitor/Makefile.am
   M /trunk/Monitor/MonitorFactory.cpp
   M /trunk/Search/Makefile.am
   M /trunk/Search/PluginWebEngine.cpp

Fixed conditional building.

------------------------------------------------------------------------
r438 | fabricecolin | 2006-08-26 19:48:36 +0800 (Sat, 26 Aug 2006) | 2 lines
Changed paths:
   M /trunk/AUTHORS

Mention Reini's contribution.

------------------------------------------------------------------------
r437 | fabricecolin | 2006-08-26 19:43:57 +0800 (Sat, 26 Aug 2006) | 5 lines
Changed paths:
   M /trunk/Collect/Makefile.am
   M /trunk/Index/Makefile.am
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/Monitor/Makefile.am
   M /trunk/Monitor/MonitorFactory.cpp
   M /trunk/SQL/Makefile.am
   M /trunk/Search/Makefile.am
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Tokenize/Makefile.am
   M /trunk/Tokenize/TokenizerFactory.cpp
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/configure.in

A whole bunch of changes for building with CygWin, courtesy of Reini Urban
(rurban AT x-ray DOT at). Thanks !
INotifyMonitor and SherlockParser are built based on the availability of
inotify and boost Spirit, respectively.

------------------------------------------------------------------------
r436 | fabricecolin | 2006-08-26 18:21:08 +0800 (Sat, 26 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp

Cosmetic changes.

------------------------------------------------------------------------
r435 | fabricecolin | 2006-08-26 17:01:14 +0800 (Sat, 26 Aug 2006) | 4 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/WritableXapianIndex.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Utils/XapianDatabase.cpp
   M /trunk/Utils/XapianDatabase.h

Reopen the database to the latest version before adding it to another one
in XapianDatabase, before any read operations in DBusXapianIndex and before
querying it in XapianEngine.

------------------------------------------------------------------------
r434 | fabricecolin | 2006-08-26 16:33:31 +0800 (Sat, 26 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Collect/pinot-collect.1
   M /trunk/Index/pinot-index.1
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   M /trunk/UI/GTK2/src/pinot.1

Updated version number.

------------------------------------------------------------------------
r433 | fabricecolin | 2006-08-26 11:47:45 +0800 (Sat, 26 Aug 2006) | 3 lines
Changed paths:
   M /trunk/configure.in

Cut down on the number of calls to AC_OUTPUT, until I figure out how to do it
properly ;-)

------------------------------------------------------------------------
r432 | fabricecolin | 2006-08-26 11:46:16 +0800 (Sat, 26 Aug 2006) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

On SuSE, pdftotext is provided by xpdf-tools, not poppler-utils.

------------------------------------------------------------------------
r431 | fabricecolin | 2006-08-26 11:44:38 +0800 (Sat, 26 Aug 2006) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.cc

My Documents becomes My Web Pages, My Computer becomes My Documents.
Use the "merged" index for terms suggestion, More Like This and determining
which documents are indexed locally.
Other miscellaneous changes.

------------------------------------------------------------------------
r430 | fabricecolin | 2006-08-26 11:41:09 +0800 (Sat, 26 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.hh

Manage the list of indexable locations.

------------------------------------------------------------------------
r429 | fabricecolin | 2006-08-26 11:39:36 +0800 (Sat, 26 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h

Renamed MailAccountModelColumns to TimestampedModelColumns.

------------------------------------------------------------------------
r428 | fabricecolin | 2006-08-26 11:38:08 +0800 (Sat, 26 Aug 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/importDialog_glade.cc
   M /trunk/UI/GTK2/src/importDialog_glade.hh

Simplified importing. Since the daemon takes care of local files, only URLs
can be imported into the index.

------------------------------------------------------------------------
r427 | fabricecolin | 2006-08-26 11:36:20 +0800 (Sat, 26 Aug 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade

Indexable locations are configured in the preferences box. Only URLs can be
imported now.

------------------------------------------------------------------------
r426 | fabricecolin | 2006-08-26 11:32:03 +0800 (Sat, 26 Aug 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot.cc

Merge both index and daemon into one, this will be useful for terms suggestions
and More Like This.

------------------------------------------------------------------------
r425 | fabricecolin | 2006-08-26 11:30:28 +0800 (Sat, 26 Aug 2006) | 3 lines
Changed paths:
   M /trunk/Utils/XapianDatabase.cpp

If opening a read-only database that doesn't exist, create it first instead of
failing miserably :-)

------------------------------------------------------------------------
r424 | fabricecolin | 2006-08-26 10:38:26 +0800 (Sat, 26 Aug 2006) | 3 lines
Changed paths:
   M /trunk/Search/AbstractGenerator.cpp

Don't fail if a term's position list cannot be found, it's to be expected if
the query's terms were OR'ed. And check the start position makes sense too !

------------------------------------------------------------------------
r423 | fabricecolin | 2006-08-26 10:33:52 +0800 (Sat, 26 Aug 2006) | 2 lines
Changed paths:
   M /trunk/SQL/SQLiteBase.cpp
   M /trunk/Utils/XapianDatabase.cpp
   M /trunk/Utils/XapianDatabaseFactory.cpp

Fewer DEBUG messages.

------------------------------------------------------------------------
r422 | fabricecolin | 2006-08-26 09:36:43 +0800 (Sat, 26 Aug 2006) | 3 lines
Changed paths:
   M /trunk/Utils/XapianDatabase.cpp
   M /trunk/Utils/XapianDatabase.h
   M /trunk/Utils/XapianDatabaseFactory.cpp
   M /trunk/Utils/XapianDatabaseFactory.h

Allow to add a database to another with Xapian::Database::add_database() while
making sure both are read-locked.

------------------------------------------------------------------------
r421 | fabricecolin | 2006-08-26 09:34:15 +0800 (Sat, 26 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

getCloseTerms() can suggest terms starting with an upper-case letter.

------------------------------------------------------------------------
r420 | fabricecolin | 2006-08-24 21:20:28 +0800 (Thu, 24 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/WritableXapianIndex.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

Cosmetic changes.

------------------------------------------------------------------------
r419 | fabricecolin | 2006-08-24 19:33:17 +0800 (Thu, 24 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Monitor/MonitorEvent.cpp
   M /trunk/Search/SearchPluginProperties.cpp
   M /trunk/Utils/Url.cpp
   M /trunk/Utils/Url.h
   M /trunk/Utils/XapianDatabase.cpp

Fixed issues with some copy constructors.

------------------------------------------------------------------------
r418 | fabricecolin | 2006-08-22 19:56:58 +0800 (Tue, 22 Aug 2006) | 2 lines
Changed paths:
   M /trunk/SQL/CrawlHistory.cpp

Forgot to unescape URLs in getSourceItems().

------------------------------------------------------------------------
r417 | fabricecolin | 2006-08-21 21:49:35 +0800 (Mon, 21 Aug 2006) | 6 lines
Changed paths:
   M /trunk/Monitor/MonitorHandler.cpp
   M /trunk/Monitor/MonitorHandler.h
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

Renamed MonitorHandler::getLocations() to getFileNames() since this only deals
with files. Monitoring those is done by MonitoringThread, which checks for
events right after initializing the handler.
OnDiskHandler::indexFile() creates an empty document if the file couldn't be
downloaded.

------------------------------------------------------------------------
r416 | fabricecolin | 2006-08-21 20:01:29 +0800 (Mon, 21 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp

Bug fix in retrievePendingEvents().

------------------------------------------------------------------------
r415 | fabricecolin | 2006-08-19 23:28:06 +0800 (Sat, 19 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

Fix for previous check-in.

------------------------------------------------------------------------
r414 | fabricecolin | 2006-08-19 22:30:31 +0800 (Sat, 19 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

Don't request write access in hasLabel().

------------------------------------------------------------------------
r413 | fabricecolin | 2006-08-19 20:04:57 +0800 (Sat, 19 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Collect/pinot-collect.1
   M /trunk/Index/pinot-index.1
   M /trunk/NEWS
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/configure.in

Preparing for 0.60 release.

------------------------------------------------------------------------
r412 | fabricecolin | 2006-08-19 19:43:26 +0800 (Sat, 19 Aug 2006) | 2 lines
Changed paths:
   M /trunk/po/POTFILES.in

Updated list of source files with translatable strings.

------------------------------------------------------------------------
r411 | fabricecolin | 2006-08-19 19:41:09 +0800 (Sat, 19 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/DaemonState.h
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/pinot.cc

Synced with changes to PinotSettings and DirectoryScannerThread.

------------------------------------------------------------------------
r410 | fabricecolin | 2006-08-19 19:35:25 +0800 (Sat, 19 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh

Synced with new PinotSettings and DirectoryScannerThread.

------------------------------------------------------------------------
r409 | fabricecolin | 2006-08-19 19:33:56 +0800 (Sat, 19 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.cpp

Caught up with changes made elsewhere.

------------------------------------------------------------------------
r408 | fabricecolin | 2006-08-19 19:32:36 +0800 (Sat, 19 Aug 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

Use PinotSettings::getR?Index() methods to get an index.
Definition of scanner's FileFound signal changed.

------------------------------------------------------------------------
r407 | fabricecolin | 2006-08-19 19:29:25 +0800 (Sat, 19 Aug 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h

Index factory methods return an Index onject of the right type depending on
where the index is located and whether DBus usage is enabled.
Dropped mail index.

------------------------------------------------------------------------
r406 | fabricecolin | 2006-08-19 19:26:26 +0800 (Sat, 19 Aug 2006) | 3 lines
Changed paths:
   M /trunk/Index/DBusXapianIndex.cpp
   M /trunk/Index/DBusXapianIndex.h
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/Makefile.am
   M /trunk/Index/WritableXapianIndex.cpp
   M /trunk/Index/WritableXapianIndex.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

Index object are copiable.
Build new classes.

------------------------------------------------------------------------
r405 | fabricecolin | 2006-08-19 19:22:04 +0800 (Sat, 19 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Index/pinot-index.cpp

Modified to use IndexFactory.

------------------------------------------------------------------------
r404 | fabricecolin | 2006-08-19 19:13:09 +0800 (Sat, 19 Aug 2006) | 3 lines
Changed paths:
   A /trunk/Index/IndexFactory.cpp
   A /trunk/Index/IndexFactory.h

Factory class to build read-only and read-write index objects. Supported types
are "xapian" and "dbus".

------------------------------------------------------------------------
r403 | fabricecolin | 2006-08-19 13:24:48 +0800 (Sat, 19 Aug 2006) | 4 lines
Changed paths:
   A /trunk/Index/DBusXapianIndex.cpp
   A /trunk/Index/DBusXapianIndex.h

An implementation of WritableIndexInterface that talks to the daemon via DBus.
Methods (un)indexDocument(s) don't do anything since they are not exported
by the daemon.

------------------------------------------------------------------------
r402 | fabricecolin | 2006-08-19 13:21:23 +0800 (Sat, 19 Aug 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml

Fixed a whole bunch of stuff DBus-wise.
On second thought, it doesn't make sense to allow users to (un)index documents
so the corresponding methods were removed.

------------------------------------------------------------------------
r401 | fabricecolin | 2006-08-18 19:03:26 +0800 (Fri, 18 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/MboxHandler.h
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.h

Fixed initialize(), implemented flushIndex(), synced with MonitorHandler.

------------------------------------------------------------------------
r400 | fabricecolin | 2006-08-18 18:57:42 +0800 (Fri, 18 Aug 2006) | 2 lines
Changed paths:
   M /trunk/SQL/CrawlHistory.cpp

Fixed SQL in getSourceItems().

------------------------------------------------------------------------
r399 | fabricecolin | 2006-08-18 18:56:52 +0800 (Fri, 18 Aug 2006) | 4 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/Monitor/INotifyMonitor.h
   M /trunk/Monitor/MonitorEvent.h
   M /trunk/Monitor/MonitorHandler.cpp
   M /trunk/Monitor/MonitorHandler.h
   M /trunk/Monitor/MonitorInterface.h

Upon success, addLocation() generates an internal event of type EXISTS that's
returned by the next call to retrievePendingEvents().
Some minor tweaks.

------------------------------------------------------------------------
r398 | fabricecolin | 2006-08-16 22:55:41 +0800 (Wed, 16 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Utils/MIMEScanner.cpp

Minor fix.

------------------------------------------------------------------------
r397 | fabricecolin | 2006-08-16 22:36:12 +0800 (Wed, 16 Aug 2006) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/MboxHandler.h
   M /trunk/UI/GTK2/src/OnDiskHandler.cpp
   M /trunk/UI/GTK2/src/OnDiskHandler.h

Synced with changes to MonitorHandler.
Both handlers remove documents that belong to sources that were previously
monitored but no longer are.
Use the daemon index for mail messages rather than a separate index.

------------------------------------------------------------------------
r396 | fabricecolin | 2006-08-16 22:10:35 +0800 (Wed, 16 Aug 2006) | 2 lines
Changed paths:
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/CrawlHistory.h

New methods getSources() and getSourceItems().

------------------------------------------------------------------------
r395 | fabricecolin | 2006-08-16 22:09:24 +0800 (Wed, 16 Aug 2006) | 4 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/Monitor/MonitorEvent.cpp
   M /trunk/Monitor/MonitorEvent.h
   M /trunk/Monitor/MonitorHandler.h

Modified MonitorHandler::getLocations(), added initialize() and m_isWatchi to
MonitorEvent.
Fixed events checking in INotifyMonitor.

------------------------------------------------------------------------
r394 | fabricecolin | 2006-08-12 15:47:23 +0800 (Sat, 12 Aug 2006) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml
   M /trunk/UI/GTK2/src/pinot.cc

All methods of WritableIndexInterface have DBus equivalents now, even though most
don't actually do anything useful just yet...
Both Pinot and the daemon set XAPIAN_PREFER_FLINT in the environment so that the
new indices will be created with the Flint backend, instead of Quartz.

------------------------------------------------------------------------
r393 | fabricecolin | 2006-08-11 23:20:29 +0800 (Fri, 11 Aug 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc

The index queue is now a queue, not a set. Uniqueness is guaranteed by
ThreadsManager::m_beingIndexed, which now covers indexing and updating.
URLs are removed from it by pop_queue().

------------------------------------------------------------------------
r392 | fabricecolin | 2006-08-11 23:13:19 +0800 (Fri, 11 Aug 2006) | 5 lines
Changed paths:
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/WritableXapianIndex.cpp
   M /trunk/Index/WritableXapianIndex.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

IndexInterface has a new method, getLastDocumentID().
In WritableXapianIndex, store the MIME type and the directory hierarchy
of the document with prefixes T and XDIR. Sorted out issues with language
when updating the document info.

------------------------------------------------------------------------
r391 | fabricecolin | 2006-08-10 20:03:24 +0800 (Thu, 10 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/Topix.src

Fixed results extraction.

------------------------------------------------------------------------
r390 | fabricecolin | 2006-08-10 20:00:27 +0800 (Thu, 10 Aug 2006) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

DaemonState uses file name as title, not the whole URL.
In ThreadsManager::queue_index(), queue documents if the load is too high.
DirectoryScannerThread checks the file's last modification time if it has
already been crawled.

------------------------------------------------------------------------
r389 | fabricecolin | 2006-08-10 19:55:17 +0800 (Thu, 10 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Index/WritableXapianIndex.cpp
   M /trunk/Search/SherlockParser.cpp

Cosmetic changes.

------------------------------------------------------------------------
r388 | fabricecolin | 2006-08-09 18:15:42 +0800 (Wed, 09 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/Makefile.am

Don't link the daemon program to gtkmm, only glibmm is necessary.

------------------------------------------------------------------------
r387 | fabricecolin | 2006-08-09 18:14:52 +0800 (Wed, 09 Aug 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/OnDiskHandler.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

MonitorThread is now more useful and checks which files have already been
crawled. Minor fix to OnDiskHandler.h.

------------------------------------------------------------------------
r386 | fabricecolin | 2006-08-09 18:11:58 +0800 (Wed, 09 Aug 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/MboxHandler.h
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/prefsDialog.cc

MboxHandler uses CrawlHistory to record which files have been crawled and when.
In PinotSettings, MailAccount and use of Gdk::Color were dropped.

------------------------------------------------------------------------
r385 | fabricecolin | 2006-08-09 18:09:02 +0800 (Wed, 09 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot.cc

Mail monitoring and indexing is now handled by the daemon program too.

------------------------------------------------------------------------
r384 | fabricecolin | 2006-08-09 17:46:09 +0800 (Wed, 09 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/UI/GTK2/src/de.berlios.Pinot.service.in
   M /trunk/configure.in

Fixes.

------------------------------------------------------------------------
r383 | fabricecolin | 2006-08-09 17:45:34 +0800 (Wed, 09 Aug 2006) | 4 lines
Changed paths:
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/CrawlHistory.h
   M /trunk/SQL/SQLiteBase.cpp

Some modifications to CrawlHistory to accomodate MboxHandler.
SQLiteBase sets up a busy handler so that we always retry operations
if the database file is locked.

------------------------------------------------------------------------
r382 | fabricecolin | 2006-08-09 15:36:46 +0800 (Wed, 09 Aug 2006) | 2 lines
Changed paths:
   M /trunk/SQL/CrawlHistory.cpp
   M /trunk/SQL/CrawlHistory.h

Added getItemsCount().

------------------------------------------------------------------------
r381 | fabricecolin | 2006-08-09 15:36:07 +0800 (Wed, 09 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml

Fixed handling of Disconnected, added methods GetStatistics and Stop.

------------------------------------------------------------------------
r380 | fabricecolin | 2006-08-09 13:58:58 +0800 (Wed, 09 Aug 2006) | 2 lines
Changed paths:
   A /trunk/Search/Plugins/MozDexDescription.xml

Brought MozDex plugin back in.

------------------------------------------------------------------------
r379 | fabricecolin | 2006-08-09 13:58:07 +0800 (Wed, 09 Aug 2006) | 4 lines
Changed paths:
   M /trunk/Makefile.am
   A /trunk/UI/GTK2/src/de.berlios.Pinot.service.in
   A /trunk/UI/GTK2/src/pinot-dbus-daemon.1
   A /trunk/acinclude.m4
   M /trunk/configure.in
   M /trunk/pinot.spec.in

Man page and DBus service file for the daemon program.
acinclude.m4 defines a useful macro for variables expansion, copied from
Raphaël Slinckx's tutorial at "http://raphael.slinckx.net/dbustutorial.php".

------------------------------------------------------------------------
r378 | fabricecolin | 2006-08-09 12:39:02 +0800 (Wed, 09 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml

New methods GetDocumentInfo and SimpleQuery.

------------------------------------------------------------------------
r377 | fabricecolin | 2006-08-09 11:14:51 +0800 (Wed, 09 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp

Always run a DirectoryScanner thread for each indexable location.

------------------------------------------------------------------------
r376 | fabricecolin | 2006-08-09 10:53:12 +0800 (Wed, 09 Aug 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc

DirectoryScannerThread records directories in CrawlHistory. The table is created
at startup if necessary by the daemon program.

------------------------------------------------------------------------
r375 | fabricecolin | 2006-08-08 23:05:09 +0800 (Tue, 08 Aug 2006) | 2 lines
Changed paths:
   A /trunk/SQL/CrawlHistory.cpp
   A /trunk/SQL/CrawlHistory.h
   M /trunk/SQL/Makefile.am

First shot at CrawlHistory.

------------------------------------------------------------------------
r374 | fabricecolin | 2006-08-05 12:39:20 +0800 (Sat, 05 Aug 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/DaemonState.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

WorkerThread::immediateFlush() controls whether threads that modify indexes
should flush before returning. This is turned off for the daemon.

------------------------------------------------------------------------
r373 | fabricecolin | 2006-08-04 21:23:59 +0800 (Fri, 04 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml

First functional version of the daemon. Updated Index method.

------------------------------------------------------------------------
r372 | fabricecolin | 2006-08-04 20:21:01 +0800 (Fri, 04 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/Makefile.am

Added new source.

------------------------------------------------------------------------
r371 | fabricecolin | 2006-08-04 20:14:57 +0800 (Fri, 04 Aug 2006) | 3 lines
Changed paths:
   A /trunk/UI/GTK2/src/DaemonState.cpp
   A /trunk/UI/GTK2/src/DaemonState.h
   A /trunk/UI/GTK2/src/OnDiskHandler.cpp
   A /trunk/UI/GTK2/src/OnDiskHandler.h

New classes to help the daemon. DaemonState manages crawling and monitoring,
while OnDiskHandler handles events generated by MonitorThread.

------------------------------------------------------------------------
r370 | fabricecolin | 2006-08-04 20:11:48 +0800 (Fri, 04 Aug 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h

Nested class TimestampedItem used for indexable locations.

------------------------------------------------------------------------
r369 | fabricecolin | 2006-08-04 20:04:58 +0800 (Fri, 04 Aug 2006) | 2 lines
Changed paths:
   M /trunk/Monitor/MonitorHandler.h
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/MboxHandler.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

Prototype of MonitorHandler::fileMoved() has changed.

------------------------------------------------------------------------
r368 | fabricecolin | 2006-08-04 19:59:37 +0800 (Fri, 04 Aug 2006) | 3 lines
Changed paths:
   M /trunk/Index/WritableXapianIndex.cpp
   M /trunk/Index/WritableXapianIndex.h

In updateDocumentInfo(), refresh the document's common terms (prefixed with U
etc...) and terms generated from the title.

------------------------------------------------------------------------
r367 | fabricecolin | 2006-07-21 22:43:46 +0800 (Fri, 21 Jul 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.cpp

Caught up with recent changes.

------------------------------------------------------------------------
r366 | fabricecolin | 2006-07-20 22:12:13 +0800 (Thu, 20 Jul 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot.cc

A few cosmetic changes. Open the deamon's index in read-only mode.

------------------------------------------------------------------------
r365 | fabricecolin | 2006-07-20 22:11:15 +0800 (Thu, 20 Jul 2006) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Synced with XapianIndex changes. Show daemon's index in engines list.
When viewing, if the type doesn't have a MIMEAction and the document's
protocol is http, do as if it was an html document as the browser is very
likely to be able to handle it.

------------------------------------------------------------------------
r364 | fabricecolin | 2006-07-20 22:03:04 +0800 (Thu, 20 Jul 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh

Make use of the Threadsmanager queue.

------------------------------------------------------------------------
r363 | fabricecolin | 2006-07-20 22:01:55 +0800 (Thu, 20 Jul 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/MboxHandler.h

Synced with XapianIndex changes.

------------------------------------------------------------------------
r362 | fabricecolin | 2006-07-20 22:00:55 +0800 (Thu, 20 Jul 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/propertiesDialog.cc

Minor fix : default to the first language in the list only if the name was
actually a language name.

------------------------------------------------------------------------
r361 | fabricecolin | 2006-07-20 21:56:38 +0800 (Thu, 20 Jul 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h

Load locations indexable by the daemon process. Define an index for the daemon
use (temporarily named "My Computer").

------------------------------------------------------------------------
r360 | fabricecolin | 2006-07-20 21:53:17 +0800 (Thu, 20 Jul 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

ThreadManager and IndexingThread expect the index to be specified.
If the type of the document to index is not supported, skip its content and
index only the metadata.

------------------------------------------------------------------------
r359 | fabricecolin | 2006-07-20 21:47:46 +0800 (Thu, 20 Jul 2006) | 3 lines
Changed paths:
   M /trunk/Utils/MIMEScanner.cpp

If the type doesn't have a default action, get a list of his parent types and
see if they do.

------------------------------------------------------------------------
r358 | fabricecolin | 2006-07-19 19:27:03 +0800 (Wed, 19 Jul 2006) | 2 lines
Changed paths:
   M /trunk/Index/WritableXapianIndex.cpp

If the document to index has no data, that's fine. We can still index metadata.

------------------------------------------------------------------------
r357 | fabricecolin | 2006-07-18 21:08:51 +0800 (Tue, 18 Jul 2006) | 3 lines
Changed paths:
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/Makefile.am
   A /trunk/Index/WritableXapianIndex.cpp
   A /trunk/Index/WritableXapianIndex.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/Index/pinot-index.cpp

Moved everything that requires a writable index to WritableIndexInterface
and WritableXapianIndex.

------------------------------------------------------------------------
r356 | fabricecolin | 2006-07-16 18:11:27 +0800 (Sun, 16 Jul 2006) | 2 lines
Changed paths:
   M /trunk/Utils/xdgmime/ChangeLog
   M /trunk/Utils/xdgmime/xdgmimemagic.c

Caught up with xdgmime.

------------------------------------------------------------------------
r355 | fabricecolin | 2006-07-16 18:09:20 +0800 (Sun, 16 Jul 2006) | 2 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/Utils/XapianDatabase.cpp
   M /trunk/Utils/XapianDatabase.h

Moved buildUrl() to XapianDatabase.

------------------------------------------------------------------------
r354 | fabricecolin | 2006-07-15 21:44:22 +0800 (Sat, 15 Jul 2006) | 2 lines
Changed paths:
   D /trunk/Index/indextest.cpp
   A /trunk/Index/pinot-index.1
   A /trunk/Index/pinot-index.cpp (from /trunk/Index/indextest.cpp:351)

Renamed indextest.cpp to pinot-index.cpp. Added man page.

------------------------------------------------------------------------
r353 | fabricecolin | 2006-07-15 21:34:12 +0800 (Sat, 15 Jul 2006) | 7 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/UI/GTK2/src/indexDialog.cc
   M /trunk/Utils/XapianDatabase.cpp

In XapianIndex::listDocuments*(), don't limit the number of document IDs if
maxDocsCount is 0.
In XapianEngine, use OP_FILTER for filters when possible so that weights are
not skewed.
In XapianDatabase and indexDialog, remote indexes have a location with no slash,
rather than one that doesn't start with a slash !

------------------------------------------------------------------------
r352 | fabricecolin | 2006-07-15 00:18:21 +0800 (Sat, 15 Jul 2006) | 3 lines
Changed paths:
   M /trunk/Utils/XapianDatabase.cpp
   M /trunk/Utils/XapianDatabase.h

Try to open the database if it's not already when one of the getter methods
is called.

------------------------------------------------------------------------
r351 | fabricecolin | 2006-07-14 23:57:09 +0800 (Fri, 14 Jul 2006) | 2 lines
Changed paths:
   M /trunk/Index/indextest.cpp

Updated this, it should prove useful later.

------------------------------------------------------------------------
r350 | fabricecolin | 2006-07-14 23:45:56 +0800 (Fri, 14 Jul 2006) | 3 lines
Changed paths:
   M /trunk/Collect/pinot-collect.cpp
   M /trunk/Search/pinot-search.cpp

In pinot-search, better call XapianDatabaseFactory::closeAll() before exiting.
Minor cleanup.

------------------------------------------------------------------------
r349 | fabricecolin | 2006-07-14 21:56:39 +0800 (Fri, 14 Jul 2006) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/XapianEngine.cpp

Show the type of Xapian::Error when caught.

------------------------------------------------------------------------
r348 | fabricecolin | 2006-07-14 20:12:57 +0800 (Fri, 14 Jul 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/Utils/DocumentInfo.cpp
   M /trunk/Utils/DocumentInfo.h

Simplified/refactored indexing code in the UI. Moved stuff useful to both the
UI and the future D-Bus daemon into ThreadsManager when it makes sense.
DocumentInfo can now hold a labels set.

------------------------------------------------------------------------
r347 | fabricecolin | 2006-07-14 20:08:55 +0800 (Fri, 14 Jul 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h

Score column gives some visual cue as to the relevance of results.

------------------------------------------------------------------------
r346 | fabricecolin | 2006-07-12 20:15:12 +0800 (Wed, 12 Jul 2006) | 4 lines
Changed paths:
   M /trunk/Makefile.am
   A /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   A /trunk/UI/GTK2/src/pinot-dbus-daemon.xml
   M /trunk/configure.in
   M /trunk/pinot.spec.in
   M /trunk/po/POTFILES.in

First shot at writing a D-Bus daemon that supports the method
de.berlios.Pinot.Index.
Bindings can be generated from pinot-dbus-daemon.xml with dbus-binding-tool.

------------------------------------------------------------------------
r345 | fabricecolin | 2006-07-07 20:40:59 +0800 (Fri, 07 Jul 2006) | 5 lines
Changed paths:
   M /trunk/Search/AbstractGenerator.cpp

Catch all possible exceptions thrown by Xapian in generateAbstract() to avoid
aborting the whole query. For instance, since position lists are not supported
by the remote backend, generateAbstract() would throw an exception and thus
prevent from querying a remote index.

------------------------------------------------------------------------
r343 | fabricecolin | 2006-07-05 19:41:48 +0800 (Wed, 05 Jul 2006) | 2 lines
Changed paths:
   M /trunk/Collect/pinot-collect.1
   M /trunk/README
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot.1

Clarified README, updated date of man pages.

------------------------------------------------------------------------
r342 | fabricecolin | 2006-07-05 19:07:09 +0800 (Wed, 05 Jul 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

Releasing v0.50.

------------------------------------------------------------------------
r341 | fabricecolin | 2006-07-04 19:29:03 +0800 (Tue, 04 Jul 2006) | 2 lines
Changed paths:
   M /trunk/po/es.po
   M /trunk/po/fr.po

Updated translations.

------------------------------------------------------------------------
r340 | fabricecolin | 2006-07-03 21:39:30 +0800 (Mon, 03 Jul 2006) | 2 lines
Changed paths:
   M /trunk/TODO

Revised the TODO list.

------------------------------------------------------------------------
r339 | fabricecolin | 2006-06-29 22:20:58 +0800 (Thu, 29 Jun 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Display a message if no application could be found for a given type.

------------------------------------------------------------------------
r338 | fabricecolin | 2006-06-28 19:08:33 +0800 (Wed, 28 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Collect/pinot-collect.1
   M /trunk/NEWS
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/configure.in

Preparing for 0.50 release...

------------------------------------------------------------------------
r337 | fabricecolin | 2006-06-28 18:45:08 +0800 (Wed, 28 Jun 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/PinotUtils.cpp
   M /trunk/UI/GTK2/src/PinotUtils.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

Enable sorting on most tree columns.

------------------------------------------------------------------------
r336 | fabricecolin | 2006-06-28 18:43:04 +0800 (Wed, 28 Jun 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot.cc

Expire query and view items older than one month.

------------------------------------------------------------------------
r335 | fabricecolin | 2006-06-28 18:41:36 +0800 (Wed, 28 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Utils/CommandLine.cpp

Don't look for substitution strings in arguments.

------------------------------------------------------------------------
r334 | fabricecolin | 2006-06-28 08:28:18 +0800 (Wed, 28 Jun 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

Summarized additions since last version.

------------------------------------------------------------------------
r333 | fabricecolin | 2006-06-28 08:19:44 +0800 (Wed, 28 Jun 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.hh

Workaround for bizarre bug that would cause a segfault when creating a query
that indexes and labels results based on a language filter.

------------------------------------------------------------------------
r332 | fabricecolin | 2006-06-26 19:20:29 +0800 (Mon, 26 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Utils/TimeConverter.cpp
   M /trunk/configure.in

Don't use timelocal(), check for timegm().

------------------------------------------------------------------------
r331 | fabricecolin | 2006-06-23 19:02:38 +0800 (Fri, 23 Jun 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Fix results indexing and labeling, accidentally broken by previous checkins.

------------------------------------------------------------------------
r330 | fabricecolin | 2006-06-22 21:58:35 +0800 (Thu, 22 Jun 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Rather than opening the new More Like query for editing, just add it/update
its details in the queries list.

------------------------------------------------------------------------
r329 | fabricecolin | 2006-06-22 19:01:23 +0800 (Thu, 22 Jun 2006) | 6 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

More Like This is activated if at least one indexed result is selected. It runs
the query against My Documents, gets expand terms and adds those to a copy
of the query object ("More Like query_name") that can be edited, stored and
run again.
Several other small changes and fixes.

------------------------------------------------------------------------
r328 | fabricecolin | 2006-06-22 18:56:55 +0800 (Thu, 22 Jun 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h

Trimmed down ResultsModelColumns. Method setSelectionState() replaces
setSelectionViewedState() and should be used when a result is indexed.

------------------------------------------------------------------------
r327 | fabricecolin | 2006-06-22 18:54:31 +0800 (Thu, 22 Jun 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh

Added More Like This item to the Results menu.

------------------------------------------------------------------------
r326 | fabricecolin | 2006-06-22 18:52:26 +0800 (Thu, 22 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.h

Last commit should have included this file too...

------------------------------------------------------------------------
r325 | fabricecolin | 2006-06-22 18:51:34 +0800 (Thu, 22 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/SearchEngineInterface.cpp
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h

Moved getExpandTerms() functionality to Search/XapianEngine.

------------------------------------------------------------------------
r324 | fabricecolin | 2006-06-22 18:47:46 +0800 (Thu, 22 Jun 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/Utils/Languages.cpp

Unknown is now in the languages list. This enables to search for documents
for which language detection failed.

------------------------------------------------------------------------
r323 | fabricecolin | 2006-06-21 21:31:38 +0800 (Wed, 21 Jun 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h

View results on double-click. Removed checkSelection() method.

------------------------------------------------------------------------
r322 | fabricecolin | 2006-06-17 00:06:53 +0800 (Sat, 17 Jun 2006) | 3 lines
Changed paths:
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

Index can obtain expand terms based on one or more documents. This should be
useful for a "more like this"-type feature.

------------------------------------------------------------------------
r321 | fabricecolin | 2006-06-16 21:36:02 +0800 (Fri, 16 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/PdfTokenizer.cpp
   M /trunk/Tokenize/PdfTokenizer.h

Switched to pdftotext, which seems to support more files than pdftohtml.

------------------------------------------------------------------------
r320 | fabricecolin | 2006-06-16 21:21:48 +0800 (Fri, 16 Jun 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/MboxHandler.h

Stopped using temporary labels to make lists of messages.

------------------------------------------------------------------------
r319 | fabricecolin | 2006-06-16 19:14:55 +0800 (Fri, 16 Jun 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/propertiesDialog.hh

Allow to change the language of several documents at once.

------------------------------------------------------------------------
r318 | fabricecolin | 2006-06-16 08:19:19 +0800 (Fri, 16 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   A /trunk/globalconfig.xml
   M /trunk/pinot.spec.in

Global config file.

------------------------------------------------------------------------
r317 | fabricecolin | 2006-06-15 23:27:13 +0800 (Thu, 15 Jun 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh

View Cache is now a menu that lists all cache providers. It is disabled when
none of the selected results belong to a supported protocol.
After editing a query, reselect the query in the list. Some minor fixes.

------------------------------------------------------------------------
r316 | fabricecolin | 2006-06-15 23:17:50 +0800 (Thu, 15 Jun 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/pinot.cc

Load global settings at startup. The only configuration item currently supported
is cache providers.

------------------------------------------------------------------------
r314 | fabricecolin | 2006-06-11 16:01:24 +0800 (Sun, 11 Jun 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/po/es.po
   M /trunk/po/fr.po

Releasing 0.49.

------------------------------------------------------------------------
r313 | fabricecolin | 2006-06-10 11:04:26 +0800 (Sat, 10 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/Makefile.am
   M /trunk/Tokenize/Tokenizer.cpp
   M /trunk/Utils/CommandLine.cpp
   M /trunk/Utils/CommandLine.h

New CommandLine::runSync(), called by Tokenizer::runHelperProgram().

------------------------------------------------------------------------
r312 | fabricecolin | 2006-06-10 11:03:03 +0800 (Sat, 10 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am

Distribute po/pinot.pot.

------------------------------------------------------------------------
r311 | fabricecolin | 2006-06-09 23:07:03 +0800 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Search/AbstractGenerator.cpp

Less chatty in DEBUG mode.

------------------------------------------------------------------------
r310 | fabricecolin | 2006-06-09 23:05:54 +0800 (Fri, 09 Jun 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

View Cache now uses the Google cache at http://www.google.com/search?q=cache:
and is enabled if at least one result on HTTP is selected. Non-HTTP results
will be open as with View.

------------------------------------------------------------------------
r309 | fabricecolin | 2006-06-09 21:47:44 +0800 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Collect/pinot-collect.1
   M /trunk/Search/pinot-search.1
   M /trunk/TODO
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/po/es.po
   M /trunk/po/fr.po

Synchronised with current source.

------------------------------------------------------------------------
r308 | fabricecolin | 2006-06-09 21:32:15 +0800 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Utils/Document.cpp
   M /trunk/Utils/IndexedDocument.cpp

Minor fix and cosmetic changes.

------------------------------------------------------------------------
r307 | fabricecolin | 2006-06-09 20:05:10 +0800 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/README
   M /trunk/pinot.spec.in
   M /trunk/po/POTFILES.in

Dropped references to internal viewer stuff.

------------------------------------------------------------------------
r306 | fabricecolin | 2006-06-09 20:02:53 +0800 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/mainWindow.cc

Remember whether the queries list is expanded.

------------------------------------------------------------------------
r305 | fabricecolin | 2006-06-09 19:35:14 +0800 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   D /trunk/UI/GTK2/index.html
   D /trunk/UI/GTK2/src/HtmlView.cpp
   D /trunk/UI/GTK2/src/HtmlView.h
   M /trunk/UI/GTK2/src/Makefile.am
   D /trunk/UI/RenderHTML
   M /trunk/configure.in

Removing internal viewer stuff.

------------------------------------------------------------------------
r304 | fabricecolin | 2006-06-09 19:31:54 +0800 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/Notebook.cpp
   M /trunk/UI/GTK2/src/Notebook.h
   M /trunk/UI/GTK2/src/pinot.cc

Removed HtmlView/MozillaRenderer code.

------------------------------------------------------------------------
r303 | fabricecolin | 2006-06-09 19:28:00 +0800 (Fri, 09 Jun 2006) | 6 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

Dropped internal viewer completely. Always use default applications. For those
documents that have to be downloaded first, save them into a temporary file.
Several changes related to trees selection.
When the IndexBrowser thread finishes, don't blindly return if the page isn't
there anymore, make sure the progress bar is stopped.

------------------------------------------------------------------------
r302 | fabricecolin | 2006-06-09 19:20:55 +0800 (Fri, 09 Jun 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/IndexTree.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h

Both of these trees return the selected items as a DocumentInfo list.
ResultsTree::setSelectionViewedState() replaces setFirstSelectionViewedState().

------------------------------------------------------------------------
r301 | fabricecolin | 2006-06-09 19:19:00 +0800 (Fri, 09 Jun 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/mainWindow_glade.cc

Expand queryExpander.

------------------------------------------------------------------------
r300 | fabricecolin | 2006-06-09 19:18:00 +0800 (Fri, 09 Jun 2006) | 6 lines
Changed paths:
   M /trunk/Utils/CommandLine.cpp
   M /trunk/Utils/MIMEScanner.cpp

MIMEScanner registers the first valid application (ie the first one with a
.desktop file) as the default for a given type.
CommandLine spawns the same process as many times as necessary if it doesn't
support multiple arguments.
All of MIMEAction wasn't copied. Some other fixes.

------------------------------------------------------------------------
r299 | fabricecolin | 2006-06-08 22:55:53 +0800 (Thu, 08 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/HtmlTokenizer.cpp

Bug fix on attributes parsing.

------------------------------------------------------------------------
r298 | fabricecolin | 2006-06-07 22:06:21 +0800 (Wed, 07 Jun 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/configure.in

Being optimistic and preparing for next release :-)

------------------------------------------------------------------------
r297 | fabricecolin | 2006-06-07 22:00:12 +0800 (Wed, 07 Jun 2006) | 5 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Removed code relative to the external browser setting.
HTML documents are viewed with the internal viewer; for others, use
MIMEScanner::getDefaultAction() and CommandLine::runAsync() to launch
the type's default application.

------------------------------------------------------------------------
r296 | fabricecolin | 2006-06-07 21:57:03 +0800 (Wed, 07 Jun 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.hh

Removed documents view mode and browser selection from the preferences as pinot
can now launch other applications.

------------------------------------------------------------------------
r295 | fabricecolin | 2006-06-07 21:33:52 +0800 (Wed, 07 Jun 2006) | 4 lines
Changed paths:
   M /trunk/Collect/Makefile.am
   M /trunk/Search/Makefile.am
   A /trunk/Utils/CommandLine.cpp
   A /trunk/Utils/CommandLine.h
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/MIMEScanner.h
   M /trunk/Utils/Makefile.am
   M /trunk/configure.in

Extended MIMEAction, added CommandLine: it runs commands asynchronously after
having expanded parameters. Since this makes use of glibmm, check for it
explictely in configure.

------------------------------------------------------------------------
r294 | fabricecolin | 2006-06-07 19:24:05 +0800 (Wed, 07 Jun 2006) | 6 lines
Changed paths:
   M /trunk/Collect/pinot-collect.cpp
   M /trunk/Search/pinot-search.cpp
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/MIMEScanner.h

MIMEScanner has to be initialized and shut down. When initialized, it parses
shared-mime-info's default applications file and gets the Exec line out of
the corresponding .desktop files, When shutdown, it shuts down xdgmime.
Hopefully, this will allow to view most documents properly soon instead of
blindly relying on the internal viewer.

------------------------------------------------------------------------
r293 | fabricecolin | 2006-06-07 19:08:40 +0800 (Wed, 07 Jun 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/mainWindow_glade.cc

Assigned decent defaults to mainWindow's dimensions.

------------------------------------------------------------------------
r292 | fabricecolin | 2006-06-06 20:33:51 +0800 (Tue, 06 Jun 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

The main window on_delete_event handler disconnects the page switch signal to
avoid segfaults when the page being shown at exit time is the View page.

------------------------------------------------------------------------
r291 | fabricecolin | 2006-06-06 20:30:11 +0800 (Tue, 06 Jun 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexTree.cpp

Don't truncate titles.

------------------------------------------------------------------------
r290 | fabricecolin | 2006-06-05 22:36:58 +0800 (Mon, 05 Jun 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/importDialog.cc

If import failed, set the progress bar's text to the error message.

------------------------------------------------------------------------
r289 | fabricecolin | 2006-06-05 22:32:58 +0800 (Mon, 05 Jun 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotUtils.cpp
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Some fixes for charset conversions.

------------------------------------------------------------------------
r288 | fabricecolin | 2006-06-02 23:46:51 +0800 (Fri, 02 Jun 2006) | 3 lines
Changed paths:
   M /trunk/Tokenize/HtmlTokenizer.cpp
   M /trunk/Utils/StringManip.cpp

Some fixes for results title and abstract, including a fairly stupid bug in
trimSpaces().

------------------------------------------------------------------------
r287 | fabricecolin | 2006-06-02 22:04:47 +0800 (Fri, 02 Jun 2006) | 4 lines
Changed paths:
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Search/WebEngine.cpp
   M /trunk/Search/WebEngine.h

If necessary, WebEngine looks for a http-equiv META tag for Content-Type
to determine a page's charset.
SherlockParser wraps chunks to make them look like full-blown documents.

------------------------------------------------------------------------
r286 | fabricecolin | 2006-06-02 21:59:47 +0800 (Fri, 02 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Collect/CurlDownloader.cpp
   M /trunk/Collect/DownloaderInterface.cpp
   M /trunk/Collect/FileCollector.cpp
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.cpp

Removed unnecessary include.

------------------------------------------------------------------------
r285 | fabricecolin | 2006-06-02 21:57:08 +0800 (Fri, 02 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/HtmlTokenizer.cpp
   M /trunk/Tokenize/HtmlTokenizer.h
   M /trunk/Tokenize/PdfTokenizer.cpp
   M /trunk/Tokenize/RtfTokenizer.cpp
   M /trunk/Tokenize/TokenizerFactory.cpp

Various fixes. HtmlTokenizer can do validation without content extraction.

------------------------------------------------------------------------
r284 | fabricecolin | 2006-06-01 19:28:51 +0800 (Thu, 01 Jun 2006) | 2 lines
Changed paths:
   M /trunk/Search/pinot-search.cpp
   M /trunk/Tokenize/XmlTokenizer.cpp

Fixed stupid bug in stripTags(). Use it on the extract in pinot-search.

------------------------------------------------------------------------
r283 | fabricecolin | 2006-06-01 00:11:24 +0800 (Thu, 01 Jun 2006) | 3 lines
Changed paths:
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Tokenize/HtmlTokenizer.cpp
   M /trunk/Tokenize/HtmlTokenizer.h
   M /trunk/Tokenize/XmlTokenizer.cpp

HtmlTokenizer can attempt to find an abstract, basically the text between links.
Some other changes.

------------------------------------------------------------------------
r282 | fabricecolin | 2006-05-31 22:56:30 +0800 (Wed, 31 May 2006) | 2 lines
Changed paths:
   M /trunk/Collect/CurlDownloader.cpp
   M /trunk/Search/SearchEngineInterface.cpp
   M /trunk/Utils/StringManip.cpp
   M /trunk/Utils/StringManip.h

Less verbose CurlDownloader. Added StringManip::trimSpaces().

------------------------------------------------------------------------
r281 | fabricecolin | 2006-05-30 20:46:42 +0800 (Tue, 30 May 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

XmlTokenizer::stripTags() replaces HtmlTokenizer::stripTags().

------------------------------------------------------------------------
r280 | fabricecolin | 2006-05-30 20:44:50 +0800 (Tue, 30 May 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/importDialog_glade.cc
   M /trunk/UI/GTK2/src/importDialog_glade.hh
   M /trunk/UI/GTK2/src/mainWindow.cc

Removed not so useful MIME type filtering in importDialog.

------------------------------------------------------------------------
r279 | fabricecolin | 2006-05-30 20:42:56 +0800 (Tue, 30 May 2006) | 3 lines
Changed paths:
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Search/pinot-search.cpp

Synced with changes to Htmltokenizer and Link classes.
The stripTags method is now in XmlTokenizer.

------------------------------------------------------------------------
r278 | fabricecolin | 2006-05-30 20:41:33 +0800 (Tue, 30 May 2006) | 2 lines
Changed paths:
   M /trunk/Collect/CurlDownloader.cpp
   M /trunk/Collect/FileCollector.cpp
   M /trunk/Collect/NeonDownloader.cpp
   M /trunk/Collect/pinot-collect.cpp

Dropped HtmlDocument use.

------------------------------------------------------------------------
r277 | fabricecolin | 2006-05-30 20:39:56 +0800 (Tue, 30 May 2006) | 2 lines
Changed paths:
   D /trunk/Utils/HtmlDocument.cpp
   D /trunk/Utils/HtmlDocument.h
   M /trunk/Utils/Makefile.am
   M /trunk/Utils/StringManip.cpp

HtmlDocument is no longer necessary. Fixed StringManip::removeCharacters() !

------------------------------------------------------------------------
r276 | fabricecolin | 2006-05-30 20:38:39 +0800 (Tue, 30 May 2006) | 4 lines
Changed paths:
   M /trunk/Tokenize/HtmlTokenizer.cpp
   M /trunk/Tokenize/HtmlTokenizer.h
   M /trunk/Tokenize/Makefile.am
   M /trunk/Tokenize/OpenDocumentTokenizer.cpp
   M /trunk/Tokenize/OpenDocumentTokenizer.h
   M /trunk/Tokenize/PdfTokenizer.cpp
   M /trunk/Tokenize/PdfTokenizer.h
   M /trunk/Tokenize/RtfTokenizer.cpp
   M /trunk/Tokenize/RtfTokenizer.h
   M /trunk/Tokenize/XmlTokenizer.cpp
   M /trunk/Tokenize/XmlTokenizer.h
   M /trunk/Tokenize/tokenizertest.cpp

Revisited HTML parser. It now uses libxml2's HTMLparser. This is not yet
wrapped by libxml++ by the way.
Cleaned up other tokenizers.

------------------------------------------------------------------------
r275 | fabricecolin | 2006-05-30 19:02:43 +0800 (Tue, 30 May 2006) | 2 lines
Changed paths:
   M /trunk/TODO

Corrected inaccurracies :-)

------------------------------------------------------------------------
r273 | fabricecolin | 2006-05-25 22:40:08 +0800 (Thu, 25 May 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

Releasing 0.48 today.

------------------------------------------------------------------------
r272 | fabricecolin | 2006-05-25 21:59:15 +0800 (Thu, 25 May 2006) | 2 lines
Changed paths:
   M /trunk/Monitor/Makefile.am

Distribute linux-inotify-syscalls.h.

------------------------------------------------------------------------
r271 | fabricecolin | 2006-05-24 21:59:01 +0800 (Wed, 24 May 2006) | 2 lines
Changed paths:
   M /trunk/po/es.po
   M /trunk/po/fr.po

Synced with latest source.

------------------------------------------------------------------------
r270 | fabricecolin | 2006-05-24 21:56:48 +0800 (Wed, 24 May 2006) | 3 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp

Forgot to convert language from locale to English in updateDocument().
Lower-case the language name before requesting a stemmer.

------------------------------------------------------------------------
r269 | fabricecolin | 2006-05-24 21:54:51 +0800 (Wed, 24 May 2006) | 3 lines
Changed paths:
   M /trunk/Collect/CurlDownloader.cpp
   M /trunk/Collect/FileCollector.cpp
   M /trunk/Collect/MboxCollector.cpp
   M /trunk/Collect/NeonDownloader.cpp
   M /trunk/Collect/XapianCollector.cpp
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/IndexTree.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/Utils/Document.cpp
   M /trunk/Utils/Document.h
   M /trunk/Utils/HtmlDocument.cpp
   M /trunk/Utils/HtmlDocument.h

Document objects can be built from a DocumentInfo. Use DocumentInfo when
possible so that no information (eg title, language...) is lost.

------------------------------------------------------------------------
r268 | fabricecolin | 2006-05-24 20:59:59 +0800 (Wed, 24 May 2006) | 2 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp

Check whether there's actually stuff to read !

------------------------------------------------------------------------
r267 | fabricecolin | 2006-05-24 07:42:12 +0800 (Wed, 24 May 2006) | 3 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/TODO

Mention one header was borrowed from libinotify.
More items to do...

------------------------------------------------------------------------
r266 | fabricecolin | 2006-05-23 23:22:59 +0800 (Tue, 23 May 2006) | 5 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp
   A /trunk/Monitor/linux-inotify-syscalls.h
   M /trunk/configure.in

Check whether inotify.h is located in linux/ or sys/. If the former, include
linux-inotify-syscalls.h. This header is from Ryan Lortie's (desrt at desrt dot ca)
libinotify project, and is slightly modified.
These changes are required to build on Ubuntu Dapper Drake.

------------------------------------------------------------------------
r265 | fabricecolin | 2006-05-23 20:38:03 +0800 (Tue, 23 May 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README

Listed main changes, removed mention of FAM/Gamin.

------------------------------------------------------------------------
r264 | fabricecolin | 2006-05-23 19:19:56 +0800 (Tue, 23 May 2006) | 2 lines
Changed paths:
   M /trunk/po/es.po
   M /trunk/po/fr.po

Updated translations.

------------------------------------------------------------------------
r263 | fabricecolin | 2006-05-23 19:14:27 +0800 (Tue, 23 May 2006) | 2 lines
Changed paths:
   M /trunk/Collect/pinot-collect.1
   M /trunk/Search/pinot-search.1
   M /trunk/UI/GTK2/src/pinot.1
   M /trunk/configure.in

Preparing for 0.48.

------------------------------------------------------------------------
r262 | fabricecolin | 2006-05-23 19:11:49 +0800 (Tue, 23 May 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/pinot.cc

Changed threads termination signal handling slightly so that the main window
can process threads that finished while the import dialog was up.

------------------------------------------------------------------------
r261 | fabricecolin | 2006-05-22 21:25:09 +0800 (Mon, 22 May 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp

Before looking for terms to highlight, convert the extract to UTF-8 to avoid
issues with byte/character discrepancies.

------------------------------------------------------------------------
r260 | fabricecolin | 2006-05-20 20:08:49 +0800 (Sat, 20 May 2006) | 3 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

No need to listen for event IN_ATTRIB. Make sure the monitor's file descriptor
is in the set MonitorThread select()'s on !

------------------------------------------------------------------------
r259 | fabricecolin | 2006-05-20 18:13:58 +0800 (Sat, 20 May 2006) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/BitTorrent.src

Fixed host name.

------------------------------------------------------------------------
r258 | fabricecolin | 2006-05-20 17:37:52 +0800 (Sat, 20 May 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.cc

Minor changes to how the name of the selected language is obtained.

------------------------------------------------------------------------
r257 | fabricecolin | 2006-05-20 15:50:15 +0800 (Sat, 20 May 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/propertiesDialog.cc

Highlight all full terms in the extract. Other miscellaneous fixes.

------------------------------------------------------------------------
r256 | fabricecolin | 2006-05-20 15:17:38 +0800 (Sat, 20 May 2006) | 4 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

In MonitorThread, get the file descriptor to listen on even when no changes
occured to avoid returning an error message when everything is actually okay.
In INotifyMonitor, be more verbose when initialization fails.

------------------------------------------------------------------------
r255 | fabricecolin | 2006-05-20 14:24:46 +0800 (Sat, 20 May 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/pinot.spec.in

Dropped dependency on Gamin/FAM, fixed UI headers list.

------------------------------------------------------------------------
r254 | fabricecolin | 2006-05-20 14:21:45 +0800 (Sat, 20 May 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/MboxHandler.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/queryDialog.cc

Fixed a bunch of warnings.

------------------------------------------------------------------------
r253 | fabricecolin | 2006-05-20 13:20:38 +0800 (Sat, 20 May 2006) | 2 lines
Changed paths:
   M /trunk/po/POTFILES.in

Scan MboxHandler, not MonitorHandler.

------------------------------------------------------------------------
r252 | fabricecolin | 2006-05-20 13:13:24 +0800 (Sat, 20 May 2006) | 3 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/configure.in

Build Monitor right before the UI. Since it requires sigc++-2.0, configure 
checks for it.

------------------------------------------------------------------------
r251 | fabricecolin | 2006-05-20 13:10:25 +0800 (Sat, 20 May 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh

The Show Extract and Group By menuitems are always visible and have effect
on all results tabs. Up to now, this wasn't very clear.

------------------------------------------------------------------------
r250 | fabricecolin | 2006-05-20 12:30:58 +0800 (Sat, 20 May 2006) | 3 lines
Changed paths:
   M /trunk/Monitor/Makefile.am
   A /trunk/Monitor/MonitorHandler.cpp (from /trunk/UI/GTK2/src/MonitorHandler.cpp:249)
   A /trunk/Monitor/MonitorHandler.h (from /trunk/UI/GTK2/src/MonitorHandler.h:249)
   M /trunk/UI/GTK2/src/Makefile.am
   A /trunk/UI/GTK2/src/MboxHandler.cpp
   A /trunk/UI/GTK2/src/MboxHandler.h
   D /trunk/UI/GTK2/src/MonitorHandler.cpp
   D /trunk/UI/GTK2/src/MonitorHandler.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Split MonitorHandler and MboxHandler. In MonitorThread, replaced calls to FAM
with MonitorInterface.

------------------------------------------------------------------------
r249 | fabricecolin | 2006-05-20 12:00:42 +0800 (Sat, 20 May 2006) | 2 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/Monitor/INotifyMonitor.h
   M /trunk/Monitor/MonitorInterface.h
   M /trunk/UI/GTK2/src/MonitorHandler.cpp
   M /trunk/UI/GTK2/src/MonitorHandler.h

Redesigned MonitorHandler to better fit with MonitorInterface.

------------------------------------------------------------------------
r248 | fabricecolin | 2006-05-19 07:37:13 +0800 (Fri, 19 May 2006) | 2 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/Monitor/INotifyMonitor.h
   M /trunk/Monitor/MonitorInterface.h

Monitoring now functional.

------------------------------------------------------------------------
r247 | fabricecolin | 2006-05-17 22:33:35 +0800 (Wed, 17 May 2006) | 2 lines
Changed paths:
   M /trunk/Monitor/INotifyMonitor.cpp
   M /trunk/Monitor/INotifyMonitor.h
   M /trunk/Monitor/Makefile.am
   A /trunk/Monitor/MonitorFactory.cpp
   A /trunk/Monitor/MonitorFactory.h
   M /trunk/Monitor/MonitorInterface.h

Some fixes, new class MonitorFactory.

------------------------------------------------------------------------
r246 | fabricecolin | 2006-05-17 20:59:37 +0800 (Wed, 17 May 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/TokenizerFactory.h
   M /trunk/Utils/Document.h
   M /trunk/Utils/DocumentInfo.h

Cosmetic changes.

------------------------------------------------------------------------
r245 | fabricecolin | 2006-05-17 08:07:20 +0800 (Wed, 17 May 2006) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

On update, don't attempt to detect the document's language if one is provided.

------------------------------------------------------------------------
r244 | fabricecolin | 2006-05-17 08:05:04 +0800 (Wed, 17 May 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   A /trunk/Monitor
   A /trunk/Monitor/INotifyMonitor.cpp
   A /trunk/Monitor/INotifyMonitor.h
   A /trunk/Monitor/Makefile.am
   A /trunk/Monitor/MonitorEvent.cpp
   A /trunk/Monitor/MonitorEvent.h
   A /trunk/Monitor/MonitorInterface.h
   M /trunk/configure.in

First shot at an inotify-based file monitor.

------------------------------------------------------------------------
r243 | fabricecolin | 2006-05-15 22:15:01 +0800 (Mon, 15 May 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/IndexTree.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

Fixed menuitem state inconsistencies when switching and closing tabs.
Removed unused methods in Index and ResultsTree classes.

------------------------------------------------------------------------
r241 | fabricecolin | 2006-05-12 11:01:19 +0800 (Fri, 12 May 2006) | 2 lines
Changed paths:
   M /trunk/NEWS

Releasing 0.47 today.

------------------------------------------------------------------------
r240 | fabricecolin | 2006-05-10 22:37:34 +0800 (Wed, 10 May 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/configure.in
   M /trunk/po/es.po
   M /trunk/po/fr.po

Preparing for next release, hopefully this week.

------------------------------------------------------------------------
r239 | fabricecolin | 2006-05-10 21:07:15 +0800 (Wed, 10 May 2006) | 2 lines
Changed paths:
   M /trunk/Collect/NeonDownloader.cpp
   M /trunk/Collect/XapianCollector.cpp
   M /trunk/Index/XapianIndex.cpp
   M /trunk/SQL/SQLiteBase.cpp
   M /trunk/Search/Google/GoogleAPIEngine.cpp
   M /trunk/Search/OpenSearchParser.cpp
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Tokenize/Tokenizer.cpp
   M /trunk/Tokenize/TokenizerFactory.cpp
   M /trunk/Tokenize/XmlTokenizer.cpp
   M /trunk/UI/GTK2/src/MonitorHandler.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/Utils/Document.cpp
   M /trunk/Utils/MboxParser.cpp
   M /trunk/Utils/XapianDatabase.cpp

Brought some sanity to debugging messages ;-)

------------------------------------------------------------------------
r238 | fabricecolin | 2006-05-10 21:05:48 +0800 (Wed, 10 May 2006) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/CreativeCommons.src

Updated, based on plugin shipped with Firefox.

------------------------------------------------------------------------
r237 | fabricecolin | 2006-05-07 13:54:30 +0800 (Sun, 07 May 2006) | 2 lines
Changed paths:
   M /trunk/po/es.po
   M /trunk/po/fr.po

Updated translations.

------------------------------------------------------------------------
r236 | fabricecolin | 2006-05-07 13:49:52 +0800 (Sun, 07 May 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/mainWindow.cc

Update the query terms list on addResults() as it may change from one run to
the next.
When unindexing documents, "remove" is better suited than "delete".

------------------------------------------------------------------------
r235 | fabricecolin | 2006-05-06 19:28:03 +0800 (Sat, 06 May 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO

Updated NEWS with changes since last release, added more items to TODO list.

------------------------------------------------------------------------
r234 | fabricecolin | 2006-05-06 14:51:32 +0800 (Sat, 06 May 2006) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

Do a DEBUG build if "--with debug" is passed to rpmbuild.

------------------------------------------------------------------------
r233 | fabricecolin | 2006-05-06 14:50:11 +0800 (Sat, 06 May 2006) | 5 lines
Changed paths:
   M /trunk/Search/QueryProperties.cpp
   M /trunk/Search/QueryProperties.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

QueryProperties::getTerms() returns the terms that make up the query. This is
used by ResultsPage to determine what parts of the extract field should be
shown in bold text.
Some other minor changes.

------------------------------------------------------------------------
r232 | fabricecolin | 2006-05-06 11:25:23 +0800 (Sat, 06 May 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/propertiesDialog_glade.cc

Removed evil set_text("") !

------------------------------------------------------------------------
r231 | fabricecolin | 2006-05-06 11:24:24 +0800 (Sat, 06 May 2006) | 2 lines
Changed paths:
   M /trunk/Search/Google/GoogleAPIEngine.cpp

Don't be picky about query parameters, invoke GoogleSearch correctly.

------------------------------------------------------------------------
r230 | fabricecolin | 2006-05-05 18:52:09 +0800 (Fri, 05 May 2006) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

Bundle man pages.

------------------------------------------------------------------------
r229 | fabricecolin | 2006-05-05 18:49:49 +0800 (Fri, 05 May 2006) | 3 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/propertiesDialog.hh
   M /trunk/UI/GTK2/src/propertiesDialog_glade.cc
   M /trunk/UI/GTK2/src/propertiesDialog_glade.hh

Allow changing the language of documents in the properties dialog box.
A subsequent update would use the given language to stem terms.

------------------------------------------------------------------------
r228 | fabricecolin | 2006-05-05 18:42:25 +0800 (Fri, 05 May 2006) | 2 lines
Changed paths:
   M /trunk/Collect/Makefile.am
   D /trunk/Collect/dloadtest.cpp
   A /trunk/Collect/pinot-collect.cpp (from /trunk/Collect/dloadtest.cpp:227)
   M /trunk/Search/Makefile.am
   M /trunk/Search/pinot-search.1
   A /trunk/Search/pinot-search.cpp (from /trunk/Search/senginetest.cpp:227)
   D /trunk/Search/senginetest.cpp

Renamed source files, tidied up man page for pinot-search.

------------------------------------------------------------------------
r227 | fabricecolin | 2006-05-04 19:26:25 +0800 (Thu, 04 May 2006) | 3 lines
Changed paths:
   M /trunk/Collect/dloadtest.cpp
   A /trunk/Collect/pinot-collect.1
   M /trunk/Makefile.am
   A /trunk/Search/pinot-search.1
   M /trunk/Search/senginetest.cpp
   A /trunk/UI/GTK2/src/pinot.1
   M /trunk/UI/GTK2/src/pinot.cc

All programs support --help and --version. This helped to generate man pages
with help2man.

------------------------------------------------------------------------
r226 | fabricecolin | 2006-05-02 23:16:11 +0800 (Tue, 02 May 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/EnginesTree.cpp
   M /trunk/UI/GTK2/src/EnginesTree.h
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/pinot.cc

Load and save channels whose group is collapsed in the engines tree.

------------------------------------------------------------------------
r225 | fabricecolin | 2006-05-02 21:00:24 +0800 (Tue, 02 May 2006) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/AmazonAPI.src
   M /trunk/Search/Plugins/YahooAPI.src
   M /trunk/UI/GTK2/src/PinotSettings.cpp

Merged channel Web Services with The Web.

------------------------------------------------------------------------
r223 | fabricecolin | 2006-04-21 19:24:03 +0800 (Fri, 21 Apr 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/pinot.desktop

Internationalized desktop file. Updated news file.

------------------------------------------------------------------------
r222 | fabricecolin | 2006-04-21 19:21:53 +0800 (Fri, 21 Apr 2006) | 2 lines
Changed paths:
   M /trunk/po/es.po
   M /trunk/po/fr.po

Updated translations.

------------------------------------------------------------------------
r221 | fabricecolin | 2006-04-18 22:08:07 +0800 (Tue, 18 Apr 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/Utils/MIMEScanner.cpp

Be a bit less stringent with mbox'es as shared-mime-info/xdgmime doesn't
recognize them as text/x-mail.
MIMEScanner now returns xdg_mime_type_unknown for unknown types.

------------------------------------------------------------------------
r220 | fabricecolin | 2006-04-18 22:03:43 +0800 (Tue, 18 Apr 2006) | 3 lines
Changed paths:
   D /trunk/Search/Plugins/MozDexDescription.xml
   M /trunk/pinot.spec.in

Removed MozDex as its OpenSearch output been unavailable for weeks. Hopefully,
this is only temporary.

------------------------------------------------------------------------
r219 | fabricecolin | 2006-04-17 22:04:59 +0800 (Mon, 17 Apr 2006) | 2 lines
Changed paths:
   M /trunk/README
   M /trunk/configure.in

Preparing for v0.46 release.

------------------------------------------------------------------------
r218 | fabricecolin | 2006-04-15 20:12:10 +0800 (Sat, 15 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Utils/Url.cpp

Slightly better parsing of relative URLs.

------------------------------------------------------------------------
r217 | fabricecolin | 2006-04-15 20:09:04 +0800 (Sat, 15 Apr 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Added missing check on index tree when IndexingThread returns. This could cause
a crash. Yeah it was that bad :-)

------------------------------------------------------------------------
r216 | fabricecolin | 2006-04-15 13:29:06 +0800 (Sat, 15 Apr 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/queryDialog_glade.cc

Renamed/relabeled tabs in queryDialog.

------------------------------------------------------------------------
r215 | fabricecolin | 2006-04-15 12:26:52 +0800 (Sat, 15 Apr 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO

Updated with last few days' changes.

------------------------------------------------------------------------
r214 | fabricecolin | 2006-04-15 12:11:59 +0800 (Sat, 15 Apr 2006) | 4 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/configure.in
   A /trunk/pinot.desktop
   M /trunk/pinot.spec.in

Check for desktop-file-install program and shared-mime-info package at
configure time. Distribute and install pinot.desktop file, previously
generated by RPM spec file. 

------------------------------------------------------------------------
r213 | fabricecolin | 2006-04-14 15:24:46 +0800 (Fri, 14 Apr 2006) | 4 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README
   M /trunk/pinot.spec.in

Text-docs RPM includes libopendocumenttokenizer.so. Added dependencies on unzip
and shared-mime-info (needed by xdgmime).
Updated NEWS and README.

------------------------------------------------------------------------
r212 | fabricecolin | 2006-04-14 15:20:48 +0800 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/OpenDocumentTokenizer.cpp

Open content.xml, not meta.xml ! Doh !

------------------------------------------------------------------------
r211 | fabricecolin | 2006-04-14 15:18:40 +0800 (Fri, 14 Apr 2006) | 4 lines
Changed paths:
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/Makefile.am
   A /trunk/Utils/xdgmime
   A /trunk/Utils/xdgmime/ChangeLog
   A /trunk/Utils/xdgmime/xdgmime.c
   A /trunk/Utils/xdgmime/xdgmime.h
   A /trunk/Utils/xdgmime/xdgmimealias.c
   A /trunk/Utils/xdgmime/xdgmimealias.h
   A /trunk/Utils/xdgmime/xdgmimecache.c
   A /trunk/Utils/xdgmime/xdgmimecache.h
   A /trunk/Utils/xdgmime/xdgmimeglob.c
   A /trunk/Utils/xdgmime/xdgmimeglob.h
   A /trunk/Utils/xdgmime/xdgmimeint.c
   A /trunk/Utils/xdgmime/xdgmimeint.h
   A /trunk/Utils/xdgmime/xdgmimemagic.c
   A /trunk/Utils/xdgmime/xdgmimemagic.h
   A /trunk/Utils/xdgmime/xdgmimeparent.c
   A /trunk/Utils/xdgmime/xdgmimeparent.h

Import freedesktop.org's LGPL-licensed xdgmime library, pulled from CVS today.
MIMEScanner now uses that to more effectively determine a file's MIME type.
As a result, we now depend on shared-mime-info.

------------------------------------------------------------------------
r210 | fabricecolin | 2006-04-14 14:07:55 +0800 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   A /trunk/Tokenize/OpenDocumentTokenizer.cpp
   A /trunk/Tokenize/OpenDocumentTokenizer.h

Unsurprisingly, I forgot to check in the new OpenDocumentTokenizer class ;-)

------------------------------------------------------------------------
r209 | fabricecolin | 2006-04-14 14:03:52 +0800 (Fri, 14 Apr 2006) | 5 lines
Changed paths:
   M /trunk/Tokenize/HtmlTokenizer.cpp
   M /trunk/Tokenize/HtmlTokenizer.h
   M /trunk/Tokenize/Makefile.am
   M /trunk/Tokenize/PdfTokenizer.cpp
   M /trunk/Tokenize/PdfTokenizer.h
   M /trunk/Tokenize/RtfTokenizer.cpp
   M /trunk/Tokenize/RtfTokenizer.h
   M /trunk/Tokenize/TagLibTokenizer.cpp
   M /trunk/Tokenize/TagLibTokenizer.h
   M /trunk/Tokenize/Tokenizer.cpp
   M /trunk/Tokenize/Tokenizer.h
   M /trunk/Tokenize/TokenizerFactory.cpp
   M /trunk/Tokenize/TokenizerFactory.h
   M /trunk/Tokenize/WordTokenizer.cpp
   M /trunk/Tokenize/WordTokenizer.h
   A /trunk/Tokenize/XmlTokenizer.cpp
   A /trunk/Tokenize/XmlTokenizer.h

New tokenizers for xml and StarOffice/OpenOffice documents. The latter relies
on the former and needs unzip to extract specific files.
Modified tokenizer libraries interface slightly to make it easier for those
that support more than one type.

------------------------------------------------------------------------
r208 | fabricecolin | 2006-04-14 13:59:03 +0800 (Fri, 14 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Utils/StringManip.cpp
   M /trunk/Utils/StringManip.h

New method replaceEntities(), taken from HtmlTokenizer.

------------------------------------------------------------------------
r207 | fabricecolin | 2006-04-13 21:18:51 +0800 (Thu, 13 Apr 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Hide the View Cache menuitem if the Google API key is not set.

------------------------------------------------------------------------
r206 | fabricecolin | 2006-04-12 23:23:48 +0800 (Wed, 12 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Search/Google/GAPIC.cpp

Removed calls to DBGLOG().

------------------------------------------------------------------------
r205 | fabricecolin | 2006-04-12 22:24:01 +0800 (Wed, 12 Apr 2006) | 3 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/pinot.spec.in

AmazonAPI source is not installed in the engines directory.
The RPM can be built with "--with soap", which adds requirement on gsoap.

------------------------------------------------------------------------
r204 | fabricecolin | 2006-04-12 22:01:47 +0800 (Wed, 12 Apr 2006) | 3 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Utils/StringManip.cpp
   M /trunk/Utils/StringManip.h

StringManip::hashString() now uses same hash algorithm as omindex/scriptindex.
Maximum term length increased to 240.

------------------------------------------------------------------------
r203 | fabricecolin | 2006-04-12 21:55:28 +0800 (Wed, 12 Apr 2006) | 2 lines
Changed paths:
   M /trunk/UI/RenderHTML/MozillaRenderer.cpp

Set scrollbars flag on.

------------------------------------------------------------------------
r202 | fabricecolin | 2006-04-12 21:52:49 +0800 (Wed, 12 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Search/Google/GoogleAPIEngine.cpp

Extra checks.

------------------------------------------------------------------------
r201 | fabricecolin | 2006-04-11 22:22:50 +0800 (Tue, 11 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Search/Google/GAPIStub.h

Added missing header.

------------------------------------------------------------------------
r200 | fabricecolin | 2006-04-11 22:21:52 +0800 (Tue, 11 Apr 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/importDialog.cc

Disable the symlinks button when type URl is selected.

------------------------------------------------------------------------
r199 | fabricecolin | 2006-04-10 21:50:54 +0800 (Mon, 10 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   A /trunk/UI/GTK2/index.html (from /trunk/index.html:177)
   D /trunk/index.html

Moved index.html to UI/GTK2.

------------------------------------------------------------------------
r198 | fabricecolin | 2006-04-09 23:15:01 +0800 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/configure.in

Fixed MOZILLA_LIB_DIR.

------------------------------------------------------------------------
r197 | fabricecolin | 2006-04-09 22:53:06 +0800 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/README
   M /trunk/TODO

Updates.

------------------------------------------------------------------------
r196 | fabricecolin | 2006-04-09 22:47:53 +0800 (Sun, 09 Apr 2006) | 2 lines
Changed paths:
   M /trunk/configure.in

New option --with-gecko=mozilla|firefox should enable to build against Firefox.

------------------------------------------------------------------------
r195 | fabricecolin | 2006-04-07 23:25:25 +0800 (Fri, 07 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Collect/Makefile.am
   M /trunk/Collect/dloadtest.cpp
   M /trunk/Search/Makefile.am
   M /trunk/pinot.spec.in

Renamed pinot_search to pinot-search. Don't package pinot-collect just yet.

------------------------------------------------------------------------
r194 | fabricecolin | 2006-04-05 22:09:10 +0800 (Wed, 05 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Search/Makefile.am
   A /trunk/Search/SOAPEnvH.h
   A /trunk/Search/SOAPEnvStub.h

More gSOAP-generated files.

------------------------------------------------------------------------
r193 | fabricecolin | 2006-04-05 21:58:23 +0800 (Wed, 05 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Search/Google/Makefile.am

... and GAPI.nsmap !

------------------------------------------------------------------------
r192 | fabricecolin | 2006-04-05 21:50:27 +0800 (Wed, 05 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Search/Google/Makefile.am

Distribute files GAPIC.cpp and GAPIClient.cpp !

------------------------------------------------------------------------
r191 | fabricecolin | 2006-04-05 21:39:55 +0800 (Wed, 05 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Search/Google/Makefile.am

Removed dep on wsdl file and unused header from noinst_HEADERS.

------------------------------------------------------------------------
r190 | fabricecolin | 2006-04-05 21:13:38 +0800 (Wed, 05 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/BitTorrent.src

Update.

------------------------------------------------------------------------
r189 | fabricecolin | 2006-04-05 21:08:03 +0800 (Wed, 05 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Search/Google/GAPIC.cpp

Added missing types to calls to soap_out_std__string().

------------------------------------------------------------------------
r188 | fabricecolin | 2006-04-05 21:06:48 +0800 (Wed, 05 Apr 2006) | 3 lines
Changed paths:
   A /trunk/Search/Google/GAPI.nsmap
   A /trunk/Search/Google/GAPIC.cpp
   A /trunk/Search/Google/GAPIClient.cpp
   A /trunk/Search/Google/GAPIClientLib.cpp
   A /trunk/Search/Google/GAPIGoogleSearchBindingProxy.h
   A /trunk/Search/Google/GAPIH.h
   A /trunk/Search/Google/GAPIStub.h

Checking in gSOAP-generated (v2.7.6e) client stubs. They shouldn't have to be
regenerated too often and one of them needs to be fixed (see next commit :-).

------------------------------------------------------------------------
r187 | fabricecolin | 2006-04-04 23:16:44 +0800 (Tue, 04 Apr 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/Makefile.am

Flags and libraries for SOAP support.

------------------------------------------------------------------------
r186 | fabricecolin | 2006-04-04 22:04:09 +0800 (Tue, 04 Apr 2006) | 2 lines
Changed paths:
   M /trunk/configure.in

Generation of Search/Google/Makefile is conditional.

------------------------------------------------------------------------
r185 | fabricecolin | 2006-04-04 21:38:06 +0800 (Tue, 04 Apr 2006) | 3 lines
Changed paths:
   M /trunk/Tokenize/Makefile.am
   A /trunk/Tokenize/TagLibTokenizer.cpp
   A /trunk/Tokenize/TagLibTokenizer.h
   M /trunk/Tokenize/TokenizerFactory.cpp
   M /trunk/configure.in
   M /trunk/pinot.spec.in

New tokenizer for MP3, Vorbis and FLAC audio that extracts track information
with taglib.

------------------------------------------------------------------------
r184 | fabricecolin | 2006-04-04 21:18:35 +0800 (Tue, 04 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Search/senginetest.cpp
   M /trunk/UI/GTK2/src/prefsDialog.cc

More minor fixes...

------------------------------------------------------------------------
r183 | fabricecolin | 2006-04-04 21:17:28 +0800 (Tue, 04 Apr 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/Utils/MboxParser.cpp

Minor fixes to get rid of compilation warnings.

------------------------------------------------------------------------
r182 | fabricecolin | 2006-04-04 21:14:50 +0800 (Tue, 04 Apr 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

IndexingThread can skip MIME type check.
Minor fixes to get rid of compilation warnings.

------------------------------------------------------------------------
r181 | fabricecolin | 2006-04-04 20:29:15 +0800 (Tue, 04 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Search/SherlockParser.cpp

If the result's extract is all spaces, strip tags and replace.

------------------------------------------------------------------------
r180 | fabricecolin | 2006-04-04 20:27:36 +0800 (Tue, 04 Apr 2006) | 2 lines
Changed paths:
   M /trunk/Search/SearchEngineInterface.cpp

Complete relative URLs with the search engine's host name.

------------------------------------------------------------------------
r179 | fabricecolin | 2006-04-04 20:25:39 +0800 (Tue, 04 Apr 2006) | 4 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/Search/Google/GoogleAPIEngine.cpp
   M /trunk/Search/Google/GoogleSearch.h
   A /trunk/Search/Google/Makefile.am
   M /trunk/Search/Makefile.am
   A /trunk/Search/SOAPEnv.h
   M /trunk/Search/SearchEngineFactory.cpp
   M /trunk/configure.in

Attempt at resurrecting support for the Google SOAP API. Option --with-soap=yes
can be passed at configure time. This will use gsoap's utilities to generate
stubs based on Search/Google/googleapi/GoogleSearch.wsdl.

------------------------------------------------------------------------
r178 | fabricecolin | 2006-04-04 19:23:31 +0800 (Tue, 04 Apr 2006) | 2 lines
Changed paths:
   D /trunk/Search/ObjectsSearch

ObjectsSearch API is long obsolete.

------------------------------------------------------------------------
r177 | fabricecolin | 2006-03-28 23:05:52 +0800 (Tue, 28 Mar 2006) | 2 lines
Changed paths:
   M /trunk/Collect/DownloaderFactory.cpp
   M /trunk/Collect/DownloaderFactory.h

Cosmetic changes.

------------------------------------------------------------------------
r175 | fabricecolin | 2006-03-25 12:41:46 +0800 (Sat, 25 Mar 2006) | 3 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/configure.in
   M /trunk/pinot.spec.in
   M /trunk/po/es.po
   M /trunk/po/fr.po

Preparing for v0.45 release. Synced po files with source, updated new features
and todo lists.

------------------------------------------------------------------------
r174 | fabricecolin | 2006-03-25 12:32:42 +0800 (Sat, 25 Mar 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

When running a live query, we can use terms as andWords as index searches are
now multi-step. For search plugins, it won't make any difference.

------------------------------------------------------------------------
r173 | fabricecolin | 2006-03-24 20:10:00 +0800 (Fri, 24 Mar 2006) | 3 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/AbstractGenerator.cpp

R-prefix terms that start with a capital letter and skip all prefixed terms
when generating the abstract.

------------------------------------------------------------------------
r172 | fabricecolin | 2006-03-24 08:39:39 +0800 (Fri, 24 Mar 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp

Put status icons in a separate column so that the "new result" colour applies
to the whole Title column.

------------------------------------------------------------------------
r171 | fabricecolin | 2006-03-23 23:33:02 +0800 (Thu, 23 Mar 2006) | 4 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO
   M /trunk/pinot.spec.in

Misc updates.
In the spec file, set a requirement on /usr/bin/pdftohtml as it is provided
by poppler-utils on FC5 and pdftohtml on FC4.

------------------------------------------------------------------------
r170 | fabricecolin | 2006-03-23 00:05:10 +0800 (Thu, 23 Mar 2006) | 2 lines
Changed paths:
   M /trunk/Collect/Makefile.am
   M /trunk/Tokenize/Makefile.am
   M /trunk/UI/RenderHTML/MozillaRenderer.cpp
   M /trunk/Utils/Makefile.am
   M /trunk/configure.in
   M /trunk/pinot.spec.in

Various fixes for building on Fedora Core 5.

------------------------------------------------------------------------
r169 | fabricecolin | 2006-03-21 22:36:42 +0800 (Tue, 21 Mar 2006) | 2 lines
Changed paths:
   M /trunk/Search/SherlockParser.cpp

Parsing may throw exceptions.

------------------------------------------------------------------------
r168 | fabricecolin | 2006-03-21 20:41:40 +0800 (Tue, 21 Mar 2006) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

Acoona.src was renamed.

------------------------------------------------------------------------
r167 | fabricecolin | 2006-03-21 19:33:09 +0800 (Tue, 21 Mar 2006) | 2 lines
Changed paths:
   M /trunk/po/es.po
   M /trunk/po/fr.po

Corrections and sync with yesterday's changes.

------------------------------------------------------------------------
r166 | fabricecolin | 2006-03-20 22:58:23 +0800 (Mon, 20 Mar 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Call FAMClose() only if FAMOpen() returned successfully. This prevents a exit
time crash on Ubuntu 5.10.

------------------------------------------------------------------------
r165 | fabricecolin | 2006-03-20 21:36:14 +0800 (Mon, 20 Mar 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/TODO

Work done since the previous release.

------------------------------------------------------------------------
r164 | fabricecolin | 2006-03-20 21:34:49 +0800 (Mon, 20 Mar 2006) | 2 lines
Changed paths:
   A /trunk/po/en.po (from /trunk/po/en_GB.po:135)
   D /trunk/po/en_GB.po
   M /trunk/po/es.po
   M /trunk/po/fr.po

Updated translations (Spanish catalog not complete yet).

------------------------------------------------------------------------
r163 | fabricecolin | 2006-03-20 20:21:30 +0800 (Mon, 20 Mar 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/HtmlTokenizer.cpp

Add a space to text when stripping tags to avoid concatenating words.

------------------------------------------------------------------------
r162 | fabricecolin | 2006-03-20 20:19:31 +0800 (Mon, 20 Mar 2006) | 3 lines
Changed paths:
   A /trunk/Search/Plugins/Accoona.src (from /trunk/Search/Plugins/Acoona.src:135)
   D /trunk/Search/Plugins/Acoona.src
   M /trunk/Search/Plugins/BitTorrent.src
   M /trunk/Search/Plugins/CreativeCommons.src

Renamed Acoona to Accoona. Moved BitTorrent and Creative Commons to
"Content" channel :-)

------------------------------------------------------------------------
r161 | fabricecolin | 2006-03-19 21:56:37 +0800 (Sun, 19 Mar 2006) | 2 lines
Changed paths:
   M /trunk/pinot.spec.in

Synced engines list.

------------------------------------------------------------------------
r160 | fabricecolin | 2006-03-19 21:52:50 +0800 (Sun, 19 Mar 2006) | 2 lines
Changed paths:
   M /trunk/Search/SearchEngineInterface.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/Utils/Url.cpp

Some fixes for the last couple of check-ins.

------------------------------------------------------------------------
r159 | fabricecolin | 2006-03-19 13:34:05 +0800 (Sun, 19 Mar 2006) | 3 lines
Changed paths:
   M /trunk/Search/AbstractGenerator.cpp
   M /trunk/Search/Google/GoogleAPIEngine.cpp
   M /trunk/Search/ObjectsSearch/ObjectsSearchAPIEngine.cpp
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/SearchEngineInterface.cpp
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Utils/Url.cpp
   M /trunk/Utils/Url.h

When a result's URL points to the same host name as the engine's, try to extract
the URL embedded in it if any.

------------------------------------------------------------------------
r158 | fabricecolin | 2006-03-19 13:31:45 +0800 (Sun, 19 Mar 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h

Icon for new results no longer required.

------------------------------------------------------------------------
r157 | fabricecolin | 2006-03-19 13:29:49 +0800 (Sun, 19 Mar 2006) | 3 lines
Changed paths:
   D /trunk/Search/Plugins/Altavista.src
   A /trunk/Search/Plugins/CreativeCommons.src
   A /trunk/Search/Plugins/Exalead.src
   D /trunk/Search/Plugins/Lycos.src

Removed Altavista and Lycos since they are front-ends for Yahoo! and Ask.
Added Exalead and Yahoo! Creative Commons sources.

------------------------------------------------------------------------
r156 | fabricecolin | 2006-03-18 21:10:58 +0800 (Sat, 18 Mar 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/IndexTree.h
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.hh

The background colour for new results and whether the live query field should
try to suggest terms from the index are now configurable through preferences.
Moved colour rendering code out of IndexTree and to ResultsTree.

------------------------------------------------------------------------
r155 | fabricecolin | 2006-03-18 19:33:54 +0800 (Sat, 18 Mar 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

When browsing, get the right documents count.
Don't attempt to set an empty label on documents.

------------------------------------------------------------------------
r154 | fabricecolin | 2006-03-18 19:32:16 +0800 (Sat, 18 Mar 2006) | 3 lines
Changed paths:
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

getDocumentsCount() can return the number of documents that have a label.
setDocumentLabels() skips empty labels.

------------------------------------------------------------------------
r153 | fabricecolin | 2006-03-17 20:16:41 +0800 (Fri, 17 Mar 2006) | 3 lines
Changed paths:
   M /trunk/SQL/QueryHistory.cpp
   M /trunk/SQL/QueryHistory.h
   M /trunk/SQL/ViewHistory.cpp
   M /trunk/SQL/ViewHistory.h

ViewHistory now includes a Date column. The table is updated by create().
Items in both tables can be expired.

------------------------------------------------------------------------
r152 | fabricecolin | 2006-03-17 20:03:03 +0800 (Fri, 17 Mar 2006) | 2 lines
Changed paths:
   M /trunk/Utils/Url.cpp

Less DEBUG output.

------------------------------------------------------------------------
r151 | fabricecolin | 2006-03-17 20:01:24 +0800 (Fri, 17 Mar 2006) | 2 lines
Changed paths:
   A /trunk/Search/Plugins/Ask.src (from /trunk/Search/Plugins/AskJeeves.src:135)
   D /trunk/Search/Plugins/AskJeeves.src
   A /trunk/Search/Plugins/RollYOTopNews.src
   D /trunk/Search/Plugins/Teoma.src

Ask.com replaces Teoma and Ask Jeeves. Added RollYO's Top News source.

------------------------------------------------------------------------
r150 | fabricecolin | 2006-03-16 22:37:54 +0800 (Thu, 16 Mar 2006) | 2 lines
Changed paths:
   M /trunk/Collect/NeonDownloader.cpp
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Search/SherlockParser.h

Lock parsing of Sherlock plugins rather downloading...

------------------------------------------------------------------------
r149 | fabricecolin | 2006-03-16 22:20:37 +0800 (Thu, 16 Mar 2006) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/Topix.src

Fixed results extraction.

------------------------------------------------------------------------
r147 | fabricecolin | 2006-03-12 14:52:29 +0800 (Sun, 12 Mar 2006) | 2 lines
Changed paths:
   M /trunk/NEWS
   M /trunk/po/es.po
   M /trunk/po/fr.po

Updating translations and news.

------------------------------------------------------------------------
r146 | fabricecolin | 2006-03-09 21:48:14 +0800 (Thu, 09 Mar 2006) | 3 lines
Changed paths:
   M /trunk/AUTHORS
   M /trunk/Makefile.am
   M /trunk/TODO
   M /trunk/configure.in
   M /trunk/pinot.spec.in

Distribute NEWS. Changed email address, bumped version number to v0.44.
+2 -1 items in TODO list.

------------------------------------------------------------------------
r145 | fabricecolin | 2006-03-09 21:42:43 +0800 (Thu, 09 Mar 2006) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/Lycos.src

Fixed page browsing.

------------------------------------------------------------------------
r144 | fabricecolin | 2006-03-09 21:35:05 +0800 (Thu, 09 Mar 2006) | 2 lines
Changed paths:
   D /trunk/ChangeLog
   M /trunk/NEWS

Put news in NEWS, not ChangeLog :-)

------------------------------------------------------------------------
r143 | fabricecolin | 2006-03-08 22:09:45 +0800 (Wed, 08 Mar 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotSettings.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.hh
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.hh

Labels no longer have a colour.
In mainWindow, don't use the ThreadsManager lock to protect lists, this may
lead to deadlocks.

------------------------------------------------------------------------
r142 | fabricecolin | 2006-03-08 21:14:24 +0800 (Wed, 08 Mar 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/Makefile.am

Compile Utils objects in.

------------------------------------------------------------------------
r141 | fabricecolin | 2006-03-06 23:55:42 +0800 (Mon, 06 Mar 2006) | 3 lines
Changed paths:
   M /trunk/README
   M /trunk/configure.in
   M /trunk/pinot.spec.in

Curl is used by default in place of Neon. Updated RPM spec as well as
requirements and mini FAQ in README file.

------------------------------------------------------------------------
r140 | fabricecolin | 2006-03-06 23:48:41 +0800 (Mon, 06 Mar 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/IndexTree.h
   M /trunk/UI/GTK2/src/MonitorHandler.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

First shot at unifying index browsing and label querying. LabelQueryThread has
been dropped amongst other things.

------------------------------------------------------------------------
r139 | fabricecolin | 2006-03-06 23:46:49 +0800 (Mon, 06 Mar 2006) | 3 lines
Changed paths:
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

Method getDocumentsWithLabel() becomes listDocumentsWithLabel(), unified with
listDocuments().

------------------------------------------------------------------------
r138 | fabricecolin | 2006-03-06 23:45:28 +0800 (Mon, 06 Mar 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/Makefile.am

Try harder to build working tokenizers ! They were not linked against libUtils.

------------------------------------------------------------------------
r137 | fabricecolin | 2006-03-04 16:29:31 +0800 (Sat, 04 Mar 2006) | 3 lines
Changed paths:
   M /trunk/Collect/DownloaderFactory.cpp
   M /trunk/Collect/DownloaderFactory.h
   M /trunk/Collect/dloadtest.cpp
   M /trunk/Search/WebEngine.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/Utils/Url.cpp

Changed prototype of DownloaderFactory::getDownloader().
URL escaping functions no longer require curl or neon.

------------------------------------------------------------------------
r136 | fabricecolin | 2006-03-04 13:44:16 +0800 (Sat, 04 Mar 2006) | 4 lines
Changed paths:
   M /trunk/Collect/DownloaderFactory.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/Utils/Url.cpp
   M /trunk/configure.in

We can now switch between curl and neon for HTTP collection and URL escaping
by running configure with --with-http=neon|curl. Neon is used by default.
Removed long obsolete ListenerThread. Cosmetic mods to worker threads.

------------------------------------------------------------------------
r135 | fabricecolin | 2006-03-04 11:33:34 +0800 (Sat, 04 Mar 2006) | 3 lines
Changed paths:
   A /trunk/Collect/CurlDownloader.cpp
   A /trunk/Collect/CurlDownloader.h
   M /trunk/Collect/DownloaderInterface.cpp
   M /trunk/Collect/DownloaderInterface.h
   M /trunk/Collect/Makefile.am
   M /trunk/Collect/NeonDownloader.cpp
   M /trunk/Collect/NeonDownloader.h
   M /trunk/Collect/dloadtest.cpp
   M /trunk/UI/GTK2/src/pinot.cc

Moved OpenSSL initialization to DownloaderInterface. New CurlDownloader class is
an alternative to NeonDownloader. Program dloadtest compiled as pinot_collect.

------------------------------------------------------------------------
r134 | fabricecolin | 2006-03-03 22:30:49 +0800 (Fri, 03 Mar 2006) | 3 lines
Changed paths:
   M /trunk/Index/Makefile.am
   D /trunk/Index/Summarizer.cpp
   D /trunk/Index/Summarizer.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/Makefile.am
   M /trunk/README
   M /trunk/Search/AbstractGenerator.cpp
   M /trunk/Search/AbstractGenerator.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/configure.in
   M /trunk/pinot.spec.in

Removed dependency on OTS. Summaries are now built at query time by
AbstractGenerator.

------------------------------------------------------------------------
r133 | fabricecolin | 2006-02-27 23:30:23 +0800 (Mon, 27 Feb 2006) | 6 lines
Changed paths:
   A /trunk/Search/AbstractGenerator.cpp
   A /trunk/Search/AbstractGenerator.h
   M /trunk/Search/Makefile.am

AbstractGenerator attempts to produce a summary of a document based on the
positions of a query's terms.
Abstract "windows" are anchored on both side of the query's top term positions
and weighted by the presence of terms. The window that has the most terms
is chosen.

------------------------------------------------------------------------
r131 | fabricecolin | 2006-02-25 13:55:38 +0800 (Sat, 25 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog

Releasing v0.43 today.

------------------------------------------------------------------------
r130 | fabricecolin | 2006-02-25 10:12:55 +0800 (Sat, 25 Feb 2006) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/Acoona.src

Fixed results parsing.

------------------------------------------------------------------------
r129 | fabricecolin | 2006-02-24 23:06:46 +0800 (Fri, 24 Feb 2006) | 2 lines
Changed paths:
   M /trunk/po/es.po
   M /trunk/po/fr.po

Caught up with recent changes.

------------------------------------------------------------------------
r128 | fabricecolin | 2006-02-24 22:51:06 +0800 (Fri, 24 Feb 2006) | 2 lines
Changed paths:
   M /trunk/Collect/NeonDownloader.cpp
   M /trunk/Search/PluginWebEngine.h

Cosmetic changes.

------------------------------------------------------------------------
r127 | fabricecolin | 2006-02-24 22:44:19 +0800 (Fri, 24 Feb 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/WordTokenizer.cpp

Fixed buffer overrun.

------------------------------------------------------------------------
r126 | fabricecolin | 2006-02-23 21:20:22 +0800 (Thu, 23 Feb 2006) | 4 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/TODO
   M /trunk/pinot.spec.in

Updated ChangeLog and TODO based on changes made since last release.
In Xapian v0.9.4, libxapian.so is version 10. Since I will use this version
to build RPMs, I have set the dependencies accordingly.

------------------------------------------------------------------------
r125 | fabricecolin | 2006-02-22 22:32:06 +0800 (Wed, 22 Feb 2006) | 2 lines
Changed paths:
   M /trunk/Collect/NeonDownloader.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

Lock Neon session and request creation instead.

------------------------------------------------------------------------
r124 | fabricecolin | 2006-02-21 22:12:50 +0800 (Tue, 21 Feb 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h

Protected downloading with a mutex until I figure out why multiple searches
cause a crash.

------------------------------------------------------------------------
r123 | fabricecolin | 2006-02-21 19:55:12 +0800 (Tue, 21 Feb 2006) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/Topix.src

Topix changed.

------------------------------------------------------------------------
r122 | fabricecolin | 2006-02-20 22:59:03 +0800 (Mon, 20 Feb 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/Makefile.am

Fixed order of libraries.

------------------------------------------------------------------------
r121 | fabricecolin | 2006-02-20 22:38:28 +0800 (Mon, 20 Feb 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh

Pressing return in the live query field runs the search.

------------------------------------------------------------------------
r120 | fabricecolin | 2006-02-18 17:47:34 +0800 (Sat, 18 Feb 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/po/es.po
   M /trunk/po/fr.po

Minor changes to catalogs, some correction sto fr.po.

------------------------------------------------------------------------
r119 | fabricecolin | 2006-02-18 15:19:26 +0800 (Sat, 18 Feb 2006) | 4 lines
Changed paths:
   M /trunk/Tokenize/Makefile.am
   M /trunk/configure.in
   M /trunk/pinot.spec.in

Build fix for tokenizers. Neon requires OpenSSL, so check for it explicitely
(useful on Slackware, reported by Bernhard "I wanna play headball !" Fruhmesser).
Reverted to Xapian v0.9.2 in spec file, as it works well enough.

------------------------------------------------------------------------
r118 | fabricecolin | 2006-02-17 22:56:25 +0800 (Fri, 17 Feb 2006) | 2 lines
Changed paths:
   M /trunk/po/es.po
   M /trunk/po/fr.po

Synced catalogs with current source.

------------------------------------------------------------------------
r117 | fabricecolin | 2006-02-17 20:29:29 +0800 (Fri, 17 Feb 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/pinot.cc

If an index couldn't be opened, or the history database not created, show
an error message in the main window's status bar.

------------------------------------------------------------------------
r116 | fabricecolin | 2006-02-16 23:08:03 +0800 (Thu, 16 Feb 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/Tokenize/Makefile.am

Sorted out tokenizer libraries.

------------------------------------------------------------------------
r115 | fabricecolin | 2006-02-16 21:54:50 +0800 (Thu, 16 Feb 2006) | 3 lines
Changed paths:
   M /trunk/Index/LanguageDetector.cpp
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Makefile.am
   M /trunk/Search/senginetest.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/configure.in
   M /trunk/pinot.spec.in
   A /trunk/po/es.po (from /trunk/po/es_ES.po:110)
   D /trunk/po/es_ES.po
   A /trunk/po/fr.po (from /trunk/po/fr_FR.po:110)
   D /trunk/po/fr_FR.po

Renamed and updated language catalogs. Prefix is now set in config.h.
Worker threads are a bit more robust.

------------------------------------------------------------------------
r114 | fabricecolin | 2006-02-16 00:49:34 +0800 (Thu, 16 Feb 2006) | 2 lines
Changed paths:
   M /trunk/Index/Makefile.am
   M /trunk/Makefile.am
   M /trunk/Search/Makefile.am
   D /trunk/UI/GTK2/config.h
   M /trunk/Utils/Makefile.am
   M /trunk/configure.in
   M /trunk/pinot.spec.in

Fixes to get 'make dist' and 'make install' working.

------------------------------------------------------------------------
r113 | fabricecolin | 2006-02-15 21:56:42 +0800 (Wed, 15 Feb 2006) | 2 lines
Changed paths:
   A /trunk/mkinstalldirs

This is not generated automagically it seems.

------------------------------------------------------------------------
r112 | fabricecolin | 2006-02-15 21:55:23 +0800 (Wed, 15 Feb 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/po/Makefile.in.in

Tweaked DIST files.

------------------------------------------------------------------------
r111 | fabricecolin | 2006-02-15 21:07:28 +0800 (Wed, 15 Feb 2006) | 2 lines
Changed paths:
   A /trunk/ABOUT-NLS

This file is required apparently.

------------------------------------------------------------------------
r110 | fabricecolin | 2006-02-15 20:55:04 +0800 (Wed, 15 Feb 2006) | 3 lines
Changed paths:
   M /trunk/configure.in
   D /trunk/po/Makefile.in
   A /trunk/po/Makefile.in.in
   M /trunk/po/es_ES.po
   M /trunk/po/fr_FR.po

Dropped po/Makefile.in, replaced by more useful po/Makefile.in.in, imported
from alleyoop 0.9.0. Thanks ! :-)

------------------------------------------------------------------------
r109 | fabricecolin | 2006-02-14 23:02:24 +0800 (Tue, 14 Feb 2006) | 3 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/Tokenize/Makefile.am
   M /trunk/configure.in

Build tokenizer libraries and (attempt to) install everything in the right
places :-)

------------------------------------------------------------------------
r108 | fabricecolin | 2006-02-12 22:55:22 +0800 (Sun, 12 Feb 2006) | 2 lines
Changed paths:
   M /trunk/Makefile.am
   M /trunk/Search/Makefile.am
   M /trunk/UI/GTK2/src/Makefile.am
   M /trunk/Utils/Makefile.am
   M /trunk/configure.in
   M /trunk/pinot.spec.in
   M /trunk/po/Makefile.in

Build and distribution fixes.

------------------------------------------------------------------------
r107 | fabricecolin | 2006-02-12 21:15:56 +0800 (Sun, 12 Feb 2006) | 2 lines
Changed paths:
   D /trunk/Collect/Makefile
   D /trunk/Index/Makefile
   D /trunk/Makefile
   D /trunk/SQL/Makefile
   D /trunk/Search/Google/Makefile
   D /trunk/Search/Makefile
   D /trunk/Search/ObjectsSearch/Makefile
   D /trunk/Tokenize/Makefile
   D /trunk/UI/GTK2/src/Makefile
   D /trunk/UI/RenderHTML/Makefile
   D /trunk/Utils/Makefile
   D /trunk/pinot.spec
   D /trunk/po/POTFILES
   D /trunk/variables.mk

Deleted files that are now automatically generated.

------------------------------------------------------------------------
r106 | fabricecolin | 2006-02-12 20:44:57 +0800 (Sun, 12 Feb 2006) | 2 lines
Changed paths:
   M /trunk/Utils/XapianDatabase.h
   M /trunk/configure.in

Build fixes.

------------------------------------------------------------------------
r105 | fabricecolin | 2006-02-12 20:34:41 +0800 (Sun, 12 Feb 2006) | 2 lines
Changed paths:
   A /trunk/AUTHORS
   A /trunk/NEWS
   M /trunk/configure.in

More autotools stuff.

------------------------------------------------------------------------
r104 | fabricecolin | 2006-02-12 20:22:56 +0800 (Sun, 12 Feb 2006) | 2 lines
Changed paths:
   A /trunk/autogen.sh
   M /trunk/configure.in
   A /trunk/pinot.spec.in
   A /trunk/po/Makefile.in
   A /trunk/po/Makevars
   M /trunk/po/POTFILES
   A /trunk/po/POTFILES.in

More autotools stuff.

------------------------------------------------------------------------
r103 | fabricecolin | 2006-02-12 19:34:36 +0800 (Sun, 12 Feb 2006) | 2 lines
Changed paths:
   A /trunk/Collect/Makefile.am
   A /trunk/Index/Makefile.am
   A /trunk/Makefile.am
   A /trunk/SQL/Makefile.am
   A /trunk/Search/Makefile.am
   A /trunk/Tokenize/Makefile.am
   A /trunk/UI/GTK2/src/Makefile.am
   A /trunk/UI/RenderHTML/Makefile.am
   A /trunk/Utils/Makefile.am
   A /trunk/configure.in

Initial support for autotools.

------------------------------------------------------------------------
r102 | fabricecolin | 2006-02-12 15:13:11 +0800 (Sun, 12 Feb 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/Makefile
   M /trunk/README
   M /trunk/TODO
   M /trunk/index.html

Lots of minor updates.

------------------------------------------------------------------------
r101 | fabricecolin | 2006-02-12 15:05:53 +0800 (Sun, 12 Feb 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/Makefile
   M /trunk/UI/RenderHTML/Makefile
   M /trunk/variables.mk

Don't link all executables to the Mozilla libs !

------------------------------------------------------------------------
r100 | fabricecolin | 2006-02-07 20:21:43 +0800 (Tue, 07 Feb 2006) | 3 lines
Changed paths:
   M /trunk/Makefile
   M /trunk/Search/SearchEngineFactory.cpp
   M /trunk/Search/SearchEngineFactory.h
   M /trunk/Search/senginetest.cpp
   M /trunk/pinot.spec

Distribute senginetest as pinot_search as a shell based metasearch would
be useful. SearchEngineFactory can list supported engine types.

------------------------------------------------------------------------
r99 | fabricecolin | 2006-02-07 20:18:54 +0800 (Tue, 07 Feb 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/HtmlTokenizer.cpp

Don't lower case tags, this messes up links !

------------------------------------------------------------------------
r98 | fabricecolin | 2006-02-07 20:18:03 +0800 (Tue, 07 Feb 2006) | 5 lines
Changed paths:
   M /trunk/Index/Summarizer.cpp
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/QueryProperties.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Utils/Languages.cpp
   M /trunk/Utils/Languages.h

Changed term prefixes to conform to Omega's termprefixes.txt document. This
will allow indexes to be queried by other Xapian-based tools that follow
those conventions and Pinot to use the QueryParser class at some point.
Unfortunately, users will have to update their documents and reapply labels !

------------------------------------------------------------------------
r97 | fabricecolin | 2006-02-06 22:23:27 +0800 (Mon, 06 Feb 2006) | 4 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/pinot.spec

Dropped support for libxml++ v0.26 as v2.12 is required now (or so it seems).
Add H-prefixed terms for all of the host name's subdomains so that searching
for "Hberlios.de" returns pages from "Hpinot.berlios.de"...

------------------------------------------------------------------------
r96 | fabricecolin | 2006-02-06 22:16:55 +0800 (Mon, 06 Feb 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/pinot.cc

In index_document(), don't complain about already indexed files if we are going
to set a label on them. Let the main program set the default icon. Use the live
query's field as OR terms for new stored queries.

------------------------------------------------------------------------
r95 | fabricecolin | 2006-02-02 21:18:24 +0800 (Thu, 02 Feb 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

UTF-8 fixes on stored queries dates and results extracts.

------------------------------------------------------------------------
r94 | fabricecolin | 2006-02-01 22:00:49 +0800 (Wed, 01 Feb 2006) | 2 lines
Changed paths:
   D /trunk/libxmlpp026.patch

Obsolete.

------------------------------------------------------------------------
r93 | fabricecolin | 2006-02-01 21:46:26 +0800 (Wed, 01 Feb 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/EnginesTree.cpp

Select the current user's engines group by default.

------------------------------------------------------------------------
r92 | fabricecolin | 2006-02-01 21:35:20 +0800 (Wed, 01 Feb 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot.cc

Added missing call to bind_textdomain_codeset().

------------------------------------------------------------------------
r91 | fabricecolin | 2006-02-01 21:33:38 +0800 (Wed, 01 Feb 2006) | 2 lines
Changed paths:
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Search/plugintest.cpp

Sherlock parser grammar copes with foreign tags.

------------------------------------------------------------------------
r89 | fabricecolin | 2006-01-31 11:31:36 +0800 (Tue, 31 Jan 2006) | 2 lines
Changed paths:
   M /trunk/Makefile

Missing directory.

------------------------------------------------------------------------
r88 | fabricecolin | 2006-01-31 11:20:50 +0800 (Tue, 31 Jan 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/Makefile
   M /trunk/README
   M /trunk/TODO
   M /trunk/UI/GTK2/config.h
   M /trunk/pinot.spec
   M /trunk/po/en_GB.po
   M /trunk/po/es_ES.po
   M /trunk/po/fr_FR.po

Preparing for v0.42 release.

------------------------------------------------------------------------
r87 | fabricecolin | 2006-01-31 11:19:10 +0800 (Tue, 31 Jan 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/TokenizerFactory.cpp

Use dlerror().

------------------------------------------------------------------------
r86 | fabricecolin | 2006-01-31 10:59:27 +0800 (Tue, 31 Jan 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/po/es_ES.po

Complete Spanish translation. Main program catches exceptions, eg thrown by
set_icon_from_file().

------------------------------------------------------------------------
r85 | fabricecolin | 2006-01-30 23:15:06 +0800 (Mon, 30 Jan 2006) | 3 lines
Changed paths:
   M /trunk/po/en_GB.po
   A /trunk/po/es_ES.po
   M /trunk/po/fr_FR.po

Synced PO files with current source. Added (almost final) Spanish translation
by Jesús Tramullas (jesus at tramullas dot com).

------------------------------------------------------------------------
r84 | fabricecolin | 2006-01-30 14:23:44 +0800 (Mon, 30 Jan 2006) | 2 lines
Changed paths:
   M /trunk/Search/OpenSearchParser.cpp
   M /trunk/Search/Plugins/KodersDescription.xml
   M /trunk/Search/Plugins/MozDexDescription.xml
   M /trunk/Search/Plugins/OmegaDescription.xml

Use Tags as the channel name.

------------------------------------------------------------------------
r83 | fabricecolin | 2006-01-30 12:04:21 +0800 (Mon, 30 Jan 2006) | 3 lines
Changed paths:
   D /trunk/Search/Plugins/Omega.src
   A /trunk/Search/Plugins/OmegaDescription.xml

Replaced Omega.src with an OpenSearch Description file as Omega supports
OpenSearch Response.

------------------------------------------------------------------------
r82 | fabricecolin | 2006-01-30 11:49:01 +0800 (Mon, 30 Jan 2006) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/Topix.src

Fixed Topix search plugin.

------------------------------------------------------------------------
r81 | fabricecolin | 2006-01-28 17:07:33 +0800 (Sat, 28 Jan 2006) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/Notebook.cpp
   M /trunk/UI/GTK2/src/Notebook.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

Results pages have a VPaned so that the extract field can be resized.
Fixed issue with Listener and MonitorThread's control pipe that prevented
the latter from quitting right away when there's nothing to monitor.

------------------------------------------------------------------------
r80 | fabricecolin | 2006-01-26 23:19:59 +0800 (Thu, 26 Jan 2006) | 2 lines
Changed paths:
   D /trunk/Search/Plugins/Koders.src
   A /trunk/Search/Plugins/KodersDescription.xml
   A /trunk/Search/Plugins/MozDexDescription.xml

Replaced Koders Sherlock source with its OpenSearch equivalent, added MozDex.

------------------------------------------------------------------------
r79 | fabricecolin | 2006-01-26 23:12:05 +0800 (Thu, 26 Jan 2006) | 4 lines
Changed paths:
   M /trunk/Search/OpenSearchParser.cpp
   M /trunk/Search/OpenSearchParser.h
   M /trunk/Search/PluginParsers.h
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/SearchPluginProperties.cpp
   M /trunk/Search/SearchPluginProperties.h
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Search/SherlockParser.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/variables.mk

More than one results page can be requested with OpenSearch. XapianEngine
no longer loops ad vitam eternam if the index couldn't be locked !
Minor changes to variables.mk.

------------------------------------------------------------------------
r78 | fabricecolin | 2006-01-25 22:39:03 +0800 (Wed, 25 Jan 2006) | 2 lines
Changed paths:
   M /trunk/Search/OpenSearchParser.cpp

Copes better with CDATA nodes.

------------------------------------------------------------------------
r77 | fabricecolin | 2006-01-25 22:28:12 +0800 (Wed, 25 Jan 2006) | 2 lines
Changed paths:
   M /trunk/Search/OpenSearchParser.cpp
   M /trunk/Search/SherlockParser.cpp

Slightly better Response parsing.

------------------------------------------------------------------------
r76 | fabricecolin | 2006-01-25 21:51:16 +0800 (Wed, 25 Jan 2006) | 2 lines
Changed paths:
   M /trunk/Search/OpenSearchParser.cpp
   M /trunk/Search/OpenSearchParser.h
   M /trunk/Search/SearchEngineFactory.cpp
   M /trunk/Search/SearchPluginProperties.h
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Search/plugintest.cpp

Initial OpenSearch Response support.

------------------------------------------------------------------------
r75 | fabricecolin | 2006-01-25 19:46:04 +0800 (Wed, 25 Jan 2006) | 4 lines
Changed paths:
   A /trunk/Search/OpenSearchParser.cpp
   A /trunk/Search/OpenSearchParser.h
   A /trunk/Search/PluginParsers.h
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/PluginWebEngine.h
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Search/SearchPluginProperties.cpp
   M /trunk/Search/SearchPluginProperties.h
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Search/SherlockParser.h
   M /trunk/Search/plugintest.cpp

PluginWebEngine can now handle Sherlock and OpenSearch plugins (.src and .xml)
and their respective response. The OpenSearch Response parser doesn't do
anything useful just yet.

------------------------------------------------------------------------
r74 | fabricecolin | 2006-01-22 21:37:53 +0800 (Sun, 22 Jan 2006) | 2 lines
Changed paths:
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/PluginWebEngine.h
   M /trunk/Search/SearchPluginProperties.cpp
   M /trunk/Search/SearchPluginProperties.h
   M /trunk/Search/SherlockParser.cpp
   M /trunk/Search/SherlockParser.h
   M /trunk/Search/plugintest.cpp

First shot at unifying Sherlock and OpenSearch plugins.

------------------------------------------------------------------------
r73 | fabricecolin | 2006-01-22 17:16:00 +0800 (Sun, 22 Jan 2006) | 3 lines
Changed paths:
   M /trunk/Search/Makefile
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/PluginWebEngine.h
   A /trunk/Search/SearchPluginProperties.cpp
   A /trunk/Search/SearchPluginProperties.h
   A /trunk/Search/SherlockParser.cpp (from /trunk/Utils/PluginParser.cpp:69)
   A /trunk/Search/SherlockParser.h (from /trunk/Utils/PluginParser.h:69)
   A /trunk/Search/plugintest.cpp (from /trunk/Utils/plugintest.cpp:69)
   M /trunk/Utils/Makefile
   D /trunk/Utils/PluginParser.cpp
   D /trunk/Utils/PluginParser.h
   D /trunk/Utils/plugintest.cpp

Renamed PluginParser to SherlockParser, moved to Search with plugintest program.
Added rudimentary OpenSearch Description and Query Syntax parser.

------------------------------------------------------------------------
r72 | fabricecolin | 2006-01-22 16:25:19 +0800 (Sun, 22 Jan 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/Makefile
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/ResultsTree.cpp

Scrolled windows in Index and ResultsTree had their policy set to ALWAYS.
PinotSettings checks what the root node is and catches exceptions ! Doh ! :-)

------------------------------------------------------------------------
r71 | fabricecolin | 2006-01-21 16:27:21 +0800 (Sat, 21 Jan 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/importDialog_glade.cc
   M /trunk/UI/GTK2/src/importDialog_glade.hh
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

A label can be applied when importing documents. Modified IndexingThread so that
the label is also set when updating a document.

------------------------------------------------------------------------
r69 | fabricecolin | 2006-01-20 20:07:01 +0800 (Fri, 20 Jan 2006) | 2 lines
Changed paths:
   M /trunk/ChangeLog

Updating log of changes since v0.35.

------------------------------------------------------------------------
r68 | fabricecolin | 2006-01-20 19:47:57 +0800 (Fri, 20 Jan 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/indexDialog.cc
   M /trunk/po/en_GB.po
   M /trunk/po/fr_FR.po

More fixes to po strings and one to indexDialog::checkFields().

------------------------------------------------------------------------
r67 | fabricecolin | 2006-01-19 23:44:56 +0800 (Thu, 19 Jan 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/indexDialog.cc

Fix for previous check-in.

------------------------------------------------------------------------
r66 | fabricecolin | 2006-01-19 21:32:09 +0800 (Thu, 19 Jan 2006) | 4 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/indexDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/propertiesDialog_glade.cc
   M /trunk/Utils/StringManip.cpp
   M /trunk/Utils/StringManip.h
   M /trunk/po/en_GB.po
   M /trunk/po/fr_FR.po

At indexing time, we may have to hash the URL to guarantee it's unique as it's
limited in length just like other terms. Changed a couple of labels in the UI,
synced the po files with the current source.

------------------------------------------------------------------------
r65 | fabricecolin | 2006-01-19 20:51:04 +0800 (Thu, 19 Jan 2006) | 2 lines
Changed paths:
   M /trunk/README
   M /trunk/TODO
   M /trunk/UI/GTK2/config.h
   M /trunk/index.html
   M /trunk/pinot.spec

Refreshed docs, bumped version number to 0.40 in preparation for release.

------------------------------------------------------------------------
r64 | fabricecolin | 2006-01-19 08:31:09 +0800 (Thu, 19 Jan 2006) | 3 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/Utils/MIMEScanner.cpp
   M /trunk/Utils/Url.cpp

Indexing a document may change its location property. Make sure the view page
is shown when viewing a freshly downloaded document. Some tweaks for URLs.

------------------------------------------------------------------------
r63 | fabricecolin | 2006-01-16 22:46:48 +0800 (Mon, 16 Jan 2006) | 2 lines
Changed paths:
   M /trunk/Tokenize/PdfTokenizer.h
   M /trunk/Tokenize/RtfTokenizer.h
   M /trunk/Tokenize/UnknownTypeTokenizer.h
   M /trunk/Tokenize/WordTokenizer.h

Cosmetic changes.

------------------------------------------------------------------------
r62 | fabricecolin | 2006-01-16 22:46:06 +0800 (Mon, 16 Jan 2006) | 2 lines
Changed paths:
   M /trunk/Search/Plugins/AskJeeves.src

Caught up with AskJeeves' output.

------------------------------------------------------------------------
r61 | fabricecolin | 2006-01-15 12:16:46 +0800 (Sun, 15 Jan 2006) | 3 lines
Changed paths:
   M /trunk/Tokenize/Makefile
   M /trunk/Tokenize/PdfTokenizer.cpp
   M /trunk/Tokenize/PdfTokenizer.h
   A /trunk/Tokenize/RtfTokenizer.cpp
   A /trunk/Tokenize/RtfTokenizer.h
   M /trunk/Tokenize/Tokenizer.cpp
   M /trunk/Tokenize/Tokenizer.h
   M /trunk/Tokenize/TokenizerFactory.cpp
   M /trunk/Tokenize/TokenizerFactory.h
   M /trunk/Tokenize/UnknownTypeTokenizer.cpp
   M /trunk/Tokenize/WordTokenizer.cpp
   M /trunk/Tokenize/WordTokenizer.h
   M /trunk/pinot.spec

New RTF tokenizer based on unrtf. Streamlined running helper programs. New
package pinot-text-docs includes all tokenizers and replaces -pdf and -word.

------------------------------------------------------------------------
r60 | fabricecolin | 2006-01-14 16:59:50 +0800 (Sat, 14 Jan 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/PinotUtils.cpp
   M /trunk/UI/GTK2/src/PinotUtils.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/indexDialog.cc
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.cc

Added from_utf8(), that catches conversion errors. Sorted out some niggling
issues with IndexPage and Tree.

------------------------------------------------------------------------
r59 | fabricecolin | 2006-01-14 14:45:15 +0800 (Sat, 14 Jan 2006) | 4 lines
Changed paths:
   M /trunk/Collect/NeonDownloader.cpp
   M /trunk/Collect/NeonDownloader.h
   M /trunk/Collect/dloadtest.cpp
   M /trunk/Index/Summarizer.cpp
   M /trunk/Index/Summarizer.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/IndexTree.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

Minor fix and change to NeonDownloader initialization. Capped length of
summary and added sanity checks on extract and title, which means that they
may be modified before being saved when updating a document's properties.

------------------------------------------------------------------------
r58 | fabricecolin | 2006-01-14 00:36:15 +0800 (Sat, 14 Jan 2006) | 5 lines
Changed paths:
   M /trunk/Collect/DownloaderInterface.cpp
   M /trunk/Collect/NeonDownloader.cpp
   M /trunk/Index/LanguageDetector.cpp
   M /trunk/Index/LanguageDetector.h
   M /trunk/Index/Summarizer.cpp
   M /trunk/Index/XapianIndex.cpp
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/MonitorHandler.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog_glade.cc
   M /trunk/UI/GTK2/src/importDialog_glade.hh
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/Utils/HtmlDocument.cpp
   M /trunk/Utils/Url.cpp
   M /trunk/Utils/Url.h

Mutexes for safe multi-threading with OpenSSL are type ERRORCHECK. Limit the
amount of text parsed by language guessing and summarization. Use canonical
URLs to "key" documents. The importer can follow symlinks. Several other
tweaks and fixes.

------------------------------------------------------------------------
r57 | fabricecolin | 2006-01-11 21:26:19 +0800 (Wed, 11 Jan 2006) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/indextest.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/Utils/MIMEScanner.cpp

Fixed XapianIndex::hasDocument() and the importing of URLs.

------------------------------------------------------------------------
r56 | fabricecolin | 2006-01-11 00:01:00 +0800 (Wed, 11 Jan 2006) | 2 lines
Changed paths:
   M /trunk/po/en_GB.po
   M /trunk/po/fr_FR.po

Synced po files with latest source.

------------------------------------------------------------------------
r55 | fabricecolin | 2006-01-10 23:58:56 +0800 (Tue, 10 Jan 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/mainWindow.cc

Clean threads termination at last ! Some other minor changes.

------------------------------------------------------------------------
r54 | fabricecolin | 2006-01-10 21:04:16 +0800 (Tue, 10 Jan 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/importDialog_glade.cc
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.cc

Fixes for the previous check-in.

------------------------------------------------------------------------
r53 | fabricecolin | 2006-01-10 17:46:28 +0800 (Tue, 10 Jan 2006) | 3 lines
Changed paths:
   M /trunk/Index/LanguageDetector.cpp
   M /trunk/Index/Summarizer.cpp
   M /trunk/Tokenize/TokenizerFactory.cpp
   M /trunk/Tokenize/TokenizerFactory.h
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/ModelColumns.cpp
   M /trunk/UI/GTK2/src/ModelColumns.h
   M /trunk/UI/GTK2/src/PinotUtils.cpp
   M /trunk/UI/GTK2/src/PinotUtils.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/importDialog_glade.cc
   M /trunk/UI/GTK2/src/importDialog_glade.hh
   M /trunk/UI/GTK2/src/indexDialog.cc
   M /trunk/UI/GTK2/src/indexDialog.hh
   M /trunk/UI/GTK2/src/indexDialog_glade.cc
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/propertiesDialog.cc
   M /trunk/UI/GTK2/src/propertiesDialog.hh
   M /trunk/UI/GTK2/src/propertiesDialog_glade.cc
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.hh
   M /trunk/UI/GTK2/src/queryDialog_glade.cc

Tweaked user interface. Redone importDialog; documents are now imported
directly and not handled by the main window.

------------------------------------------------------------------------
r52 | fabricecolin | 2006-01-04 03:19:59 +0800 (Wed, 04 Jan 2006) | 2 lines
Changed paths:
   M /trunk/po/en_GB.po
   M /trunk/po/fr_FR.po

Synced po files with source.

------------------------------------------------------------------------
r51 | fabricecolin | 2006-01-04 03:18:38 +0800 (Wed, 04 Jan 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/importDialog_glade.cc
   M /trunk/UI/GTK2/src/mainWindow.cc

Minor tweaks.

------------------------------------------------------------------------
r50 | fabricecolin | 2006-01-04 00:27:03 +0800 (Wed, 04 Jan 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

Follow-up to previous check-in.

------------------------------------------------------------------------
r49 | fabricecolin | 2006-01-03 21:12:11 +0800 (Tue, 03 Jan 2006) | 4 lines
Changed paths:
   D /trunk/SQL/ActionHistory.cpp
   D /trunk/SQL/ActionHistory.h
   M /trunk/SQL/Makefile
   M /trunk/SQL/historytest.cpp
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/IndexPage.h
   M /trunk/UI/GTK2/src/PinotUtils.cpp
   M /trunk/UI/GTK2/src/PinotUtils.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/Utils/DocumentInfo.cpp
   M /trunk/Utils/IndexedDocument.cpp

Dropped ActionHistory. Fixed issue with threads' end signaling. Don't append
to the index tree unless the last documents page is being shown and is not
empty.

------------------------------------------------------------------------
r48 | fabricecolin | 2006-01-03 03:35:21 +0800 (Tue, 03 Jan 2006) | 2 lines
Changed paths:
   M /trunk/TODO

-1 +1 item.

------------------------------------------------------------------------
r47 | fabricecolin | 2006-01-03 03:34:26 +0800 (Tue, 03 Jan 2006) | 3 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/IndexTree.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/importDialog.hh
   M /trunk/UI/GTK2/src/importDialog_glade.cc
   M /trunk/UI/GTK2/src/importDialog_glade.hh
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/mainWindow_glade.cc

Update all properties after a document update. Don't attempt completion when
characters are deleted off the live query field. Started reworking importDialog.

------------------------------------------------------------------------
r46 | fabricecolin | 2006-01-03 03:30:57 +0800 (Tue, 03 Jan 2006) | 3 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h

Limit the length of terms. Make sure the database is unlocked even when
an exception is caught.

------------------------------------------------------------------------
r45 | fabricecolin | 2006-01-02 05:45:56 +0800 (Mon, 02 Jan 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/Makefile
   D /trunk/UI/GTK2/src/aboutDialog.cc
   D /trunk/UI/GTK2/src/aboutDialog.hh
   D /trunk/UI/GTK2/src/aboutDialog_glade.cc
   D /trunk/UI/GTK2/src/aboutDialog_glade.hh
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/pinot.spec
   M /trunk/po/POTFILES

Dropped aboutDialog.

------------------------------------------------------------------------
r44 | fabricecolin | 2006-01-02 02:13:07 +0800 (Mon, 02 Jan 2006) | 3 lines
Changed paths:
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/Search/XapianEngine.cpp
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh

Enabled completion on the query field, based on terms present in the documents
index.

------------------------------------------------------------------------
r43 | fabricecolin | 2006-01-01 00:08:45 +0800 (Sun, 01 Jan 2006) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc

Simplified IndexThread. Update the details in the tree after a document update.

------------------------------------------------------------------------
r42 | fabricecolin | 2005-12-31 21:11:29 +0800 (Sat, 31 Dec 2005) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/PinotUtils.cpp
   M /trunk/UI/GTK2/src/PinotUtils.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/importDialog.cc
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.cc

Somewhat better charset conversion, especially for results, for which the
charset obtained by the engine or the document is taken into account. Stuff
that's already in UTF-8 is kept that way.

------------------------------------------------------------------------
r41 | fabricecolin | 2005-12-31 19:26:01 +0800 (Sat, 31 Dec 2005) | 2 lines
Changed paths:
   M /trunk/Search/SearchEngineInterface.cpp
   M /trunk/Search/SearchEngineInterface.h
   M /trunk/Search/WebEngine.cpp

Added getResultsCharset() to help with charset conversions.

------------------------------------------------------------------------
r40 | fabricecolin | 2005-12-31 19:25:03 +0800 (Sat, 31 Dec 2005) | 2 lines
Changed paths:
   M /trunk/Collect/FileCollector.cpp
   M /trunk/Collect/NeonDownloader.cpp

Return an HtmlDocument object if the type is HTML.

------------------------------------------------------------------------
r39 | fabricecolin | 2005-12-31 19:23:59 +0800 (Sat, 31 Dec 2005) | 2 lines
Changed paths:
   M /trunk/Utils/HtmlDocument.cpp
   M /trunk/Utils/HtmlDocument.h

Attempt to extract title and content type from HTML head.

------------------------------------------------------------------------
r38 | fabricecolin | 2005-12-31 19:23:01 +0800 (Sat, 31 Dec 2005) | 3 lines
Changed paths:
   M /trunk/Tokenize/HtmlTokenizer.cpp
   M /trunk/Utils/StringManip.cpp
   M /trunk/Utils/StringManip.h

Moved function removeLinkQuotes() to StringManip. Minor fix to META tags
extraction.

------------------------------------------------------------------------
r37 | fabricecolin | 2005-12-30 23:16:45 +0800 (Fri, 30 Dec 2005) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/importDialog_glade.cc
   M /trunk/UI/GTK2/src/indexDialog_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/prefsDialog_glade.cc
   M /trunk/UI/GTK2/src/propertiesDialog_glade.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.cc

Removed unhelpful _("") from glademm-generated source.

------------------------------------------------------------------------
r36 | fabricecolin | 2005-12-30 22:25:21 +0800 (Fri, 30 Dec 2005) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/pinot.cc
   M /trunk/Utils/Languages.cpp
   M /trunk/Utils/Languages.h

Save language names in English, load in current locale.

------------------------------------------------------------------------
r35 | fabricecolin | 2005-12-30 21:47:31 +0800 (Fri, 30 Dec 2005) | 2 lines
Changed paths:
   M /trunk/TODO

-4 +2 items.

------------------------------------------------------------------------
r34 | fabricecolin | 2005-12-30 21:46:55 +0800 (Fri, 30 Dec 2005) | 3 lines
Changed paths:
   M /trunk/Index/Summarizer.cpp
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h
   M /trunk/po/en_GB.po
   M /trunk/po/fr_FR.po
   M /trunk/textcat_conf.txt

Fixed issues with documents and queries language (whether it should in the
current locale or in English).

------------------------------------------------------------------------
r33 | fabricecolin | 2005-12-30 20:12:53 +0800 (Fri, 30 Dec 2005) | 2 lines
Changed paths:
   M /trunk/pinot.spec

Added StartupNotify to .desktop file.

------------------------------------------------------------------------
r32 | fabricecolin | 2005-12-30 20:12:21 +0800 (Fri, 30 Dec 2005) | 2 lines
Changed paths:
   M /trunk/po/POTFILES
   M /trunk/po/en_GB.po
   M /trunk/po/fr_FR.po

Updated translations.

------------------------------------------------------------------------
r31 | fabricecolin | 2005-12-30 20:11:43 +0800 (Fri, 30 Dec 2005) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/src/Makefile
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   A /trunk/UI/GTK2/src/pinot.cc (from /trunk/UI/GTK2/src/pinot.cpp:27)
   D /trunk/UI/GTK2/src/pinot.cpp

Sorted out issues with menuitems and view tab. Inform user if document to index
is already indexed. In the results tree, don't repeat the name of the query for
every group. Catch signals and quit cleanly.

------------------------------------------------------------------------
r30 | fabricecolin | 2005-12-30 05:30:54 +0800 (Fri, 30 Dec 2005) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/HtmlView.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

Hide, don't close the view tab. Fixed document update.

------------------------------------------------------------------------
r29 | fabricecolin | 2005-12-29 22:09:35 +0800 (Thu, 29 Dec 2005) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/HtmlView.cpp
   M /trunk/UI/GTK2/src/HtmlView.h
   M /trunk/UI/GTK2/src/IndexPage.cpp
   M /trunk/UI/GTK2/src/IndexPage.h
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/Makefile
   A /trunk/UI/GTK2/src/Notebook.cpp (from /trunk/UI/GTK2/src/NotebookTabBox.cpp:28)
   A /trunk/UI/GTK2/src/Notebook.h (from /trunk/UI/GTK2/src/NotebookTabBox.h:28)
   D /trunk/UI/GTK2/src/NotebookTabBox.cpp
   D /trunk/UI/GTK2/src/NotebookTabBox.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/ResultsTree.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh
   M /trunk/UI/RenderHTML/MozillaRenderer.cpp
   M /trunk/UI/RenderHTML/MozillaRenderer.h

All notebook tabs are open on a need-to basis and can can be closed.

------------------------------------------------------------------------
r28 | fabricecolin | 2005-12-29 17:00:55 +0800 (Thu, 29 Dec 2005) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   A /trunk/UI/GTK2/src/IndexPage.cpp
   A /trunk/UI/GTK2/src/IndexPage.h
   M /trunk/UI/GTK2/src/IndexTree.cpp
   M /trunk/UI/GTK2/src/IndexTree.h
   M /trunk/UI/GTK2/src/Makefile
   A /trunk/UI/GTK2/src/NotebookTabBox.cpp
   A /trunk/UI/GTK2/src/NotebookTabBox.h
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/PinotUtils.cpp
   M /trunk/UI/GTK2/src/PinotUtils.h
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh

First stab at getting rid of 3 tabs limitation.

------------------------------------------------------------------------
r26 | fabricecolin | 2005-12-18 18:26:22 +0800 (Sun, 18 Dec 2005) | 2 lines
Changed paths:
   M /trunk/ChangeLog
   M /trunk/UI/GTK2/config.h
   M /trunk/pinot.spec

Bumping version number to 0.35.

------------------------------------------------------------------------
r25 | fabricecolin | 2005-12-18 13:45:01 +0800 (Sun, 18 Dec 2005) | 2 lines
Changed paths:
   M /trunk/TODO

+4 items.

------------------------------------------------------------------------
r24 | fabricecolin | 2005-12-18 00:41:27 +0800 (Sun, 18 Dec 2005) | 2 lines
Changed paths:
   M /trunk/po/en_GB.po
   M /trunk/po/fr_FR.po

Updated po files.

------------------------------------------------------------------------
r23 | fabricecolin | 2005-12-18 00:40:35 +0800 (Sun, 18 Dec 2005) | 2 lines
Changed paths:
   M /trunk/Collect/NeonDownloader.h
   M /trunk/UI/GTK2/src/pinot.cpp
   M /trunk/UI/RenderHTML/MozillaRenderer.cpp
   M /trunk/UI/RenderHTML/MozillaRenderer.h

Mostly cosmetic changes to startup initialization.

------------------------------------------------------------------------
r22 | fabricecolin | 2005-12-18 00:38:56 +0800 (Sun, 18 Dec 2005) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Minor fix for LabelUpdateThread.

------------------------------------------------------------------------
r21 | fabricecolin | 2005-12-17 19:55:43 +0800 (Sat, 17 Dec 2005) | 3 lines
Changed paths:
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

Changed IndexInterface a bit, reintroduced hasLabel() so that whether documents
match the current label can be shown in the index list.

------------------------------------------------------------------------
r20 | fabricecolin | 2005-12-17 19:02:30 +0800 (Sat, 17 Dec 2005) | 2 lines
Changed paths:
   M /trunk/variables.mk

Link against mozilla-nss libraries.

------------------------------------------------------------------------
r19 | fabricecolin | 2005-12-17 19:01:43 +0800 (Sat, 17 Dec 2005) | 3 lines
Changed paths:
   M /trunk/Collect/NeonDownloader.cpp
   M /trunk/Collect/NeonDownloader.h
   M /trunk/UI/GTK2/src/pinot.cpp

NeonDownloader sets up the callbacks necessary for safe multi-threading with
OpenSSL.

------------------------------------------------------------------------
r18 | fabricecolin | 2005-12-17 18:49:04 +0800 (Sat, 17 Dec 2005) | 2 lines
Changed paths:
   M /trunk/UI/RenderHTML/MozillaRenderer.cpp

Initialize NSPR and NSS to avoid segmentation fault on https sites.

------------------------------------------------------------------------
r17 | fabricecolin | 2005-12-17 12:12:31 +0800 (Sat, 17 Dec 2005) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Hopefully fixed copy and paste into the live query field.

------------------------------------------------------------------------
r16 | fabricecolin | 2005-12-17 11:33:44 +0800 (Sat, 17 Dec 2005) | 7 lines
Changed paths:
   M /trunk/Search/XapianEngine.cpp
   M /trunk/Search/XapianEngine.h

Experimenting with multi-step search :
1. follow operators and don't stem terms
2. if no results, follow operators and stem terms
3. if no results, don't follow operators and don't stem terms
4. if no results, don't follow operators and stem terms
Steps 2 and 4 depend on a language being defined for the query.

------------------------------------------------------------------------
r15 | fabricecolin | 2005-12-17 11:20:03 +0800 (Sat, 17 Dec 2005) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Utils/StringManip.cpp

Fixed extraction of language from document data.

------------------------------------------------------------------------
r14 | fabricecolin | 2005-12-16 08:34:33 +0800 (Fri, 16 Dec 2005) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/UI/GTK2/src/mainWindow.cc

Fixed index listing with an offset. Allow to paste into live queries field.

------------------------------------------------------------------------
r13 | fabricecolin | 2005-12-16 00:56:48 +0800 (Fri, 16 Dec 2005) | 2 lines
Changed paths:
   M /trunk/Utils/XapianDatabase.h

IndexHistory is history...

------------------------------------------------------------------------
r12 | fabricecolin | 2005-12-16 00:50:35 +0800 (Fri, 16 Dec 2005) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh
   M /trunk/UI/GTK2/src/mainWindow_glade.cc
   M /trunk/UI/GTK2/src/mainWindow_glade.hh

In the index tab, dropped the First and Last buttons.

------------------------------------------------------------------------
r11 | fabricecolin | 2005-12-16 00:49:31 +0800 (Fri, 16 Dec 2005) | 2 lines
Changed paths:
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   D /trunk/SQL/IndexHistory.cpp
   D /trunk/SQL/IndexHistory.h
   M /trunk/SQL/Makefile
   M /trunk/SQL/historytest.cpp
   M /trunk/Search/QueryProperties.cpp

Second step : got rid of IndexHistory and rely exclusively on the index. 

------------------------------------------------------------------------
r10 | fabricecolin | 2005-12-15 22:56:45 +0800 (Thu, 15 Dec 2005) | 2 lines
Changed paths:
   D /trunk/SQL/LabelManager.cpp
   D /trunk/SQL/LabelManager.h

Obsolete.

------------------------------------------------------------------------
r9 | fabricecolin | 2005-12-15 22:46:50 +0800 (Thu, 15 Dec 2005) | 4 lines
Changed paths:
   M /trunk/UI/GTK2/metase-gtk2.glade
   M /trunk/UI/GTK2/src/MonitorHandler.cpp
   M /trunk/UI/GTK2/src/MonitorHandler.h
   M /trunk/UI/GTK2/src/PinotSettings.cpp
   M /trunk/UI/GTK2/src/ResultsTree.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.cpp
   M /trunk/UI/GTK2/src/WorkerThreads.h
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/pinot.cpp
   M /trunk/UI/GTK2/src/prefsDialog.cc
   M /trunk/UI/GTK2/src/prefsDialog.hh
   M /trunk/UI/GTK2/src/queryDialog.cc
   M /trunk/UI/GTK2/src/queryDialog.hh
   M /trunk/UI/GTK2/src/queryDialog_glade.cc
   M /trunk/UI/GTK2/src/queryDialog_glade.hh

"None of the words" is in the queries first properties tab, as it should work
with all engines. Added a label filter in Advanced. All labels operations are
handled by the index now, LabelManager is obsolete.

------------------------------------------------------------------------
r8 | fabricecolin | 2005-12-15 22:44:29 +0800 (Thu, 15 Dec 2005) | 3 lines
Changed paths:
   M /trunk/Index/IndexInterface.h
   M /trunk/Index/XapianIndex.cpp
   M /trunk/Index/XapianIndex.h
   M /trunk/Index/indextest.cpp
   M /trunk/SQL/Makefile
   M /trunk/Search/Google/GoogleAPIEngine.cpp
   M /trunk/Search/ObjectsSearch/ObjectsSearchAPIEngine.cpp
   M /trunk/Search/PluginWebEngine.cpp
   M /trunk/Search/QueryProperties.cpp
   M /trunk/Search/QueryProperties.h
   M /trunk/Search/XapianEngine.cpp

First step towards rationalizing the index back-end : pushed labels into the
index so that they can be used as filters by queries.

------------------------------------------------------------------------
r7 | fabricecolin | 2005-12-13 20:34:52 +0800 (Tue, 13 Dec 2005) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc
   M /trunk/UI/GTK2/src/mainWindow.hh

When pasting into the stored queries tree, pop up a queryDialog.

------------------------------------------------------------------------
r6 | fabricecolin | 2005-12-13 00:21:44 +0800 (Tue, 13 Dec 2005) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/WorkerThreads.cpp

Check select() return value and break on errors !

------------------------------------------------------------------------
r5 | fabricecolin | 2005-12-13 00:20:24 +0800 (Tue, 13 Dec 2005) | 2 lines
Changed paths:
   M /trunk/UI/GTK2/src/mainWindow.cc

Always check that IndexTree::getSelection() actually returns something.

------------------------------------------------------------------------
r4 | fabricecolin | 2005-12-13 00:16:37 +0800 (Tue, 13 Dec 2005) | 2 lines
Changed paths:
   M /trunk/Collect/NeonDownloader.cpp

Don't return a document if an error occured.

------------------------------------------------------------------------
r1 | fabricecolin | 2005-12-08 21:46:51 +0800 (Thu, 08 Dec 2005) | 1 line
Changed paths:
   A /trunk
   A /trunk/COPYING
   A /trunk/ChangeLog
   A /trunk/Collect
   A /trunk/Collect/DownloaderFactory.cpp
   A /trunk/Collect/DownloaderFactory.h
   A /trunk/Collect/DownloaderInterface.cpp
   A /trunk/Collect/DownloaderInterface.h
   A /trunk/Collect/FileCollector.cpp
   A /trunk/Collect/FileCollector.h
   A /trunk/Collect/Makefile
   A /trunk/Collect/MboxCollector.cpp
   A /trunk/Collect/MboxCollector.h
   A /trunk/Collect/NeonDownloader.cpp
   A /trunk/Collect/NeonDownloader.h
   A /trunk/Collect/XapianCollector.cpp
   A /trunk/Collect/XapianCollector.h
   A /trunk/Collect/dloadtest.cpp
   A /trunk/Index
   A /trunk/Index/IndexInterface.h
   A /trunk/Index/LanguageDetector.cpp
   A /trunk/Index/LanguageDetector.h
   A /trunk/Index/Makefile
   A /trunk/Index/Summarizer.cpp
   A /trunk/Index/Summarizer.h
   A /trunk/Index/XapianIndex.cpp
   A /trunk/Index/XapianIndex.h
   A /trunk/Index/indextest.cpp
   A /trunk/Makefile
   A /trunk/README
   A /trunk/SQL
   A /trunk/SQL/ActionHistory.cpp
   A /trunk/SQL/ActionHistory.h
   A /trunk/SQL/IndexHistory.cpp
   A /trunk/SQL/IndexHistory.h
   A /trunk/SQL/LabelManager.cpp
   A /trunk/SQL/LabelManager.h
   A /trunk/SQL/Makefile
   A /trunk/SQL/QueryHistory.cpp
   A /trunk/SQL/QueryHistory.h
   A /trunk/SQL/SQLiteBase.cpp
   A /trunk/SQL/SQLiteBase.h
   A /trunk/SQL/ViewHistory.cpp
   A /trunk/SQL/ViewHistory.h
   A /trunk/SQL/historytest.cpp
   A /trunk/Search
   A /trunk/Search/Google
   A /trunk/Search/Google/GoogleAPIEngine.cpp
   A /trunk/Search/Google/GoogleAPIEngine.h
   A /trunk/Search/Google/GoogleSearch.h
   A /trunk/Search/Google/Makefile
   A /trunk/Search/Makefile
   A /trunk/Search/ObjectsSearch
   A /trunk/Search/ObjectsSearch/Makefile
   A /trunk/Search/ObjectsSearch/ObjectsSearch.h
   A /trunk/Search/ObjectsSearch/ObjectsSearchAPIEngine.cpp
   A /trunk/Search/ObjectsSearch/ObjectsSearchAPIEngine.h
   A /trunk/Search/PluginWebEngine.cpp
   A /trunk/Search/PluginWebEngine.h
   A /trunk/Search/Plugins
   A /trunk/Search/Plugins/A9.src
   A /trunk/Search/Plugins/Acoona.src
   A /trunk/Search/Plugins/Altavista.src
   A /trunk/Search/Plugins/AmazonAPI.src
   A /trunk/Search/Plugins/AskJeeves.src
   A /trunk/Search/Plugins/BitTorrent.src
   A /trunk/Search/Plugins/Clusty.src
   A /trunk/Search/Plugins/Freshmeat.src
   A /trunk/Search/Plugins/Google.src
   A /trunk/Search/Plugins/Koders.src
   A /trunk/Search/Plugins/Lycos.src
   A /trunk/Search/Plugins/MSN.src
   A /trunk/Search/Plugins/Omega.src
   A /trunk/Search/Plugins/Teoma.src
   A /trunk/Search/Plugins/Topix.src
   A /trunk/Search/Plugins/Wikipedia.src
   A /trunk/Search/Plugins/WiseNut.src
   A /trunk/Search/Plugins/Yahoo.src
   A /trunk/Search/Plugins/YahooAPI.src
   A /trunk/Search/QueryProperties.cpp
   A /trunk/Search/QueryProperties.h
   A /trunk/Search/SOAPEnvNS.cpp
   A /trunk/Search/SearchEngineFactory.cpp
   A /trunk/Search/SearchEngineFactory.h
   A /trunk/Search/SearchEngineInterface.cpp
   A /trunk/Search/SearchEngineInterface.h
   A /trunk/Search/WebEngine.cpp
   A /trunk/Search/WebEngine.h
   A /trunk/Search/XapianEngine.cpp
   A /trunk/Search/XapianEngine.h
   A /trunk/Search/senginetest.cpp
   A /trunk/TODO
   A /trunk/Tokenize
   A /trunk/Tokenize/HtmlTokenizer.cpp
   A /trunk/Tokenize/HtmlTokenizer.h
   A /trunk/Tokenize/Makefile
   A /trunk/Tokenize/PdfTokenizer.cpp
   A /trunk/Tokenize/PdfTokenizer.h
   A /trunk/Tokenize/Tokenizer.cpp
   A /trunk/Tokenize/Tokenizer.h
   A /trunk/Tokenize/TokenizerFactory.cpp
   A /trunk/Tokenize/TokenizerFactory.h
   A /trunk/Tokenize/UnknownTypeTokenizer.cpp
   A /trunk/Tokenize/UnknownTypeTokenizer.h
   A /trunk/Tokenize/WordTokenizer.cpp
   A /trunk/Tokenize/WordTokenizer.h
   A /trunk/Tokenize/tokenizertest.cpp
   A /trunk/UI
   A /trunk/UI/GTK2
   A /trunk/UI/GTK2/config.h
   A /trunk/UI/GTK2/metase-gtk2.glade
   A /trunk/UI/GTK2/metase-gtk2.gladep
   A /trunk/UI/GTK2/pinot.png
   A /trunk/UI/GTK2/pinot.xcf
   A /trunk/UI/GTK2/src
   A /trunk/UI/GTK2/src/EnginesTree.cpp
   A /trunk/UI/GTK2/src/EnginesTree.h
   A /trunk/UI/GTK2/src/HtmlView.cpp
   A /trunk/UI/GTK2/src/HtmlView.h
   A /trunk/UI/GTK2/src/IndexTree.cpp
   A /trunk/UI/GTK2/src/IndexTree.h
   A /trunk/UI/GTK2/src/Makefile
   A /trunk/UI/GTK2/src/ModelColumns.cpp
   A /trunk/UI/GTK2/src/ModelColumns.h
   A /trunk/UI/GTK2/src/MonitorHandler.cpp
   A /trunk/UI/GTK2/src/MonitorHandler.h
   A /trunk/UI/GTK2/src/PinotSettings.cpp
   A /trunk/UI/GTK2/src/PinotSettings.h
   A /trunk/UI/GTK2/src/PinotUtils.cpp
   A /trunk/UI/GTK2/src/PinotUtils.h
   A /trunk/UI/GTK2/src/ResultsTree.cpp
   A /trunk/UI/GTK2/src/ResultsTree.h
   A /trunk/UI/GTK2/src/WorkerThreads.cpp
   A /trunk/UI/GTK2/src/WorkerThreads.h
   A /trunk/UI/GTK2/src/aboutDialog.cc
   A /trunk/UI/GTK2/src/aboutDialog.hh
   A /trunk/UI/GTK2/src/aboutDialog_glade.cc
   A /trunk/UI/GTK2/src/aboutDialog_glade.hh
   A /trunk/UI/GTK2/src/importDialog.cc
   A /trunk/UI/GTK2/src/importDialog.hh
   A /trunk/UI/GTK2/src/importDialog_glade.cc
   A /trunk/UI/GTK2/src/importDialog_glade.hh
   A /trunk/UI/GTK2/src/indexDialog.cc
   A /trunk/UI/GTK2/src/indexDialog.hh
   A /trunk/UI/GTK2/src/indexDialog_glade.cc
   A /trunk/UI/GTK2/src/indexDialog_glade.hh
   A /trunk/UI/GTK2/src/mainWindow.cc
   A /trunk/UI/GTK2/src/mainWindow.hh
   A /trunk/UI/GTK2/src/mainWindow_glade.cc
   A /trunk/UI/GTK2/src/mainWindow_glade.hh
   A /trunk/UI/GTK2/src/pinot.cpp
   A /trunk/UI/GTK2/src/prefsDialog.cc
   A /trunk/UI/GTK2/src/prefsDialog.hh
   A /trunk/UI/GTK2/src/prefsDialog_glade.cc
   A /trunk/UI/GTK2/src/prefsDialog_glade.hh
   A /trunk/UI/GTK2/src/propertiesDialog.cc
   A /trunk/UI/GTK2/src/propertiesDialog.hh
   A /trunk/UI/GTK2/src/propertiesDialog_glade.cc
   A /trunk/UI/GTK2/src/propertiesDialog_glade.hh
   A /trunk/UI/GTK2/src/queryDialog.cc
   A /trunk/UI/GTK2/src/queryDialog.hh
   A /trunk/UI/GTK2/src/queryDialog_glade.cc
   A /trunk/UI/GTK2/src/queryDialog_glade.hh
   A /trunk/UI/GTK2/xapian-powered.png
   A /trunk/UI/RenderHTML
   A /trunk/UI/RenderHTML/Makefile
   A /trunk/UI/RenderHTML/MozillaRenderer.cpp
   A /trunk/UI/RenderHTML/MozillaRenderer.h
   A /trunk/Utils
   A /trunk/Utils/Document.cpp
   A /trunk/Utils/Document.h
   A /trunk/Utils/DocumentInfo.cpp
   A /trunk/Utils/DocumentInfo.h
   A /trunk/Utils/HtmlDocument.cpp
   A /trunk/Utils/HtmlDocument.h
   A /trunk/Utils/IndexedDocument.cpp
   A /trunk/Utils/IndexedDocument.h
   A /trunk/Utils/Languages.cpp
   A /trunk/Utils/Languages.h
   A /trunk/Utils/MIMEScanner.cpp
   A /trunk/Utils/MIMEScanner.h
   A /trunk/Utils/Makefile
   A /trunk/Utils/MboxParser.cpp
   A /trunk/Utils/MboxParser.h
   A /trunk/Utils/NLS.h
   A /trunk/Utils/PluginParser.cpp
   A /trunk/Utils/PluginParser.h
   A /trunk/Utils/Result.cpp
   A /trunk/Utils/Result.h
   A /trunk/Utils/StringManip.cpp
   A /trunk/Utils/StringManip.h
   A /trunk/Utils/TimeConverter.cpp
   A /trunk/Utils/TimeConverter.h
   A /trunk/Utils/Timer.cpp
   A /trunk/Utils/Timer.h
   A /trunk/Utils/Url.cpp
   A /trunk/Utils/Url.h
   A /trunk/Utils/XapianDatabase.cpp
   A /trunk/Utils/XapianDatabase.h
   A /trunk/Utils/XapianDatabaseFactory.cpp
   A /trunk/Utils/XapianDatabaseFactory.h
   A /trunk/Utils/plugintest.cpp
   A /trunk/index.html
   A /trunk/libxmlpp026.patch
   A /trunk/pinot.spec
   A /trunk/po
   A /trunk/po/POTFILES
   A /trunk/po/en_GB.po
   A /trunk/po/fr_FR.po
   A /trunk/textcat_conf.txt
   A /trunk/variables.mk

v0.30 source
------------------------------------------------------------------------
